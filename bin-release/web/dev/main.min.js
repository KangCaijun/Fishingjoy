var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gameObject;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.uID=0/0,t.varsData=null,t.canDispose=!1,t.refCount=0,t}return __extends(t,e),t.prototype.setData=function(e,t,i,n){void 0===n&&(n=2),this.sign=e,this.uID=t,this.varsData=i,this.layerType=n},t.prototype.dispose=function(){this.uID=0/0,this.varsData=null,this.refCount=0},t}(egret.DisplayObjectContainer);e.GameObject=t,__reflect(t.prototype,"gameObject.GameObject")}(gameObject||(gameObject={}));var gameObject;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._imagePlayer=null,t._moviePlayer=null,t.isInView=!1,t}return __extends(t,e),t.prototype.loadAsset=function(e){var t=e.imageAry;if(t){this._imagePlayer=new tool.ImagePlayer;for(var i=0;i<t.length;i++)this._imagePlayer.push(t[i]);this.addChild(this._imagePlayer)}var n=e.movieClipAry;if(n){this._moviePlayer=new tool.MoviePlayer;for(var i=0;i<n.length;i++)this._moviePlayer.push(n[i]);this.addChild(this._moviePlayer)}},t.prototype.initOnce=function(e){},t.prototype.initialize=function(){this.varsData.bornX?this.x=this.varsData.bornX:this.x=-1e3,this.varsData.bornY?this.y=this.varsData.bornY:this.y=-1e3,this.varsData.rotation&&(this.rotation=this.varsData.rotation),manager.LayerManager.instance.addToLayer(this,this.layerType),this.isInView=!0},t.prototype.uninitialize=function(){this._moviePlayer&&this._moviePlayer.stop(),manager.LayerManager.instance.removeFromLayer(this),this.isInView=!1},t.prototype.dispose=function(){this._moviePlayer&&(this._moviePlayer.dispose(),this._moviePlayer=null),this._imagePlayer&&(this._imagePlayer.dispose(),this._imagePlayer=null),e.prototype.dispose.call(this)},t}(e.GameObject);e.GameObjectRender=t,__reflect(t.prototype,"gameObject.GameObjectRender")}(gameObject||(gameObject={}));var gameObject;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.grid=[],t.colliderAry=[],t.isCollided=!1,t.isAccurateCollider=!1,t}return __extends(t,e),t.prototype.initOnce=function(e){for(var t=0;t<e.colliderAry.length;t++){var i=e.colliderAry[t],n=FishingJoy.Collider.creat(i.posX,i.posY,i.radius);n.setParent(this),this.colliderAry.push(n)}e.isAccurateCollider&&(this.isAccurateCollider=e.isAccurateCollider)},t.prototype.uninitialize=function(){this.isCollided=!1,this.clearGridIndex(),e.prototype.uninitialize.call(this)},t.prototype.dispose=function(){if(0!=this.colliderAry.length){for(var t=0;t<this.colliderAry.length;t++)this.colliderAry[t].recover();this.colliderAry.length=0}e.prototype.dispose.call(this)},t.prototype.pushGridIndex=function(e){-1==this.grid.indexOf(e)&&this.grid.push(e)},t.prototype.clearGridIndex=function(){0!=this.grid.length&&(this.grid.length=0)},t.prototype.isExistGrid=function(e){return-1!=this.grid.indexOf(e)},t.isIntersect=function(e,t){for(var i=e.grid,n=(t.grid,0);n<i.length;n++)if(t.isExistGrid(i[n]))return!0;return!1},t}(e.GameObjectRender);e.GameObjectCollider=t,__reflect(t.prototype,"gameObject.GameObjectCollider")}(gameObject||(gameObject={}));var operation;!function(e){var t=function(){function e(){}return e.prototype.enterFrame=function(){},e}();e.BaseOperation=t,__reflect(t.prototype,"operation.BaseOperation")}(operation||(operation={}));var tool;!function(e){var t=function(){function e(e){this._mouseDownHandler=null,this._mouseUpHandler=null,this._mouseOutsideHandler=null,this._mouseDownAndMoveHandler=null,this._mouseClickHandler=null,this._touchCancleHandler=null,null==e&&console.assert(!1,"请检查传入参数是否为egret.DisplayObject!"),this._root=e,this._root.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMouseDown,this),this._root.addEventListener(egret.TouchEvent.TOUCH_END,this.onMouseUp,this),this._root.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onMouseOustide,this),this._root.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMouseDownAndMove,this),this._root.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouseClick,this),this._root.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this)}return e.prototype.onMouseDown=function(e,t){void 0===t&&(t=null),null!=this._mouseDownHandler&&this._mouseDownHandler.runWith(e)},e.prototype.onMouseUp=function(e){null!=this._mouseUpHandler&&this._mouseUpHandler.runWith(e)},e.prototype.onTouchCancle=function(e){this._touchCancleHandler&&this._touchCancleHandler.runWith(e)},e.prototype.onMouseOustide=function(e){null!=this._mouseOutsideHandler&&this._mouseOutsideHandler.runWith(e)},e.prototype.onMouseDownAndMove=function(e){null!=this._mouseDownAndMoveHandler&&this._mouseDownAndMoveHandler.runWith(e)},e.prototype.onMouseClick=function(e){null!=this._mouseClickHandler&&this._mouseClickHandler.runWith(e)},e.prototype.dispose=function(){this._root.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMouseDown,this),this._root.removeEventListener(egret.TouchEvent.TOUCH_END,this.onMouseUp,this),this._root.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onMouseOustide,this),this._root.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onMouseDownAndMove,this),this._root.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouseClick,this),this._root.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),null!=this._mouseDownHandler&&(this._mouseDownHandler.recover(),this._mouseDownHandler=null),this._mouseUpHandler&&(this._mouseUpHandler.recover(),this._mouseUpHandler=null),this._mouseOutsideHandler&&(this._mouseOutsideHandler.recover(),this._mouseOutsideHandler=null),this._mouseDownAndMoveHandler&&(this._mouseDownAndMoveHandler.recover(),this._mouseDownAndMoveHandler=null),this._touchCancleHandler&&(this._touchCancleHandler.recover(),this._touchCancleHandler=null),this._root instanceof egret.MovieClip&&this._root.stop(),this._root=null},Object.defineProperty(e.prototype,"mouseDownHandler",{set:function(e){this._mouseDownHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseUpHandler",{set:function(e){this._mouseUpHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseOutsideHandler",{set:function(e){this._mouseOutsideHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseDownAndMoveHandler",{set:function(e){this._mouseDownAndMoveHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseClickHandler",{set:function(e){this._mouseClickHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchCancleHandler",{set:function(e){this._touchCancleHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{set:function(e){this._root.visible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._root.x},set:function(e){this._root.x=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._root.y},set:function(e){this._root.y=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._root.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._root.height},enumerable:!0,configurable:!0}),e}();e.InteractiveObject=t,__reflect(t.prototype,"tool.InteractiveObject")}(tool||(tool={}));var BaseUICenter=function(){function e(){this._managers=new Map,this._openingUI=new Array}return e.prototype.addManager=function(e,t){if(null!=t){var i=new t;i.id=e,this._managers.addValue(e,i)}},e.prototype.getManager=function(e){return null==this._managers?null:this._managers.getValueByKey(e)},e.prototype.isExist=function(e){return null==this._managers?!1:this._managers.isExist(e)},e.prototype.getOpenParam=function(e){var t=this.getManager(e);return null!=t?t.getOpenParam():null},e.prototype.setOpenParam=function(e,t){var i=this.getManager(e);return null!=i?i.setOpenParam(t):null},e.prototype.isOpen=function(e){var t=this.getManager(e);return null!=t?t.isOpened:!0},e.prototype.openUI=function(e,t){void 0===t&&(t=null);var i=this.getManager(e);null!=i&&(this._openingUI.push(e),i.open(this.onUIinitCallBack,t))},e.prototype.closeUI=function(e){var t=this.getManager(e);if(null!=t){t.close();var i=this._openingUI.indexOf(e);-1!=i&&this._openingUI.splice(i,1)}},e.prototype.closeAll=function(){for(var e=-1;0!=this._openingUI.length;){e=this._openingUI.pop();var t=this.getManager(e);null!=t&&t.close()}},e.prototype.onUIinitCallBack=function(e){null!=this._openingUI?this._openingUI.push(e):(this._openingUI=new Array,this._openingUI.push(e))},e.prototype.dispose=function(){if(null!=this._managers){for(var e=0;e<this._managers.length;e++){var t=this._managers.getValueByIndex(e);null!=t&&(t.dispose(),t=null)}this._managers.dispose(),this._managers=null}null!=this._openingUI&&(this._openingUI.splice(0,this._openingUI.length),this._openingUI=null)},e}();__reflect(BaseUICenter.prototype,"BaseUICenter");var operation;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.BULLET_SPEED=800,t.bornTime=-1,t.rotation=-1,t.pathConfig=[],t.gmShape=[],t._speed=t.BULLET_SPEED,t.pathIndex=0,t}return __extends(t,e),t.prototype.register=function(e){this.pathIndex=0,this._gameObj=e;var t=e.varsData,i=e.varsData.operation[0];this.rotation=i.rotation,this.bornTime=i.bornTime,this.bornX=e.varsData.bornX,this.bornY=e.varsData.bornY,i.speed&&(this._speed=i.speed);var n=game.PokerFunction.GetSeatDataByUid(t.playerUID);if(null!=n){n.seatId;e.x=this.bornX,e.y=this.bornY;var a=this.bornX,o=this.bornY,r=this.rotation,s=0;this.pathConfig.push({x:a,y:o,angle:r,distNext:0,distTotal:s});for(var l=0;5>l;l++)this.addBordPoint();if(this.curPath=this.pathConfig.first(),this.nextPath=this.pathConfig[1],GM.instance.isOpen(GM.Type.BulletPath)){var h=manager.LayerManager.instance.getLayer(4),c=new egret.Shape;c.graphics.lineStyle(2,65280);for(var u=0,p=this.pathConfig;u<p.length;u++){var g=p[u];c.graphics.lineTo(g.x,g.y),h.addChild(c);var d=new egret.Shape;d.x=g.x,d.y=g.y,d.graphics.beginFill(16711680,1),d.graphics.drawCircle(0,0,50),d.graphics.endFill(),h.addChild(d),this.gmShape.push(d)}c.graphics.endFill(),this.gmShape.push(c)}}},t.prototype.inBorder=function(e,t){return-100>e||e>uniLib.Global.screenWidth+100?!1:-100>t||t>uniLib.Global.screenHeight+100?!1:!0},t.prototype.addBordPoint=function(){var e=this.pathConfig.last(),t=GX.getBorderPoint({x:e.x,y:e.y},e.angle),i=GX.getDistanceByPoint({x:t.x,y:t.y},{x:e.x,y:e.y}),n=e.distTotal+i;this.pathConfig.push({x:t.x,y:t.y,angle:t.angle,distNext:0,distTotal:n}),e.distNext=i,n-e.distTotal<200&&this.addBordPoint()},t.prototype.enterFrame=function(){var e=this._gameObj,t=game.GameTime.serverNow(),i=t-this.bornTime,n=i*(this._speed/1e3),a=this.pathConfig,o=a.last();if(n>this.curPath.distTotal)for(var r=a.length,s=this.pathIndex;r>s;s++)if(a[s].distTotal>n){this.pathIndex=s,this.nextPath=a[s],this.curPath=a[s-1];break}var l=this.curPath,h=this.nextPath;l=null==l?o:l,h=null==h?o:h,e.rotation=l.angle;var c=l.distNext,u=n-l.distTotal,p=u/c*(h.x-l.x),g=u/c*(h.y-l.y);e.x=l.x+p,e.y=l.y+g,h==o&&(this.addBordPoint(),this.addBordPoint()),this.inBorder(e.x,e.y)||gameObject.GameObjectFactory.instance.recoverGameObject(e)},t.prototype.unregister=function(){for(var e=0,t=this.gmShape;e<t.length;e++){var i=t[e];i.parent&&i.parent.removeChild(i)}this._gameObj=null,this.pathConfig.length=0},t}(e.BaseOperation);e.BulletOperation=t,__reflect(t.prototype,"operation.BulletOperation")}(operation||(operation={}));var gameObject;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._registerAry=[],e.life=0/0,e.maxLife=0/0,e.isAlive=!1,e.speed=0,e.servelID=-1,e.odds=-1,e.skillID=-1,e.isMirror=!1,e.isRed=!1,e.glowFilter=null,e.isBurstHit=!1,e}return __extends(i,t),Object.defineProperty(i.prototype,"spawnTime",{get:function(){return this.varsData.spawnTime},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pathID",{get:function(){return this.varsData.pathId},enumerable:!0,configurable:!0}),i.prototype.initOnce=function(e){t.prototype.initOnce.call(this,e),this.speed=e.speed,this.odds=e.odds,this.anchorOffsetX=e.anchorOffsetX,this.anchorOffsetY=e.anchorOffsetY,this.isMirror=e.isMirror;var i;i=30==this.sign?2:2001==this.sign?2:6,this.glowFilter=new egret.GlowFilter(ColorUtil.COLOR_RED,1,1,1,i,1,!1),e.isMirror&&Master.instance.isRotation?this.scaleY=-1:this.scaleY=1,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelectFish,this)},i.prototype.playHitEff=function(e,t,i){if(void 0===t&&(t=200),void 0===i&&(i=!1),Master.instance.uid==e){if(i)Laya.timer.once(t,this,this._setNormal),this.isBurstHit=!0;else{if(this.isBurstHit)return;if(Laya.timer.once(t,this,this._setNormal),this.isRed)return;this.isRed=!0}this._moviePlayer.filters=[this.glowFilter]}},i.prototype._setNormal=function(){this._moviePlayer.filters=[],this.isRed=!1,this.isBurstHit=!1},Object.defineProperty(i.prototype,"MoivePlayer",{get:function(){return this._moviePlayer},enumerable:!0,configurable:!0}),i.prototype.playDieMov=function(e){this._moviePlayer.switchAniPlayOnce("die",e)},i.prototype.initialize=function(){if(t.prototype.initialize.call(this),this.skillID=this.varsData.skillID,this._moviePlayer&&this._moviePlayer.switchAniByIndex(0),this.life=this.maxLife,this.servelID=this.varsData.serveID,void 0==this.servelID&&console.assert(!1,"未定义severalID！"),this.varsData.operation)for(var i=0;i<this.varsData.operation.length;i++)this._registerAry.push(manager.OperationManager.instance.registerOperation(this,this.varsData.operation[i].type));this.isAlive=!0,0!=this.skillID&&(this.skillRender=e.FishSkillTool.addSkillEff(this,this.skillID))},i.prototype.onSelectFish=function(){Master.instance.aimFishServelID!=this.servelID?EventManager.fireEvent(11,this):EventManager.fireEvent(19)},i.prototype.uninitialize=function(){this.isCollided=!1,this.skillRender&&(e.FishSkillTool.removeSkill(this,this.skillRender),this.skillRender=null,this.skillID=-1),this.clearGridIndex(),this.unregisterOperation(),t.prototype.uninitialize.call(this)},i.prototype.unregisterOperation=function(){for(var e=0;e<this._registerAry.length;e++)manager.OperationManager.instance.unregisterOperation(this._registerAry[e]);this._registerAry.length=0},i.prototype.dispose=function(){this._registerAry.length=0,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onSelectFish,this),this.glowFilter=null,t.prototype.dispose.call(this)},i}(e.GameObjectCollider);e.Fish=t,__reflect(t.prototype,"gameObject.Fish")}(gameObject||(gameObject={}));var BaseUIControl=function(){function e(){this._dataCenter=null,this._viewCenter=null}return e.prototype.init=function(e,t){this._dataCenter=e,this._viewCenter=t},e.prototype.onInit=function(){},e.prototype.onShow=function(){},e.prototype.onOpenAgain=function(){},e.prototype.onHide=function(){},e.prototype.dispose=function(){this._viewCenter=null,this._dataCenter=null},e}();__reflect(BaseUIControl.prototype,"BaseUIControl");var BaseUIManager=function(){function e(){this.id=0,this._resDatas=new Array,this._onInitedCallBack=null,this._loadedCount=0,this._dataCenter=null,this._viewCenter=null,this._controlCenter=null,this._dataCenter=new UIDataCenter,this._viewCenter=new UIViewCenter,this._controlCenter=new UIControlCenter(this,this._dataCenter,this._viewCenter)}return e.prototype.dispose=function(){null!=this._controlCenter&&(this._controlCenter.dispose(),this._controlCenter=null),null!=this._viewCenter&&(this._viewCenter.dispose(),this._viewCenter=null),null!=this._dataCenter&&(this._dataCenter.dispose(),this._dataCenter=null)},e.prototype.open=function(e,t){return null==this._dataCenter||this._dataCenter.isLoading||this._dataCenter.isOpened?void(null!=this._controlCenter&&this._controlCenter.onOpenAgain()):(this._onInitedCallBack=e,this._dataCenter.openParam=t,void(this._dataCenter.isLoaded?this.doOpen():this.doLoad()))},e.prototype.close=function(){null!=this._dataCenter&&!this._dataCenter.isLoading&&this._dataCenter.isOpened&&this.doHide()},e.prototype.hide=function(){null!=this._dataCenter&&!this._dataCenter.isLoading&&this._dataCenter.isOpened&&this.doHide()},e.prototype.addControl=function(e){null!=e&&this._controlCenter.addControl(e)},e.prototype.getControl=function(e){return null==this._controlCenter?null:this._controlCenter.getControl(e)},e.prototype.addData=function(e){null!=this._dataCenter&&this._dataCenter.addData(e)},e.prototype.getData=function(e){return null==this._dataCenter?null:this._dataCenter.getData(e)},e.prototype.addView=function(e){null!=this._viewCenter&&this._viewCenter.addView(e)},e.prototype.getView=function(e){return null==this._viewCenter?null:this._viewCenter.getView(e)},e.prototype.addResData=function(e){this._resDatas.push(e)},Object.defineProperty(e.prototype,"isOpened",{get:function(){return this._dataCenter||!this._dataCenter.isOpened?!1:!0},enumerable:!0,configurable:!0}),e.prototype.setOpenParam=function(e){null!=this._dataCenter&&(this._dataCenter.openParam=e)},e.prototype.getOpenParam=function(){return null!=this._dataCenter?this._dataCenter.openParam:null},e.prototype.doLoad=function(){if(null!=this._dataCenter)if(this._dataCenter.isLoading=!0,this._loadedCount=0,this._resDatas.length<=0)this.loadComplete();else for(var e=0;e<this._resDatas.length;e++){var t=this._resDatas[e];null!=t&&RES.getResByUrl(t.url,this.loadComplete,this,t.resType)}},e.prototype.loadComplete=function(){if(this._loadedCount++,this._loadedCount>=this._resDatas.length){if(null==this._dataCenter||null==this._viewCenter||null==this._controlCenter)return;this._dataCenter.isLoading=!1,this._dataCenter.isLoaded=!0,this.doOpen()}},e.prototype.doOpen=function(){null!=this._dataCenter&&null!=this._viewCenter&&null!=this._controlCenter&&(this._dataCenter.onInit(),this._viewCenter.onInit(),this._controlCenter.onInit(),this._dataCenter.isOpened=!0,this._dataCenter.onShow(),this._viewCenter.onShow(),this._controlCenter.onShow(),null!=this._onInitedCallBack&&this._onInitedCallBack.call(this._onInitedCallBack,this.id))},e.prototype.doHide=function(){null!=this._dataCenter&&null!=this._viewCenter&&null!=this._controlCenter&&(this._controlCenter.onHide(),this._viewCenter.onHide(),this._dataCenter.onHide(),this._dataCenter.isOpened=!1)},e}();__reflect(BaseUIManager.prototype,"BaseUIManager");var tool;!function(e){var t=function(e){function t(t,i,n,a){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===a&&(a=!1);var o=e.call(this,t)||this;return o._enabled=!0,o._soundName=null,o._canExpand=!1,o.data=null,t instanceof egret.DisplayObjectContainer&&(t.touchChildren=!1),o._canExpand=n,a&&(o._root.anchorOffsetX=o.width/2,o._root.anchorOffsetY=o.height/2,o._root.x+=o.width/2,o._root.y+=o.height/2),o.setSound(i),o}return __extends(t,e),t.prototype.setLabel=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var a=new eui.Label;a.text=e,a.size=t,this._root instanceof egret.DisplayObjectContainer?(this._root.addChild(a),a.x=(this._root.width-a.width)/2+i,a.y=(this._root.height-a.height)/2+n):this._root.parent&&(this._root.parent.addChild(a),a.x=(this._root.width-a.width)/2+this._root.x+i,a.y=(this._root.height-a.height)/2+this._root.y+n)},t.prototype.setSound=function(e){this._soundName=e},t.prototype.onMouseOustide=function(t){e.prototype.onMouseOustide.call(this,t),this.changeStatus(BTN_STATE.STATUS_DEFAULT),this._canExpand&&(this._root.scaleX=this._root.scaleY=1)},t.prototype.onMouseDown=function(t){e.prototype.onMouseDown.call(this,t),this.changeStatus(BTN_STATE.STATUS_HIGH_LIGHT),null!=this._soundName&&FishingJoy.SoundManager.instance.playSoundByName(this._soundName),this._canExpand&&(this._root.scaleX=this._root.scaleY=1.1)},t.prototype.onMouseUp=function(t){e.prototype.onMouseUp.call(this,t),this.changeStatus(BTN_STATE.STATUS_DEFAULT),this._canExpand&&(this._root.scaleX=this._root.scaleY=1)},t.prototype.onMouseClick=function(e){null!=this._mouseClickHandler&&this._mouseClickHandler.runWith(this)},t.prototype.dispose=function(){e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled!=e&&(this._enabled=e,this._root.touchEnabled=e,this._enabled?this.changeStatus(BTN_STATE.STATUS_DEFAULT):this.changeStatus(BTN_STATE.STATUS_GRAY))},enumerable:!0,configurable:!0}),t.prototype.changeStatus=function(e){var t,i;switch(e){case BTN_STATE.STATUS_DEFAULT:i=null;break;case BTN_STATE.STATUS_HIGH_LIGHT:t=[1,0,0,0,51,0,1,0,0,224*.2,0,0,1,0,141*.2,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);break;case BTN_STATE.STATUS_DOWN:t=[1,0,0,0,-30,0,1,0,0,-30,0,0,1,0,-30,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);break;case BTN_STATE.STATUS_GRAY:t=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],i=new egret.ColorMatrixFilter(t)}null==i?this._root.filters=[]:this._root.filters=[i]},t}(e.InteractiveObject);e.Button=t,__reflect(t.prototype,"tool.Button")}(tool||(tool={}));var BTN_STATE;!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_HIGH_LIGHT=1]="STATUS_HIGH_LIGHT",e[e.STATUS_DOWN=2]="STATUS_DOWN",e[e.STATUS_GRAY=3]="STATUS_GRAY"}(BTN_STATE||(BTN_STATE={}));var SimpleMap=function(){function e(){}return Object.defineProperty(e.prototype,"keys",{get:function(){return Object.getOwnPropertyNames(this)},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){this[e]=t},e.prototype.get=function(e){return this.isExist(e)?this[e]:null},e.prototype.getByKeyIndex=function(e){return this[this.keys[e]]},e.prototype.isExist=function(e){var t=this[e];return void 0===t?!1:!0},Object.defineProperty(e.prototype,"length",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),e.prototype.remove=function(e){return this.isExist(e)?(delete this[e],!0):!1},e.prototype.clear=function(){for(var e=this.keys.slice(),t=0;t<e.length;t++)delete this[e[t]]},e.prototype.recover=function(){this.clear(),Pool.recover(Pool.SIMPLE_MAP,this)},e.prototype.copy=function(){for(var t=Pool.getItemByClass(Pool.SIMPLE_MAP,e),i=this.keys.slice(),n=0;n<i.length;n++)t.set(i[n],this[i[n]]);return t},e}();__reflect(SimpleMap.prototype,"SimpleMap");var FishingJoy;!function(e){var t=egret.Shape,i=function(e){function i(i,n,a){void 0===i&&(i=!1),void 0===n&&(n=1),void 0===a&&(a=.5);var o=e.call(this)||this;return o._blakBG=new t,o._drawBar=new t,o._posX=-1,o._posY=-1,o._hasBlackBg=!1,o._alpha=.5,o._lastPointX=-1,o._lastPointY=-1,o._panelWidth=-1,o._panelHeight=-1,o._panelX=0,o._panelY=0,o._alpha=a,o._hasBlackBg=i,o._enterEff=n,o.addEventListener(eui.UIEvent.CREATION_COMPLETE,o._creationComplete,o),o}return __extends(i,e),i.prototype._creationComplete=function(e){this._selfAdaption(),this._showEnterEff(),this._showBlackBg()},Object.defineProperty(i.prototype,"blackBgHandler",{set:function(e){this._blackBgHandler=e},enumerable:!0,configurable:!0}),i.prototype._selfAdaption=function(){null!=this.skin.bg?(this._panelWidth=this.skin.bg.width,this._panelHeight=this.skin.bg.height,this._panelX=this.skin.bg.x,this._panelY=this.skin.bg.y):(this._panelWidth=this.width,this._panelHeight=this.height),this._posX=(uniLib.Global.screenWidth-this._panelWidth)/2-this._panelX,this._posY=(uniLib.Global.screenHeight-this._panelHeight)/2-this._panelY},i.prototype._drawDragRect=function(){this._drawBar.graphics.beginFill(ColorUtil.COLOR_BLACK,0),this._drawBar.graphics.drawRect(0,0,this._panelWidth,50),this._drawBar.graphics.endFill(),this._drawBar.x=this._panelX,this._drawBar.y=this._panelY,this._drawBar.touchEnabled=!0,this.addChildAt(this._drawBar,1),this._drawBar.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._starDrag,this),this._drawBar.addEventListener(egret.TouchEvent.TOUCH_END,this._endDrag,this),this._drawBar.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this._outsideDrag,this)},i.prototype._starDrag=function(e){egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this._onDrag,this),this._lastPointX=e.stageX,this._lastPointY=e.stageY},i.prototype._outsideDrag=function(e){egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this._onDrag,this),this._lastPointX=e.stageX,this._lastPointY=e.stageY},i.prototype._onDrag=function(e){var t=e.stageX-this._lastPointX,i=e.stageY-this._lastPointY;this.x+=t,this.y+=i,this._lastPointX=e.stageX,this._lastPointY=e.stageY},i.prototype._endDrag=function(e){egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this._onDrag,this),this._lastPointX=e.stageX,this._lastPointY=e.stageY},i.prototype._showBlackBg=function(){this._hasBlackBg&&(this._blakBG.graphics.beginFill(0,this._alpha),this._blakBG.graphics.drawRect(0,0,uniLib.Global.screenWidth,uniLib.Global.screenHeight),this._blakBG.graphics.endFill(),this._blakBG.touchEnabled=!0,this._blakBG.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onClickBlackBg,this),manager.LayerManager.instance.addToLayer(this._blakBG,11))},i.prototype._onClickBlackBg=function(){this._blackBgHandler&&this._blackBgHandler.run()},i.prototype.dispose=function(){GX.GameLayerManager.removeUI(this._blakBG),this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this._creationComplete,this),0!=this._enterEff&&egret.Tween.removeTweens(this),this._hasBlackBg&&(this._blakBG.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._onClickBlackBg,this),this._blakBG=null,this._blackBgHandler&&(this._blackBgHandler.recover(),this._blackBgHandler=null))},i.prototype.showCloseEff=function(e){var t=this._posX+this._panelWidth/4,i=this._posY+this._panelHeight/4;egret.Tween.get(this).to({alpha:0,scaleX:.5,scaleY:.5,x:t,y:i},400,egret.Ease.backOut).call(this._closePanel,this,[e]),GX.GameLayerManager.removeUI(this._blakBG)},i.prototype._closePanel=function(e){e.run()},i.prototype._showEnterEff=function(){switch(0!=this._enterEff&&egret.Tween.removeTweens(this),this._enterEff){case 0:this.x=this._posX,this.y=this._posY;break;case 1:this.alpha=0,this.scaleX=.5,this.scaleY=.5,this.x=this._posX+this._panelWidth/4,this.y=this._posY+this._panelHeight/4,egret.Tween.get(this).to({alpha:1,scaleX:1,scaleY:1,x:this._posX,y:this._posY},300,egret.Ease.backOut);break;case 2:this.alpha=0,this.scaleX=.5,this.scaleY=.5,this.x=this._posX+this._panelWidth/4,this.y=this._posY+this._panelHeight/4,egret.Tween.get(this).to({alpha:1,scaleX:1,scaleY:1,x:this._posX,y:this._posY},600,egret.Ease.elasticOut);break;case 3:this.x=-this._panelWidth,egret.Tween.get(this).to({x:this._posX},300,egret.Ease.cubicOut);break;case 4:this.x=this._panelWidth,egret.Tween.get(this).to({x:this._posX},300,egret.Ease.cubicOut);break;case 5:this.y=-this._panelHeight,egret.Tween.get(this).to({y:this._posY},300,egret.Ease.cubicOut);break;case 6:this.y=this._panelHeight,egret.Tween.get(this).to({y:this._posY},300,egret.Ease.cubicOut)}},i}(eui.Component);e.BasePopPanel=i,__reflect(i.prototype,"FishingJoy.BasePopPanel")}(FishingJoy||(FishingJoy={}));var FishingJoy;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.onInit=function(){this._view=this._viewCenter.getView(e.FishHelpView),this._view.blackBgHandler=Handler.create(this,this._onClose,null,!0)},i.prototype.onShow=function(){this._view.closeBtn.mouseClickHandler=Handler.create(this,this._onClose,null,!0)},i.prototype._onClose=function(){this._view.showCloseEff(Handler.create(UICenter.instance,UICenter.instance.closeUI,[1001],!0))},i.prototype.dispose=function(){this._view=null,t.prototype.dispose.call(this)},i}(BaseUIControl);e.FishHelpControl=t,__reflect(t.prototype,"FishingJoy.FishHelpControl")}(FishingJoy||(FishingJoy={}));var ConfigParse=function(){function e(){}return e.getJosn=function(e){var t=RES.getRes(e),i=t.slice(0);return i},e.getPropertyByProperty=function(e,t,i,n){if(e&&e instanceof Array&&0!=e.length){for(var a=0,o=e;a<o.length;a++){var r=o[a],s=r;if(s.hasOwnProperty(t)&&s.hasOwnProperty(n)&&s[t]==i)return s[n]}return null}},e}();__reflect(ConfigParse.prototype,"ConfigParse");var FishingJoy;!function(e){var t=function(){function e(){this.master=Master.instance,this.level=0,this.isInit=!1,this.roomID=0,GX.PokerEvent.Instance.roomDataUpdateEvent.add(this._updataRoomData,this),GX.PokerEvent.Instance.gameStateUpdate.add(this._gameStateUpdate,this)}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype._gameStateUpdate=function(e){if(this.isInit&&e){if(this.lastGameStatus=this.gameStatus,e.status==Cmd.GameStatus.GameStatus_Bet){egret.log("=============下注状态=============");Math.floor(e.endTime/1e3-game.GameTime.serverNow()/1e3);this.gameStatus=2}else e.status==Cmd.GameStatus.GameStatus_Free?(egret.log("=============空闲状态============="),this.gameStatus=1):e.status==Cmd.GameStatus.GameStatus_Lottery?(egret.log("=============开奖状态============="),this.gameStatus=3):e.status==Cmd.GameStatus.GameStatus_Settle&&(egret.log("=============结算状态============="),this.gameStatus=4);this.lastGameStatus!=this.gameStatus}},Object.defineProperty(e.prototype,"isSwitchFish",{get:function(){return this.m_isSwitchFish},set:function(e){this.m_isSwitchFish=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noticeTriggers",{get:function(){var e=game.RoomData.Instance.level,t=table.TableBaseRuleConfigList.instance().first(function(t){return t.level==e}),i=t?t.noticeTriggers:null;return i&&i instanceof Array?i.first().id:0},enumerable:!0,configurable:!0}),e.prototype.getBatterIdByIndex=function(e){return this.getBatterIdList()[e]},e.prototype.getBatterIndex=function(e){return this.getBatterIdList().find(function(t){return t==e})},e.prototype.getBatterIdList=function(){var e=game.RoomData.Instance.level,t=table.TableBaseRuleConfigList.instance().first(function(t){return t.level==e});return t.betPointList},e.prototype.nextBatterId=function(e){var t=this.getBatterIdList(),i=t.find(function(t){return t==e}),n=t[i+1];return null==n?t.last():n},e.prototype.beforBatterId=function(e){var t=this.getBatterIdList(),i=t.find(function(t){return t==e}),n=t[i-1];return null==n?t.first():n},e.prototype.minBatterId=function(){return this.getBatterIdList().first()},e.prototype.maxBatterId=function(){return this.getBatterIdList().last()},e.prototype.getRuleConfigList=function(){var e=this;return RES.getRes("TableGameRuleConfigList_json").filter(function(t){return t.level==e.level})},e.prototype.accessToProps=function(e){return RES.getRes("TablePropConfig_json").filter(function(t){return t.id==e})},e.prototype._updataRoomData=function(e){e&&(this.isInit||(this.isInit=!0,this.roomID=e.roomData.roomId,this.level=e.roomData.level,this.batteryIDAry=this.getRuleConfigList()[0].batteryIds,EventManager.fireEvent(0,this.level),2==this.gameStatus||3==this.gameStatus||4==this.gameStatus||1==this.gameStatus))},e.prototype.dispose=function(){GX.PokerEvent.Instance.gameStateUpdate.remove(this._gameStateUpdate,this),GX.PokerEvent.Instance.roomDataUpdateEvent.remove(this._updataRoomData,this),this.master.dispose(),this.master=null},e._instance=null,e}();e.DataCenter=t,__reflect(t.prototype,"FishingJoy.DataCenter")}(FishingJoy||(FishingJoy={}));var FishingJoy;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.dataCenter=e.DataCenter.instance,i.eventManager=EventManager.instance,i._init(),i.addEventListener(egret.Event.ENTER_FRAME,i._enterFrame,i),GX.PokerEvent.Instance.leaveRoom.add(i._leaveRoom,i),i}return __extends(i,t),i.prototype._init=function(){Laya.init(),this.gameObjectManager=manager.GameObjectManager.instance,this.layerManager=manager.LayerManager.instance,this.operationManager=manager.OperationManager.instance,this.fishingJoyLogic=e.FishingJoyLogic.instance
},Object.defineProperty(i,"instance",{get:function(){return null==this._instance&&(this._instance=new i),this._instance},enumerable:!0,configurable:!0}),i.prototype._leaveRoom=function(){this.dispose()},i.prototype._enterFrame=function(e){Laya.timer.update()},i.prototype.dispose=function(){game.GameConstant.updataStageSize(),UICenter.instance.closeAll(),this.fishingJoyLogic.dispose(),this.fishingJoyLogic=null,this.eventManager.dispose(),this.eventManager=null,this.dataCenter.dispose(),this.dataCenter=null,this.layerManager.dispose(),this.layerManager=null,this.operationManager.dispose(),this.operationManager=null,this.gameObjectManager.dispose(),this.gameObjectManager=null,game.SoundHand.Instance.dispose(),Pool.clearAll(),this.removeEventListener(egret.Event.ENTER_FRAME,this._enterFrame,this),GX.PokerEvent.Instance.leaveRoom.remove(this._leaveRoom,this),RES.destroyRes(game.GameConstant.ResGroup_BY,!1),uniLib.ResUtils.clearResConfigByGroupName([game.GameConstant.ResGroup_BY]),game.PokerFunction.exitGame(),uniLib.GameModuleUtils.ExitGame(!1)},i._instance=null,i}(egret.DisplayObject);e.GameCenter=t,__reflect(t.prototype,"FishingJoy.GameCenter")}(FishingJoy||(FishingJoy={}));var GM=function(){function e(){this.gmList=[]}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.openGM=function(e){},e.prototype.open=function(e){this.gmList[e]=!0},e.prototype.close=function(e){this.gmList[e]=!1},e.prototype.isOpen=function(e){return this.gmList[e]?!0:!1},e.prototype.typeToString=function(t){return t==e.Type.FishPath?"鱼路径":t==e.Type.BulletPath?"子弹路径":void 0},e}();__reflect(GM.prototype,"GM"),function(e){var t;!function(e){e[e.Min=1]="Min",e[e.FishPath=1]="FishPath",e[e.BulletPath=2]="BulletPath",e[e.Max=2]="Max"}(t=e.Type||(e.Type={}))}(GM||(GM={}));var Master=function(){function e(){this.uid=-1,this.nickName=void 0,this.headURL=void 0,this.money=0,this.lastMoney=0,this.gender=void 0,this.baseInfo=null,this.seatID=-1,this.isAimShoot=!1,this.isFastShoot=!1,this.isAutoShoot=!1,this.isAimShootCooling=!1,this.isFastShootCooling=!1,this.isAutoShootCooling=!1,this.isNormalShoot=!0,this.aimFishServelID=0/0,this.isRotation=!1,this.masterBattery=null,this.prohibitShoot=!1,game.RoomData.Instance.MainSeatChanged.add(this.updatePlayerInfo,this),EventManager.registerEvent(12,Handler.create(this,this._mainSeatChanged))}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.updatePlayerInfo=function(e){e==game.USerSeatState.SitDown?(null!=game.PokerFunction.MainUser&&(this.uid=game.PokerFunction.MainUser.uid,this.seatID=game.PokerFunction.MainSeatId,null==this.baseInfo&&(this.baseInfo=game.PokerFunction.MainUser,this.baseInfo.nameChanged.add(this._nameChanged,this),this.baseInfo.headUrlChanged.add(this._headChanged,this),this.baseInfo.pointChanged.add(this._onMoneyChanged,this))),EventManager.fireEvent(9,this.seatID)):e==game.USerSeatState.StandUp&&(-1!=this.seatID&&(this.seatID=-1),null!=this.baseInfo&&(this.baseInfo.nameChanged.remove(this._nameChanged,this),this.baseInfo.headUrlChanged.remove(this._headChanged,this),this.baseInfo.pointChanged.remove(this._onMoneyChanged,this),this.baseInfo=null))},e.prototype._mainSeatChanged=function(){var e=game.PokerFunction.MainSeat;if(null!=e){var t=e.seatId;if(t>2){this.isRotation=!0;var i=180;manager.LayerManager.instance.setLayerRotation(i,2),manager.LayerManager.instance.setLayerRotation(i,3),manager.LayerManager.instance.setLayerRotation(i,4);var n=(UICenter.instance.getManager(1e3).getView(FishingJoy.FishMainSceneView).backGround0,UICenter.instance.getManager(1e3).getView(FishingJoy.SeatView).batteryGroup),a=n.get(t);if(3==t){var o=n.get(2);a.changeSeat(o),a.curRotation=180;var r=n.get(4),s=n.get(1);r.changeSeat(s)}else if(4==t){var l=n.get(1);a.changeSeat(l);var o=n.get(2),h=n.get(3);a.curRotation=180,o.changeSeat(h)}}}},e.prototype._nameChanged=function(){this.nickName=this.baseInfo.nickName},e.prototype._headChanged=function(){this.headURL=this.baseInfo.headUrl},e.prototype._onMoneyChanged=function(){this.lastMoney=this.money,this.money=this.baseInfo.point},e.prototype.dispose=function(){this.uid=-1,this.nickName=void 0,this.headURL=void 0,this.money=-1,this.gender=void 0,null!=this.baseInfo&&(this.baseInfo.nameChanged.remove(this._nameChanged,this),this.baseInfo.headUrlChanged.remove(this._headChanged,this),this.baseInfo.pointChanged.remove(this._onMoneyChanged,this),this.baseInfo=null),game.RoomData.Instance.MainSeatChanged.remove(this.updatePlayerInfo,this),EventManager.unregisterEvent(12,this,this._mainSeatChanged)},e._instance=null,e}();__reflect(Master.prototype,"Master");var SHOOT_TYPE;!function(e){e[e.FAST=0]="FAST",e[e.AIM=1]="AIM",e[e.AUTO=2]="AUTO",e[e.NORMAL=3]="NORMAL"}(SHOOT_TYPE||(SHOOT_TYPE={}));var FishingJoy;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e._instance=null,e}();e.MovieClipCenter=t,__reflect(t.prototype,"FishingJoy.MovieClipCenter")}(FishingJoy||(FishingJoy={}));var game;!function(e){var t=function(){function e(){this.by_musicBg=["by_BackgroundMusic1_mp3","by_BackgroundMusic2_mp3","by_BackgroundMusic3_mp3","by_BackgroundMusic4_mp3"]}return Object.defineProperty(e,"Instance",{get:function(){return null==this.m_Instance&&(this.m_Instance=new e),this.m_Instance},enumerable:!0,configurable:!0}),e.prototype.playBgMp3=function(){},e.prototype.playBgMusic=function(){uniLib.SoundMgr.instance.playBgMusic(this.by_musicBg)},e.prototype.dispose=function(){this.currentYingx&&(this.currentYingx.stop(),this.currentYingx.removeEventListener(egret.Event.SOUND_COMPLETE,this.playBgMusic,this))},e.prototype.playButtonClick=function(){uniLib.SoundMgr.instance.playSound("by_ButtonClick_mp3")},e.prototype.playBlast=function(){uniLib.SoundMgr.instance.playSound("by_blast_mp3")},e.prototype.playHighSpeedGun=function(){if(uniLib.SoundMgr.instance.soundOpen){var e=RES.getRes("by_HighSpeedGun_mp3").play(0,1);e.volume=.2}},e.prototype.playLowSpeedGun=function(){if(uniLib.SoundMgr.instance.soundOpen){var e=RES.getRes("by_LowSpeedGun_mp3").play(0,1);e.volume=.4}},e.prototype.playMedalAppearance=function(){uniLib.SoundMgr.instance.playSound("by_MedalAppearance_mp3")},e.prototype.playGoldCoin=function(){uniLib.SoundMgr.instance.playSound("by_GoldCoin_mp3")},e.prototype.playGoldCoinRain=function(){uniLib.SoundMgr.instance.playSound("by_GoldCoinRain_mp3")},e.prototype.playAlert=function(){uniLib.SoundMgr.instance.playSound("by_Alert_mp3")},e.prototype.playGoldenDragonCapture=function(){uniLib.SoundMgr.instance.playSound("by_GoldenDragonCapture_mp3")},e.prototype.playAimStart=function(){uniLib.SoundMgr.instance.playSound("by_AimStart_mp3")},e.prototype.playCatch=function(){uniLib.SoundMgr.instance.playSound("by_Catch_mp3")},e.prototype.playMermaidCapture=function(){uniLib.SoundMgr.instance.playSound("by_MermaidCapture_mp3")},e.prototype.playTurretDemotion=function(){uniLib.SoundMgr.instance.playSound("by_TurretDemotion_mp3")},e.prototype.playTurretUpgrade=function(){uniLib.SoundMgr.instance.playSound("by_TurretUpgrade_mp3")},e.prototype.playChangeTheSpecialBackground=function(){uniLib.SoundMgr.instance.playSound("by_ChangeTheSpecialBackground_mp3")},e.prototype.playGoldTide=function(){uniLib.SoundMgr.instance.playSound("by_GoldTide_mp3")},e.prototype.playCatchAllInOneDraft=function(){uniLib.SoundMgr.instance.playSound("by_CatchAllInOneDraft_mp3")},e.prototype.playCatchAllInOneDraft1=function(){uniLib.SoundMgr.instance.playSound("by_CatchAllInOneDraft1_mp3")},e.prototype.playOpenFishingNet=function(){uniLib.SoundMgr.instance.playSound("by_OpenFishingNet_mp3")},e}();e.SoundHand=t,__reflect(t.prototype,"game.SoundHand")}(game||(game={}));var FishingJoy;!function(e){var t=function(){function e(){this.curMusic=-1}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getSoundMethodOne=function(){var e=new egret.Sound;e.addEventListener(egret.Event.COMPLETE,function(t){e.play()},this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){console.log("loaded error!")},this),e.load("resource/sound/sound.mp3")},e.prototype.getSoundMethodTwo=function(){var e=new egret.URLLoader;e.addEventListener(egret.Event.COMPLETE,function(t){var i=e.data;i.play()},this),e.dataFormat=egret.URLLoaderDataFormat.SOUND,e.load(new egret.URLRequest("resource/sound/sound.mp3"))},e.prototype.playSoundByName=function(e,t){void 0===t&&(t=1);var i=RES.getRes(e);null!=i?uniLib.SoundMgr.instance.playSound(e,t):console.assert(!1,"音源key为"+e+"不存在!")},e.prototype.stopSound=function(e){uniLib.SoundMgr.instance.isSoundPlaying(e)&&uniLib.SoundMgr.instance.stopSound(e)},e.prototype.getSound=function(e){return RES.getRes(e)},e.prototype.playBG=function(e){},e.prototype.dispose=function(){uniLib.SoundMgr.instance.stopSounds()},e._instance=null,e}();e.SoundManager=t,__reflect(t.prototype,"FishingJoy.SoundManager")}(FishingJoy||(FishingJoy={}));var RoleData=function(){function e(){this.seatListMap=new Dictionary,game.RoomData.Instance.addSeatChanged.add(this._addSeat,this),game.RoomData.Instance.delectSeatChanged.add(this._roomPlayerListDel,this)}return e.prototype._addSeat=function(e){if(e&&-1==this.seatListMap.indexOf(e.seatId)){var t=new SeatData(e);this.seatListMap.set(e.seatId,t)}},e.prototype._roomPlayerListDel=function(e){if(this.seatListMap.indexOf(e)){var t=this.seatListMap.get(e);t.dispose(),this.seatListMap.remove(e)}},e.prototype.dispose=function(){this.seatListMap.clear(),game.RoomData.Instance.addSeatChanged.remove(this._addSeat,this),game.RoomData.Instance.delectSeatChanged.remove(this._roomPlayerListDel,this)},e}();__reflect(RoleData.prototype,"RoleData");var SeatData=function(){function e(e){this.seatData=e,this.seatID=e.seatId,this.seatData.userChanged.add(this._userChange,this)}return e.prototype._userChange=function(e){return e?(this.uid=e.uid,this.playerInfo=e,this.playerInfo.nameChanged.add(this._nameChanged,this),this.playerInfo.headUrlChanged.add(this._headChanged,this),void this.playerInfo.pointChanged.add(this._onMoneyChanged,this)):void this._clear()},e.prototype._nameChanged=function(){this.nickName=this.playerInfo.nickName},e.prototype._headChanged=function(){this.headUrl=this.playerInfo.headUrl},e.prototype._onMoneyChanged=function(){this.money=this.playerInfo.point},e.prototype._clear=function(){this.uid=-1},e.prototype.dispose=function(){this.playerInfo&&(this.playerInfo.nameChanged.remove(this._nameChanged,this),this.playerInfo.headUrlChanged.remove(this._headChanged,this),this.playerInfo.pointChanged.remove(this._onMoneyChanged,this)),this.seatData.userChanged.remove(this._userChange,this),this.seatData=null,this.playerInfo=null},e}();__reflect(SeatData.prototype,"SeatData");var game;!function(e){var t=function(){function t(){}return t.getSameGroupOffset=function(){return this.curSameGroupNo>2&&(this.curSameGroupNo=0),this.sameGroupOffset[this.curSameGroupNo++]},Object.defineProperty(t,"SeatPositonList",{get:function(){return this.m_seatPositonList=[new egret.Point(300,620),new egret.Point(980,620),new egret.Point(300,100),new egret.Point(980,100)],this.m_seatPositonList},enumerable:!0,configurable:!0}),t.updataStageSize=function(){uniLib.ZQGameSdk.getNativeWH&&uniLib.ZQGameSdk.getNativeWH(function(e){if(null==e)egret.MainContext.instance.stage.setContentSize(1280,720);else if(e.cmd&&e.cmd==uniLib.ZQGameSdk.NATIVE_WIDTH_HEIGHT&&null!=e.code&&0==e.code){var t=null!=e.data&&null!=e.data.width?e.data.width:null,i=null!=e.data&&null!=e.data.height?e.data.height:null;null!=t&&null!=i&&t/i>=2?egret.MainContext.instance.stage.setContentSize(1440,720):egret.MainContext.instance.stage.setContentSize(1280,720)}else egret.MainContext.instance.stage.setContentSize(1280,720)})},t.GetClientNoBySeatId=function(t){var i=e.PokerFunction.MainSeatId;return 3>i?t:4==t?1:3==t?2:2==t?3:1==t?4:t},t.GetSeatPositionBySeatId=function(e){var i=t.SeatPositonList[e-1];return i},t.GetSeatPositionByClientNo=function(e){var i=t.SeatPositonList[e-1];return i},t.ResGroup_BY="buyu_preload",t.curSameGroupNo=0,t.sameGroupOffset=[{offsetX:0,offsetY:0},{offsetX:-210,offsetY:-105},{offsetX:-210,offsetY:105}],t}();e.GameConstant=t,__reflect(t.prototype,"game.GameConstant")}(game||(game={}));var FishingJoy;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return t||console.assert(!1,"请使用Collider.creat方法！"),i}return __extends(t,e),t.creat=function(e,i,n){var a=Pool.getItemByCreateFun(Pool.collider,Handler.create(this,function(){return new t(new ColliderExecutant)},null,!0));return a.setTo(e,i,n),a},t.prototype.setTo=function(e,t,i){this.radius=i,this.x=e,this.y=t,this.posX=e,this.posY=t,uniLib.BrowersUtils.GetRequest("collider")&&(this.graphics.beginFill(ColorUtil.COLOR_GREEN,.3),this.graphics.drawCircle(0,0,i),this.graphics.endFill())},t.prototype.setParent=function(e){e.addChild(this),this.host=e},t.prototype.clear=function(){this.graphics.clear(),this.posX=0/0,this.posY=0/0,this.radius=0/0,this.host=null},t.prototype.setGlobePos=function(){var e=this.localToGlobal(0,0,this.globePosPoint);if(Master.instance.isRotation){var t=manager.LayerManager.instance.getLayer(2);t.localToGlobal(e.x,e.y,e)}this.globePosPoint=e},t.isIntersect=function(e,t){var i=e.globePosPoint,n=t.globePosPoint,a=i.x-n.x,o=i.y-n.y,r=e.radius+t.radius;if(a>r||-r>a||o>r||-r>o)return!1;var s=a*a+o*o;return r*r>s?!0:!1},t.prototype.recover=function(){this.clear(),this.globePosPoint=null,Pool.recover(Pool.collider,this)},t.multiplexPoint=[new egret.Point,new egret.Point],t}(egret.Shape);e.Collider=t,__reflect(t.prototype,"FishingJoy.Collider",["gameObject.ICollider"])}(FishingJoy||(FishingJoy={}));var ColliderExecutant=function(){function e(){}return e}();__reflect(ColliderExecutant.prototype,"ColliderExecutant");var FishingJoy;!function(e){var t=function(){function t(){this.inViewFishes=new Dictionary,this.inViewBullets=new Dictionary,this.allBattery=new SimpleMap,this.masterBattery=null,this.hitFishList=[],this.eachHeapOfGoldCoinsData=[[],[],[],[]],this.numberOfGoldCoins=[0,0,0,0],this.goldCoinRemovalTime=[[],[],[],[]],this.dataStorage=[[],[],[],[]],this.medalStorage=[[],[],[],[]]}return t.prototype._removeBulletInMap=function(e){!this.inViewBullets.remove(e)},t.prototype._removeFishInMap=function(e){this.inViewFishes.remove(e)||console.assert(!1,"不存在该鱼！")},t.prototype._addFishInMap=function(e,t){this.inViewFishes.isExist(e)?console.assert(!1,"已经存在该鱼！"):this.inViewFishes.set(e,t)},t.prototype._addBulletInMap=function(e,t){this.inViewBullets.isExist(e)?console.assert(!1,"已经存在该子弹！"):this.inViewBullets.set(e,t)},Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.initFishingJoyLogic=function(){e.NineGridSplitScreenTool.initValue(),EventManager.registerEvent(3,Handler.create(this,this._removeBulletInMap)),EventManager.registerEvent(5,Handler.create(this,this._removeFishInMap)),EventManager.registerEvent(4,Handler.create(this,this._addBulletInMap)),EventManager.registerEvent(6,Handler.create(this,this._addFishInMap)),EventManager.registerEvent(7,Handler.create(this,this._addBatteryInMap)),EventManager.registerEvent(8,Handler.create(this,this._removeBatteryInMap)),EventManager.registerEvent(16,Handler.create(this,this._draEffComplete)),EventManager.registerEvent(15,Handler.create(this,this._merEffComplete)),game.Action.deadFishEvent.add(this._deadFishCmd,this),game.Action.spawnFishEvent.add(this._spawnFishEvent,this),game.Action.changeSceneEvent.add(this.changeScene,this),GX.PokerEvent.Instance.roomDataUpdateEvent.add(this._roomDataUpdateEvent,this),game.Action.sendBulletEvent.add(this._firBullet,this),Laya.timer.frameLoop(1,this,this._checkHit),MJLobby.MJLobbyEventListener.getInstance().addEventListener(MJLobby.MahJongLobbyFacadeConsts.USER_INFO_DATA,this.onUserInfoData,this)},t.prototype._merEffComplete=function(e,t,i){this.changeScene(null,null,!0),this.freeAccessToQuotas(e,t,i)},t.prototype._draEffComplete=function(e,t,i){this.changeScene(null,null,!0),this.freeAccessToQuotas(e,t,i)},t.prototype._roomDataUpdateEvent=function(t){var i=this;this.destroyBullets(),this.destroyFishes(),e.DataCenter.instance.sceneId=t.roomData.sceneId,this.changeScene(null,null,!0,!1);var n=new Cmd.SpawnFishCmd_S;n.fishlist=t.roomData.fishlist,this._spawnFishEvent(n,!0);var a=t.roomData.bulletinfo,o=game.GameTime.serverNow();Laya.timer.once(300,this,function(){if(a)for(var e=0,t=a;e<t.length;e++){var n=t[e];o-n.fireTime<4e3&&i._firBullet(n)}});for(var r=game.RoomData.Instance.seatList,s=0,l=r;s<l.length;s++){var h=l[s];h.lockChanged.call(h)}},t.prototype.onUserInfoData=function(){var t=MJLobby.MJLobbyData.getInstance().myBaseInfo;if(null!=t){var i=game.PokerFunction.MainUser;if(null!=i){i.point=t.chips;var n=e.FishingJoyLogic.instance.allBattery.get(uniLib.NetMgr.UID);n&&this.goldCoinRefresh(n)}}},t.prototype.changeScene=function(t,i,n,a){void 0===a&&(a=!0),t&&(e.DataCenter.instance.isSwitchFish=!0,manager.OperationManager.instance.leaveQuickly(),e.DataCenter.instance.sceneId=t.sceneId,EventManager.fireEvent(20));var o="bg"+e.DataCenter.instance.sceneId+"_jpg",r=UICenter.instance.getManager(1e3).getView(e.FishMainSceneView).backGround0,s=UICenter.instance.getManager(1e3).getView(e.FishMainSceneView).backGrounds1,l=UICenter.instance.getManager(1e3).getView(e.FishMainSceneView).sprayGroups;manager.LayerManager.instance.addToLayer(l,8),manager.LayerManager.instance.addToLayer(s,1),s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,s.y=uniLib.Global.screenHeight/2,s.rotation=r.rotation;var h;if(!a)return void(r.source=n?o:"bg"+i+"_jpg");(t||i)&&(h=t?e.DataCenter.instance.sceneId:i);var c=UICenter.instance.getManager(1e3).getView(e.FishMainSceneView).jianbianImages;c.source=t?"jianbian_png":"jianbian1_png",t?(r.x=640,s.x=uniLib.Global.screenWidth+uniLib.Global.screenWidth/2,l.x=uniLib.Global.screenWidth+16,c.x=-90):(r.x=640,s.x=uniLib.Global.screenWidth/2-uniLib.Global.screenWidth,l.x=-uniLib.Global.screenWidth-16,c.x=177),a&&i?(game.SoundHand.Instance.playGoldTide(),game.SoundHand.Instance.playBgMusic()):a&&(game.SoundHand.Instance.playChangeTheSpecialBackground(),game.SoundHand.Instance.playBgMusic()),egret.Tween.removeTweens(r),egret.Tween.removeTweens(s),egret.Tween.removeTweens(l);var u=t?"langbo":"langbo1";l.removeChildren();var p=UIUtil.creatMovieClip(u);l.addChild(p),l.addChild(c),p.y=360,p.gotoAndPlay(1,-1),p.x=t?0:uniLib.Global.screenWidth,s.source=h?"bg"+h+"_jpg":"bg"+e.DataCenter.instance.sceneId+"_jpg",egret.Tween.get(r).to({x:t?-uniLib.Global.screenWidth+640:uniLib.Global.screenWidth+640},1.6*uniLib.Global.screenWidth).call(function(){r.source=h?"bg"+h+"_jpg":"bg"+e.DataCenter.instance.sceneId+"_jpg",r.x=640}),egret.Tween.get(s).to({x:uniLib.Global.screenWidth/2},1.6*uniLib.Global.screenWidth).call(function(){s.x=uniLib.Global.screenWidth,s.source=""}),egret.Tween.get(l).to({x:t?-uniLib.Global.screenWidth-16:uniLib.Global.screenWidth+16},2*(uniLib.Global.screenWidth+16)*1.6).call(function(){p.stop(),l.removeChild(p),manager.LayerManager.instance.removeFromLayer(l),manager.LayerManager.instance.removeFromLayer(s)});var g=new Cmd.GameTimeSyncCmd_CS;game.PokerFunction.tcpSend(g)},t.prototype.freeAccessToQuotas=function(e,t,i){var n=Pool.getItemByClass(Pool.jumpCoinText,eui.BitmapLabel);n.font="coinFont_fish_fnt",UIUtil.traGoldLabel(n),n.text="+"+GX.GoldFormat(i),manager.LayerManager.instance.addToLayer(n,8),n.x=e>uniLib.Global.screenWidth/2?e:e-130,n.y=t>uniLib.Global.screenHeight/2?t-40:t+40,egret.Tween.get(n).to({alpha:0},2e3).call(function(){Pool.recover(Pool.jumpCoinText,n),manager.LayerManager.instance.removeFromLayer(n)})},t.prototype._firBullet=function(t){var i=e.FishingJoyLogic.instance.allBattery.get(t.uid);if(null!=i){if(t.angle=t.angle<0?t.angle+360:t.angle,i){this.goldCoinRefresh(i);var n=void 0;2==i.seatIndex,i.isAimShoot?(n=i.curRotation,this._fire(i,t,n)):(n=t.angle,i.setTweenRotation(n,Handler.create(this,this._fire,[i,t,n],!0)))}t.uid==uniLib.NetMgr.UID&&(null!=t.freeGoldPool&&UICenter.instance.getManager(1e3).getView(e.FishBtnView).updataGoldPoolLabel(t.freeGoldPool,t.normalGoldPool),game.SoundHand.Instance.playLowSpeedGun())}},t.prototype._fire=function(t,i,n){t.sendBulletEffect();var a=Point.create(0,0),o=manager.LayerManager.instance.getLayer(2);t.firePoint.localToGlobal(0,0,a),o.globalToLocal(a.x,a.y,a);var r={};if(r.bornX=a.x,r.bornY=a.y,Point.release(a),r.rotation=n,r.servelID=i.id,Master.instance.uid==i.uid?1==t.fireBulletNum?r.sign=10005:2==t.fireBulletNum?r.sign=10006:3==t.fireBulletNum&&(r.sign=10007):1==t.fireBulletNum?r.sign=1e4:2==t.fireBulletNum?r.sign=10001:3==t.fireBulletNum&&(r.sign=10002),t.isAimShoot){var s=e.FishingJoyLogic.instance.inViewFishes.get(t.targetFishId);r.targetFish=s}r.operation=[{type:t.isAimShoot?2:1,rotation:n,bornTime:t.isAimShoot?i.fireTime:i.fireTime+150}],r.playerUID=i.uid;gameObject.GameObjectFactory.instance.creatGameObject(r.sign,r,4)},t.prototype._deadFishCmd=function(e){if(null!=e.list&&e.list instanceof Array)for(var t=0,i=e.list;t<i.length;t++){var n=i[t];this._deadFish(n)}},t.prototype._deadFish=function(e){game.SoundHand.Instance.playCatch();var t=this.inViewFishes,i=e.list;this.medal(e),this.coinDozer(e);for(var n=0;n<i.length;n++){var a=t.get(i[n].id);if(null!=a){var o=i[n].score;console.info("鱼id:"+a.sign+"鱼金币"+o),a&&a.isAlive&&(1==a.skillID?game.SoundHand.Instance.playCatchAllInOneDraft():3==a.skillID&&game.SoundHand.Instance.playCatchAllInOneDraft1(),a.isAlive=!1,a.unregisterOperation(),a.playDieMov(Handler.create(this,this._recoverFish,[a,e.uid,o,e.bid])))}}var r=this.inViewBullets.get(e.bid);if(r){var s=r.x,l=r.y;gameObject.GameObjectFactory.instance.recoverGameObject(r);var h={};h.bornX=s,h.bornY=l;gameObject.GameObjectFactory.instance.creatGameObject(3e4,h,3)}},t.prototype._recoverFish=function(e,t,i,n){var a=UIUtil.localToGlobal(e),o=a[0],r=a[1];2002!=e.sign&&2001!=e.sign&&this.getGoldCoins(o,r,e.odds,t,i),this._checkSpecialFish(o,r,e,t,i,n),gameObject.GameObjectFactory.instance.recoverGameObject(e)},t.prototype._checkSpecialFish=function(i,n,a,o,r,s){if(1001==a.sign)this.explodingFish(i,n,s,o);else if(2002==a.sign){game.SoundHand.Instance.playMermaidCapture(),this.freePromptCloses();var l={};if(l.bornX=uniLib.Global.screenWidth/2,l.bornY=uniLib.Global.screenHeight/2+50,l.targetBattery=t.instance.allBattery.get(o),!l.targetBattery||!l.targetBattery.user)return;l.score=r,l.targetBattery&&(l.playerNickName=l.targetBattery.user.nickName,gameObject.GameObjectFactory.instance.creatGameObject(40001,l,9))}else if(2001==a.sign){game.SoundHand.Instance.playGoldenDragonCapture(),this.freePromptCloses();var l={};l.bornX=uniLib.Global.screenWidth/2,l.bornY=uniLib.Global.screenHeight/2+50,l.score=r;e.FishingJoyLogic.instance.allBattery.get(o);if(l.targetBattery=t.instance.allBattery.get(o),!l.targetBattery||!l.targetBattery.user)return;l.targetBattery&&(l.playerNickName=l.targetBattery.user.nickName,gameObject.GameObjectFactory.instance.creatGameObject(40002,l,9))}},t.prototype.explodingFish=function(e,t,i,n){var a=UIUtil.creatMovieClip("Bomb");a.y=t,a.x=e,game.SoundHand.Instance.playBlast(),a.gotoAndPlay(1,1),manager.LayerManager.instance.addToLayer(a,8);var o=function(){manager.LayerManager.instance.removeFromLayer(a)};a.once(egret.Event.COMPLETE,o,null),this._checkBoomHit(e,t,i,n)},t.prototype.getGoldCoins=function(e,t,i,n,a){var o=this,r=this.allBattery.get(n);if(null!=r&&null!=r.user){var s=UIUtil.localToGlobal(r.coinImg),l=s[0],h=s[1];game.SoundHand.Instance.playGoldCoin();var c,u=game.GameConstant.SeatPositonList[game.GameConstant.GetClientNoBySeatId(r.seatdata.seatId)-1];game.GameConstant.GetClientNoBySeatId(r.seatdata.seatId);c=i>10?(i-i%10)/10:1;var p,g=e-c/2*45,d=t,f=GX.getDistanceByPoint({x:g,y:d},{x:u.x,y:u.y});r.user&&(r.user.uid==Master.instance.uid?(p=Pool.getItemByClass(Pool.jumpCoinText,eui.BitmapLabel),p.font="coinFont_fish_fnt",UIUtil.traGoldLabel(p)):(p=Pool.getItemByClass(Pool.jumpCoinTexts,eui.BitmapLabel),p.font="coinFont_fishS_fnt")),p.text="+"+GX.GoldFormat(a),manager.LayerManager.instance.addToLayer(p,8),p.x=g-p.textWidth/2,p.y=d-25;for(var _=function(){var e;r.user&&(e=r.user.uid==Master.instance.uid?Pool.getItemByCreateFun(Pool.jinbi,Handler.create(UIUtil,UIUtil.creatMovieClip,["jinbi_fish"])):Pool.getItemByCreateFun(Pool.yingbi,Handler.create(UIUtil,UIUtil.creatMovieClip,["yinbi_fish"]))),e.y=d,e.x=g+45*y,e.gotoAndPlay(1,-1),manager.LayerManager.instance.addToLayer(e,8),egret.Tween.get(e).to({y:e.y-50},200).call(function(){egret.Tween.get(e).to({y:e.y+80},500,egret.Ease.backInOut).call(function(){egret.Tween.get(e).to({y:e.y-10},100).call(function(){egret.Tween.get(e).to({x:l,y:h},f).call(function(){o.goldCoinRefresh(r),r.user&&(r.user.uid==Master.instance.uid?Pool.recover(Pool.jinbi,e):Pool.recover(Pool.yingbi,e)),manager.LayerManager.instance.removeFromLayer(e)})})})})},y=0;c>y;++y)_();Laya.timer.once(1e3,this,function(){manager.LayerManager.instance.removeFromLayer(p),r.user&&(r.user.uid==Master.instance.uid?Pool.recover(Pool.jumpCoinText,p):Pool.recover(Pool.jumpCoinTexts,p))})}},t.prototype.goldCoinRefresh=function(e){e.goldCoinRefresh()},t.prototype.coinDozer=function(e,t){var i,n,a=this,o=0;if(e&&(i=e),n=e?this.allBattery.get(e.uid):t,null!=n&&n.seatdata){var r=n.seatdata.seatId,s=r-1;if(this.eachHeapOfGoldCoinsData[s].length>=3&&e)return this.dataStorage[s].push(e),void(1==this.dataStorage[s].length&&this.coinDozer(null,n));if(null==e){if(0==this.dataStorage[s].length)return;i=this.dataStorage[s][0]}for(var l=game.GameConstant.SeatPositonList[game.GameConstant.GetClientNoBySeatId(r)-1],h=0,c=0;c<i.list.length;c++){this.inViewFishes.get(i.list[c].id);h+=i.list[c].score}o=h/Number(n._costMoneyTF.text);var u=0,p=new eui.Group;if(p.touchEnabled=!1,0!=this.numberOfGoldCoins[s]){var g=this.numberOfGoldCoins[s];this.numberOfGoldCoins[s]>=3&&(this.numberOfGoldCoins[s]=3),p.x=l.x>uniLib.Global.screenWidth/2?760*uniLib.Global.screenWidth/1280-35*(3>g?g:2):460*uniLib.Global.screenWidth/1280+35*(3>g?g:2),3==this.numberOfGoldCoins[s]&&(this.eachHeapOfGoldCoinsData[s][0]&&this.goldCoinPush(n,0),this.eachHeapOfGoldCoinsData[s][1]&&this.goldCoinPush(n,1),this.eachHeapOfGoldCoinsData[s][2]&&this.goldCoinPush(n,2,!1,p,o,h))}else p.x=l.x>uniLib.Global.screenWidth/2?760*uniLib.Global.screenWidth/1280:460*uniLib.Global.screenWidth/1280;if(p.y=l.y>uniLib.Global.screenHeight/2?553:-7,manager.LayerManager.instance.addToLayer(p,8),this.numberOfGoldCoins[s]<3){for(var d=0;(o>20?20:o)>d;d++)game.Timer.setTimeout(function(){var e=Pool.getItemByClass("coinDozerImage",eui.Image);e.source="batteryBase8",e.scaleX=.85,e.scaleY=.85,e.x=0,e.y=l.y>uniLib.Global.screenHeight/2?160+u:8-u,e.touchEnabled=!1,u-=6.8,p.addChild(e)},this,10*d);var f=new eui.BitmapLabel;f.font="coinFont_fish_fnt",UIUtil.traGoldLabel(f),f.touchEnabled=!1,f.text=""+GX.GoldFormat(h),p.addChild(f),f.anchorOffsetX=f.width/2,f.anchorOffsetY=f.height/2,f.scaleX=.3,f.scaleY=.3,f.x=12.75,f.y=l.y>uniLib.Global.screenHeight/2?150+-6.8*((o>20?20:o)-1):16- -6.8*((o>20?20:o)-1)+10}this.eachHeapOfGoldCoinsData[s].push(p),this.numberOfGoldCoins[s]+=1,this.goldCoinRemovalTime[s][0]&&(game.Timer.clearTimeout(this.goldCoinRemovalTime[s][0]),this.goldCoinRemovalTime[s]=[]);var _=n,y=game.Timer.setTimeout(function(){a.goldCoinAutomaticallyRemoved(_)},this,4e3);this.goldCoinRemovalTime[s].push(y)}},t.prototype.goldCoinAutomaticallyRemoved=function(e){var t=this;if(e.seatdata){var i=e.seatdata.seatId,n=i-1;if(this.goldCoinRemovalTime[n][0]&&(game.Timer.clearTimeout(this.goldCoinRemovalTime[n][0]),this.goldCoinRemovalTime[n]=[]),this.eachHeapOfGoldCoinsData[n][0]&&this.goldCoinPush(e,0),this.eachHeapOfGoldCoinsData[n][1]&&this.goldCoinPush(e,1),this.eachHeapOfGoldCoinsData[n][2]&&this.goldCoinPush(e,2,!0),this.eachHeapOfGoldCoinsData[n].removeAt(0),this.numberOfGoldCoins[n]=this.eachHeapOfGoldCoinsData[n].length,this.eachHeapOfGoldCoinsData[n][0]){var a=game.Timer.setTimeout(function(){t.goldCoinAutomaticallyRemoved(e)},this,4e3);this.goldCoinRemovalTime[n].push(a)}}},t.prototype.goldCoinPush=function(e,t,i,n,a,o){var r=this,s=game.GameConstant.SeatPositonList[game.GameConstant.GetClientNoBySeatId(e.seatdata.seatId)-1],l=0;return 0==t?void manager.LayerManager.instance.removeFromLayer(this.eachHeapOfGoldCoinsData[e.seatdata.seatId-1][0]):void egret.Tween.get(this.eachHeapOfGoldCoinsData[e.seatdata.seatId-1][t]).to({x:s.x>uniLib.Global.screenWidth/2?this.eachHeapOfGoldCoinsData[e.seatdata.seatId-1][t].x+35:this.eachHeapOfGoldCoinsData[e.seatdata.seatId-1][t].x+-35},300).call(function(){if(n){for(var t=0;(a>20?20:a)>t;t++)game.Timer.setTimeout(function(){var e=Pool.getItemByClass("coinDozerImage",eui.Image);e.source="batteryBase8",e.scaleX=.85,e.scaleY=.85,e.x=0,e.y=s.y>uniLib.Global.screenHeight/2?160+l:8-l,l-=6.8,n.addChild(e)},r,10*t);var i=new eui.BitmapLabel;i.font="coinFont_fish_fnt",i.text=""+GX.GoldFormat(o),UIUtil.traGoldLabel(i),n.addChild(i),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.scaleX=.3,i.scaleY=.3,i.x=12.75,i.y=s.y>uniLib.Global.screenHeight/2?150+-6.8*((a>20?20:a)-1):16- -6.8*((a>20?20:a)-1)+10,r.numberOfGoldCoins[e.seatdata.seatId-1]=3,r.eachHeapOfGoldCoinsData[e.seatdata.seatId-1].removeAt(0),0!=r.dataStorage[e.seatdata.seatId-1].length&&(r.dataStorage[e.seatdata.seatId-1].removeAt(0),r.coinDozer(null,e))}})},t.prototype.removeTheGoldCoinHeap=function(e){this.numberOfGoldCoins[e.seatId-1]=0;for(var t=0;t<this.eachHeapOfGoldCoinsData[e.seatId-1].length;++t)manager.LayerManager.instance.removeFromLayer(this.eachHeapOfGoldCoinsData[e.seatId-1][t]);this.eachHeapOfGoldCoinsData[e.seatId-1]=[],this.dataStorage[e.seatId-1]=[],this.goldCoinRemovalTime[e.seatId-1][0]&&(game.Timer.clearTimeout(this.goldCoinRemovalTime[e.seatId-1][0]),this.goldCoinRemovalTime[e.seatId-1]=[])},t.prototype.tweenAnimation=function(e,t,i,n,a,o,r){var s=n.y>uniLib.Global.screenHeight/2?-120:120,l=n.x>uniLib.Global.screenWidth/2?-50:50;return i.source=a,manager.LayerManager.instance.addToLayer(i,8),i.anchorOffsetX=e,i.anchorOffsetY=e,i.scaleX=t,i.scaleY=t,i.x=n.x+l,i.y=n.y+s,r&&egret.Tween.get(i).to({rotation:o?360:-360},2e3),i},t.prototype.createMedalResources=function(e){var t=new CustomImage,i=new CustomImage,n=new CustomImage,a=new CustomImage,o=UIUtil.creatMovieClip("deng"),r=UIUtil.creatMovieClip("Medal1_jewel"),s=UIUtil.creatMovieClip("Medal2_jewel"),l=UIUtil.creatMovieClip("Medal3_jewel"),h=new eui.BitmapLabel;this.medalStorage[e].push(t,i,n,a,h,[o,r,s,l])},t.prototype.medal=function(t){for(var i=0,n=0,a=0,o=0;o<t.list.length;o++){var r=this.inViewFishes.get(t.list[o].id);r&&r.isAlive&&(i+=t.list[o].score,n+=r.odds,r.skillID&&1==r.skillID&&(a=r.skillID))}if(t.uid==uniLib.NetMgr.UID&&i>e.DataCenter.instance.noticeTriggers){var s=new Cmd.ClientSettleFinishCmd_C;game.PokerFunction.tcpSend(s)}var l,h=e.DataCenter.instance.getRuleConfigList();if(!(n<h[0].medalGrades[0]&&1!=a)){n>=h[0].medalGrades[0]&&n<h[0].medalGrades[1]?l=1:n>=h[0].medalGrades[1]&&n<h[0].medalGrades[2]?l=2:n>=h[0].medalGrades[2]&&(l=3);var c=this.allBattery.get(t.uid);if(null!=c&&null!=c.seatdata){var u=c.seatdata.seatId,p=game.GameConstant.GetClientNoBySeatId(u);this.scavengingMedals(u-1);var g,d,f,_,y,m,v=game.GameConstant.SeatPositonList[p-1],b=v.y>uniLib.Global.screenHeight/2?-120:120,C=v.x>uniLib.Global.screenWidth/2?-50:50,T=250/284*.9;game.SoundHand.Instance.playMedalAppearance(),(0!=GX.GameLayerManager.sceneLayer.parent.x||0!=GX.GameLayerManager.sceneLayer.parent.y)&&(GX.GameLayerManager.sceneLayer.parent.x=0,GX.GameLayerManager.sceneLayer.parent.y=0);
var O=this.medalStorage[u-1];if(0==O.length&&this.createMedalResources(u-1),a)g=this.tweenAnimation(142,T,O[0],v,"down",!0,!0),d=this.tweenAnimation(106,T,O[1],v,"middle",!1,!0),f=this.tweenAnimation(125.5,T,O[2],v,"up",!0,!0),_=O[5][0],_.touchEnabled=!1,_.y=v.y+b,_.x=v.x+C,_.scaleX=T,_.scaleY=T,_.gotoAndPlay(1,1),manager.LayerManager.instance.addToLayer(_,8),m=O[3],m.source="catchAllInOneDraft",manager.LayerManager.instance.addToLayer(m,8),m.anchorOffsetX=m.width/2,m.anchorOffsetY=m.height/2,m.x=v.x+C,m.y=v.y+b-30,m.scaleX=v.y>uniLib.Global.screenHeight/2?1:-1,m.scaleY=v.y>uniLib.Global.screenHeight/2?1:-1;else{var M=1==l?97:101,I=1==l?118:2==l?125:137.5;g=this.tweenAnimation(M,.9,O[0],v,"Medal_ middle"+l,!0),d=this.tweenAnimation(I,.9,O[1],v,"Medal_BG"+l,!0,!0),_=O[5][l],_.scaleX=.9,_.scaleY=.9,_.touchEnabled=!1,_.y=v.y+b,_.x=v.x+C,_.gotoAndPlay(1,2),manager.LayerManager.instance.addToLayer(_,8)}y=O[4],y.font="multipleFnt_fnt",y.text=n,console.log("????"+n),manager.LayerManager.instance.addToLayer(y,8),y.x=v.x+C,y.y=m?v.y+b+30:v.y+b,y.anchorOffsetX=y.width/2,y.anchorOffsetY=y.height/2,y.scaleX=v.y>uniLib.Global.screenHeight/2?1.1:-1.1,y.scaleY=v.y>uniLib.Global.screenHeight/2?1.1:-1.1,this.labelJitter(y,!0),m&&this.labelJitter(m,!0);var L=function(){_.removeEventListener(egret.Event.COMPLETE,L,null);for(var t=0,i=e.FishingJoyLogic.instance.medalStorage[u-1];t<i.length;t++){var n=i[t];egret.Tween.removeTweens(n),manager.LayerManager.instance.removeFromLayer(n)}for(var a=0,o=e.FishingJoyLogic.instance.medalStorage[u-1][5];a<o.length;a++){var n=o[a];egret.Tween.removeTweens(n),manager.LayerManager.instance.removeFromLayer(n)}};_.addEventListener(egret.MovieClipEvent.COMPLETE,L,null)}}},t.prototype.scavengingMedals=function(t){if(0!=this.medalStorage[t].length){for(var i=0,n=e.FishingJoyLogic.instance.medalStorage[t];i<n.length;i++){var a=n[i];egret.Tween.removeTweens(a),manager.LayerManager.instance.removeFromLayer(a)}for(var o=0,r=e.FishingJoyLogic.instance.medalStorage[t][5];o<r.length;o++){var a=r[o];egret.Tween.removeTweens(a),manager.LayerManager.instance.removeFromLayer(a)}}},t.prototype.labelJitter=function(e,t){var i=this;e&&egret.Tween.get(e).to({rotation:t?13:-13},500,egret.Ease.backOut).call(function(){i.labelJitter(e,!t)})},t.prototype.onFreeGame=function(e,t){var i=this;game.SoundHand.Instance.playAlert(),t||(null!=this.winAnim0&&(egret.Tween.removeTweens(this.winAnim0),egret.Tween.removeTweens(this.outOfTheField),manager.LayerManager.instance.removeFromLayer(this.winAnim0),null==this.winAnim0),this.winAnim0=UIUtil.creatMovieClip("appearanceOfLight"),this.winAnim0.blendMode=egret.BlendMode.ADD,this.winAnim0.y=uniLib.Global.screenHeight/2,this.winAnim0.x=uniLib.Global.screenWidth/2,this.winAnim0.scaleX=4*uniLib.Global.screenWidth/1280,this.winAnim0.scaleY=4*uniLib.Global.screenHeight/720,manager.LayerManager.instance.addToLayer(this.winAnim0,8),this.winAnim0.frameRate=10,this.winAnim0.gotoAndPlay(1,4),this.winAnim0.addEventListener(egret.Event.COMPLETE,this.animationConcealment,this)),this.outOfTheField||(this.outOfTheField=new eui.Image,this.outOfTheField.visible=!1),manager.LayerManager.instance.addToLayer(this.outOfTheField,8),this.outOfTheField.source="freeOutOfTheField"+e,this.outOfTheField.alpha=1,this.outOfTheField.anchorOffsetX=this.outOfTheField.width/2,this.outOfTheField.anchorOffsetY=this.outOfTheField.height/2,this.outOfTheField.visible=!0,this.outOfTheField.scaleX=.8,this.outOfTheField.scaleY=.8,this.outOfTheField.x=0-this.outOfTheField.width/2,this.outOfTheField.y=uniLib.Global.screenHeight/2,egret.Tween.get(this.outOfTheField).to({x:uniLib.Global.screenWidth/2},500,egret.Ease.backOut).call(function(){t&&i.animationConcealment(1)})},t.prototype.freePromptCloses=function(){this.outOfTheField&&(this.outOfTheField.visible=!1,this.outOfTheField.x=0-this.outOfTheField.width/2)},t.prototype.animationConcealment=function(e){var t=this;if(1!=e)egret.Tween.get(this.winAnim0).to({alpha:0},1e3).call(function(){null!=t.winAnim0&&(manager.LayerManager.instance.removeFromLayer(t.winAnim0),null==t.winAnim0)}),egret.Tween.get(this.outOfTheField).to({alpha:.5,scaleX:1.5,scaleY:1.5},300).call(function(){egret.Tween.get(t.outOfTheField).to({alpha:0,scaleX:.5,scaleY:.5},700).call(function(){t.outOfTheField.visible=!1,t.outOfTheField.x=0-t.outOfTheField.width/2,t.freeType&&(t.changeScene(null,t.freeType,null,!0),t.freeType=null)})});else{if(!this.outOfTheField.visible)return;egret.Tween.get(this.outOfTheField).to({scaleX:1.1,scaleY:1.1},600).call(function(){egret.Tween.get(t.outOfTheField).to({scaleX:.8,scaleY:.8},700).call(function(){t.animationConcealment(1)})})}},t.prototype.animationConcealments=function(){this.winAnim1.removeEventListener(egret.Event.COMPLETE,this.animationConcealments,this);var t=UICenter.instance.getManager(1e3).getView(e.FishMainSceneView);t.removeChild(this.winAnim1),this.winAnim1=null},t.prototype._spawnFishEvent=function(t,i){void 0===i&&(i=!1),e.DataCenter.instance.isSwitchFish=!1;var n=t.fishlist,a=0;if(null!=n&&n instanceof Array)for(var o=0,r=n;o<r.length;o++){var s=r[o];if(null!=s.spawnTime)for(var l=0,h=s.fishs;l<h.length;l++){var c=h[l],u=gameObject.GameObjectConfigParse.configDic.get(c.templateId),p=u.table;if(p){var g=table.TableFishPath.getFishPath(s.pathId);if(null==g)return;if(2001==p.sign?(a=p.spawnTimeout,i?this.changeScene(null,100029,null,!1):(this.freeType=100029,this.onFreeGame(1))):2002==p.sign&&(a=p.spawnTimeout,i?this.changeScene(null,100030,null,!1):(this.freeType=100030,this.onFreeGame(3))),c.skill==Cmd.FishSkillType.SameGroup){var d=game.GameConstant.getSameGroupOffset();c.offsetX=d.offsetX,c.offsetY=d.offsetY}var f={};f.serveID=c.id,f.pathId=s.pathId.toString(),f.skillID=c.skill,f.offsetX=c.offsetX,f.offsetY=c.offsetY,f.reconnection=i,f.spawnTime=s.spawnTime+a,f.operation=[{type:4}];var _=gameObject.GameObjectFactory.instance.creatGameObject(c.templateId,f,2);_.name="path："+s.pathId.toString(),(2002==_.sign||2001==_.sign)&&EventManager.fireEvent(18,[_,!0])}else console.assert(!1,"鱼模板id为"+c.templateId+"这找不到配置")}else console.error("服务器未下发spawnTime")}},t.prototype._checkHit=function(){this.hitFishList.clear();var t=this.inViewBullets,i=t.length,n=this.inViewFishes,a=n.length;if(0!=i&&0!=a){for(var o=new Dictionary,r=new Dictionary,s=0;i>s;s++){var l=t.values[s];if(l&&l.isInView){for(var h=l.colliderAry,c=0;c<h.length;c++)h[c].setGlobePos();e.NineGridSplitScreenTool.setGridIndex(l,r)}}for(s=0;a>s;s++){var u=n.values[s];if(this._checkFishCanCollider(u)){for(var p=u.colliderAry,c=0;c<p.length;c++)p[c].setGlobePos();e.NineGridSplitScreenTool.setGridIndex(u,o)}}for(var g=[],d=1;10>d;d++){var f=o.get(d),_=r.get(d);if(_)for(var y=_.length,m=0;y>m;m++){var l=_[m],v=l.targetFish;if(this._checkFishCanCollider(v))this._chectBulletHit(l,v,o)&&g.push(l);else if(f)for(var b=f.length,C=0;b>C;C++){var u=f[C];if(this._chectBulletHit(l,u,o)){g.push(l);break}}}}for(var T=0,O=g;T<O.length;T++){var M=O[T];gameObject.GameObjectFactory.instance.recoverGameObject(M)}if(this.hitFishList.length>0){var I=new Cmd.HitFishCmd_CS;I.list=this.hitFishList,game.PokerFunction.tcpSend(I)}}},t.prototype._checkFishCanCollider=function(e){return e&&e.isAlive&&e.isInView?!0:!1},t.prototype._chectBulletHit=function(t,i,n){for(var a=t.colliderAry,o=i.colliderAry,r=o.length,s=0;s<a.length;s++)for(var l=0;r>l;l++)if(e.Collider.isIntersect(a[s],o[l])){t.isCollided=!0;var h=t.x,c=t.y,u=t.servelID,p=t.playerID,g=t.rotation;return this._checkFishingNetHit(h,c,g,u,p,n,i),!0}return!1},t.prototype._checkFishingNetHit=function(t,i,n,a,o,r,s){var l=this.allBattery.get(o);if(l){var h={};h.bornX=t,h.bornY=i,h.rotation=n,h.radius=l.fishNetRadius;var c=null;o==Master.instance.uid?(c=gameObject.GameObjectFactory.instance.creatGameObject(30005,h,3),game.SoundHand.Instance.playOpenFishingNet(),s.playHitEff(o)):c=gameObject.GameObjectFactory.instance.creatGameObject(3e4,h,3);var u=game.PokerFunction.GetUserInfoByUid(o);if(u&&(u.isRobot||o==Master.instance.uid)){var p=[],g=new Cmd.Fish;g.id=s.servelID,p.push(g);for(var d=c.colliderAry,f=0;f<d.length;f++)d[f].setGlobePos();e.NineGridSplitScreenTool.analyseGrid(c);for(var _=!1,y=0;y<c.grid.length;y++){var m=r.get(c.grid[y]);if(m)for(var v=m.length,b=0;v>b;b++){var C=m[b];if(C.servelID!=s.servelID){_=!1;for(var T=C.colliderAry,O=T.length,M=0;O>M&&!_;M++)for(var I=0;I<d.length;I++)if(e.Collider.isIntersect(d[I],T[M])){_=!0,C.playHitEff(o);var L=new Cmd.Fish;L.id=C.servelID,p.push(L);break}}}this._sendMsg(p,a,o)}}}},t.prototype._checkBoomHit=function(t,i,n,a){var o={};o.bornX=t,o.bornY=i;for(var r=gameObject.GameObjectFactory.instance.creatGameObject(4e4,o,8),s=r.colliderAry,l=0;l<s.length;l++)s[l].setGlobePos();var h,c=this.inViewFishes,u=c.length,p=!1,g=[];for(h=0;u>h;h++){var d=c.values[h];if(this._checkFishCanCollider(d)){for(var f=d.colliderAry,_=0;_<f.length;_++)f[_].setGlobePos();if(d.isCollided)continue;p=!1;for(var y=0;y<s.length&&!p;y++)for(var m=0;m<f.length;m++)if(e.Collider.isIntersect(s[y],f[m])){p=!0,d.isCollided=!0,d.playHitEff(Master.instance.uid,2e3,!0);var v=new Cmd.Fish;v.id=d.servelID,g.push(v);break}}}0!=g.length&&this._sendMsg(g,n,a,!0)},t.prototype._sendMsg=function(e,t,i,n){var a=new Cmd.HitFish;a.list=e,a.bid=t,a.list=e,a.uid=i,n&&(a.hitType=1),this.hitFishList.push(a)},t.prototype._addBatteryInMap=function(e,t){this.allBattery.length<=4?this.allBattery.isExist(e)?console.assert(!1,"玩家已经存在！"):this.allBattery.set(e,t):console.assert(!1,"座位已满！")},t.prototype._removeBatteryInMap=function(e){this.allBattery.remove(e)||console.assert(!1,"玩家不存在！")},t.prototype.dispose=function(){Laya.timer.clear(this,this._checkHit),EventManager.unregisterEvent(3,this,this._removeBulletInMap),EventManager.unregisterEvent(5,this,this._removeFishInMap),EventManager.unregisterEvent(4,this,this._addBulletInMap),EventManager.unregisterEvent(6,this,this._addFishInMap),EventManager.unregisterEvent(7,this,this._addBatteryInMap),EventManager.unregisterEvent(8,this,this._removeBatteryInMap),EventManager.unregisterEvent(16,this,this._draEffComplete),EventManager.unregisterEvent(15,this,this._merEffComplete),game.Action.spawnFishEvent.remove(this._spawnFishEvent,this),this.destroyBattery(),this.destroyFishes(),this.inViewFishes.clear(),this.allBattery.clear(),this.masterBattery=null},t.prototype.destroyBattery=function(){for(var e=this.allBattery.copy(),t=e.length,i=0;t>i;i++){var n=e.getByKeyIndex(i);gameObject.GameObjectFactory.instance.recoverGameObject(n)}e.recover()},t.prototype.destroyFishes=function(){for(var e=this.inViewFishes.copy(),t=e.length,i=0;t>i;i++){var n=e.values[i];gameObject.GameObjectFactory.instance.recoverGameObject(n)}},t.prototype.destroyBullets=function(){for(var e=this.inViewBullets.copy(),t=e.length,i=0;t>i;i++){var n=e.values[i];gameObject.GameObjectFactory.instance.recoverGameObject(n)}},t.prototype.findMostValuableFish=function(){for(var e=[],t=0;t<this.allBattery.length;t++){var i=this.allBattery.getByKeyIndex(t);if(i&&i.user.uid!=Master.instance.uid&&-1!=i.targetFishId){var n=this.inViewFishes.get(i.targetFishId);this._checkFishCanCollider(n)&&e.push(n)}}for(var a,o=this.inViewFishes,r=null,s=0,l=!1,h=[-1,-1],c=h[0],u=h[1],t=o.length-1;t>=0&&!l;t--)if(a=o.values[t],this._checkFishCanCollider(a))if(a.isAccurateCollider)for(var p=0;p<a.colliderAry.length;p++){var g=a.colliderAry[p];if(f=UIUtil.localToGlobal(g),c=f[0],u=f[1],UIUtil.inAimView(c,u)){if(2001==a.sign||2002==a.sign)return a;-1==e.indexOf(a)&&(r=a,s=t,l=!0);break}}else if(_=UIUtil.localToGlobal(a),c=_[0],u=_[1],-1==e.indexOf(a)&&UIUtil.inAimView(c,u)){r=a,s=t;break}if(null!=r){for(var d=s-1;d>=0;d--)if(a=o.values[d],this._checkFishCanCollider(a))if(a.isAccurateCollider)for(var p=0;p<a.colliderAry.length;p++){var g=a.colliderAry[p];if(y=UIUtil.localToGlobal(g),c=y[0],u=y[1],UIUtil.inAimView(c,u)){if(2001==a.sign||2002==a.sign)return a;-1==e.indexOf(a)&&r.odds<a.odds&&(r=a);break}}else m=UIUtil.localToGlobal(a),c=m[0],u=m[1],-1==e.indexOf(a)&&UIUtil.inAimView(c,u)&&r.odds<a.odds&&(r=a)}else e.length>0&&(r=e[0]);return r;var f,_,y,m},t._instance=null,t}();e.FishingJoyLogic=t,__reflect(t.prototype,"FishingJoy.FishingJoyLogic")}(FishingJoy||(FishingJoy={}));var GlobeVars=function(){function e(){}return e.AimSpcialFish=!1,e}();__reflect(GlobeVars.prototype,"GlobeVars");var Point=egret.Point,FishingJoy;!function(e){var t=function(){function e(){this.pic=new egret.Shape}return e.initValue=function(){var e=(uniLib.Global.screenWidth+200)/3,t=(uniLib.Global.screenHeight+200)/3;this.firstLineX=-100+e,this.firstLineY=-100+t,this.secondLineX=-100+2*e,this.secondLineY=-100+2*t},e.setGridIndex=function(e,t){if(e.clearGridIndex(),e.isAccurateCollider)for(var i=e.colliderAry.length,n=0;i>n;n++){var a=e.colliderAry[n];this.analyseGridMap(a.globePosPoint.x,a.globePosPoint.y,e,t)}else this.analyseGridMap(e.x,e.y,e,t)},e.writeInMap=function(e,t,i){var n=i.get(e);null==n&&(n=new Array,i.set(e,n)),-1==n.indexOf(t)&&n.push(t)},e.analyseGrid=function(e){var t=this.firstLineX,i=this.secondLineX,n=this.firstLineY,a=this.secondLineY,o=e.x,r=e.y;UIUtil.inBorder(o,r)&&(n>r?t>o?e.pushGridIndex(1):o>=t&&i>o?e.pushGridIndex(2):o>=i&&e.pushGridIndex(3):a>r&&r>=n?t>o?e.pushGridIndex(4):o>=t&&i>o?e.pushGridIndex(5):o>=i&&e.pushGridIndex(6):t>o?e.pushGridIndex(7):o>=t&&i>o?e.pushGridIndex(8):o>=i&&e.pushGridIndex(9))},e.analyseGridMap=function(e,t,i,n){var a=this.firstLineX,o=this.secondLineX,r=this.firstLineY,s=this.secondLineY;UIUtil.inBorder(e,t)&&(r>t?a>e?this.writeInMap(1,i,n):e>=a&&o>e?this.writeInMap(2,i,n):e>=o&&this.writeInMap(3,i,n):s>t&&t>=r?a>e?this.writeInMap(4,i,n):e>=a&&o>e?this.writeInMap(5,i,n):e>=o&&this.writeInMap(6,i,n):a>e?this.writeInMap(7,i,n):e>=a&&o>e?this.writeInMap(8,i,n):e>=o&&this.writeInMap(9,i,n))},e.firstLineX=0,e.secondLineX=0,e.firstLineY=0,e.secondLineY=0,e}();e.NineGridSplitScreenTool=t,__reflect(t.prototype,"FishingJoy.NineGridSplitScreenTool")}(FishingJoy||(FishingJoy={}));var gameObject;!function(e){var t=function(){function e(){EventManager.registerEvent(0,Handler.create(this,this._roomLevelUpdate),1),e.configDic.set(2e4,{asset:{},initOnceData:{}});for(var t=0,i=table.TableBulletConfig.instance();t<i.length;t++){var n=i[t];e.configDic.set(n.sign,{asset:{imageAry:n.imageAry},initOnceData:{colliderAry:n.colliderAry,speed:n.speed*uniLib.Global.screenWidth/1280,level:n.level,interval:n.interval,fastInterval:n.fastInterval}})}e.configDic.set(3e4,{asset:{movieClipAry:[{keyName:"idle",groupName:"FishingNetGray",actionName:"action"}]},initOnceData:{netNum:1,colliderAry:[{posX:0,posY:0}]}}),e.configDic.set(30005,{asset:{movieClipAry:[{keyName:"idle",groupName:"fishingNetPurple",actionName:"action"}]},initOnceData:{netNum:1,colliderAry:[{posX:0,posY:0}]}}),e.configDic.set(40001,{asset:{movieClipAry:[{keyName:"Rainbow_coin",groupName:"Rainbow_coin",actionName:"action",offsetY:100,scaleX:1.5,scaleY:1.5,frameRate:20},{keyName:"MR_Xiaoshi",groupName:"MR_fish",actionName:"action",offsetY:0},{keyName:"Rainbow_loop",groupName:"Rainbow_loop",actionName:"action"},{keyName:"Rainbow_start",groupName:"Rainbow_start",actionName:"action"},{keyName:"cloud_left",groupName:"cloud_01",actionName:"action",offsetY:120},{keyName:"cloud_right",groupName:"cloud_02",actionName:"action",offsetY:140}]},initOnceData:{}}),e.configDic.set(40002,{asset:{imageAry:[{keyName:"TreasureBox-end",sourceName:"TreasureBox-end"}],movieClipAry:[{keyName:"TreasureBox_vanish",groupName:"TreasureBox_vanish",actionName:"action",offsetY:0,scaleX:1,scaleY:1},{keyName:"TreasureBox_box",groupName:"TreasureBox",actionName:"action",scaleX:1,scaleY:1},{keyName:"TreasureBox-coin",groupName:"TreasureBox-coin",actionName:"action",scaleX:1.5,scaleY:1.5}]},initOnceData:{}});for(var a=table.TableFishConfig.instance(),o=0,r=a;o<r.length;o++){var n=r[o];e.configDic.set(n.sign,{asset:{movieClipAry:n.movieClipAry},initOnceData:{colliderAry:n.colliderAry,maxLife:n.maxLife,speed:n.speed/1e3,odds:n.killOdds,anchorOffsetX:n.anchorOffset.x,anchorOffsetY:n.anchorOffset.y,isMirror:n.isMirror,isAccurateCollider:n.isAccurateCollider},table:n})}}return e.prototype._roomLevelUpdate=function(){e.configDic.set(4e4,{asset:{movieClipAry:[{keyName:"idle",groupName:"Bomb",actionName:"action"}]},initOnceData:{colliderAry:[{posX:1,posY:1,radius:FishingJoy.DataCenter.instance.getRuleConfigList()[0].BurstRange}]}})},e.getConfigBySign=function(t){return e.configDic.get(t)},e.prototype.dispose=function(){e.configDic.clear()},e.configDic=new SimpleMap,e}();e.GameObjectConfigParse=t,__reflect(t.prototype,"gameObject.GameObjectConfigParse")}(gameObject||(gameObject={}));var gameObject;!function(e){var t=function(){function t(){this._objClassDic=new SimpleMap,this.gid=0;var e;for(e=10005;10008>e;e++)this._objClassDic.set(e,gameObject.Bullet);for(e=1e4;10003>e;e++)this._objClassDic.set(e,gameObject.Bullet);for(e=3e4;30004>e;e++)this._objClassDic.set(e,gameObject.FishingNet);for(e=30005;30008>e;e++)this._objClassDic.set(e,gameObject.FishingNet);this._objClassDic.set(2e4,gameObject.Battery),this._objClassDic.set(4e4,gameObject.Burst),this._objClassDic.set(40001,gameObject.MermaidEff),this._objClassDic.set(40002,gameObject.DragonEff);for(var t=0,i=table.TableFishConfig.instance();t<i.length;t++){var n=i[t];this._objClassDic.set(n.sign,gameObject.Fish)}}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.creatGameObject=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=2);var n=null;if(n=gameObject.GameObjectPool.instance.tryGetGameObjInPool(e),null==n){var a=this._objClassDic.get(e);n=new a,n.setData(e,this.gid,t,i),this._loadConfig(e,n)}else n.setData(e,this.gid,t,i);return n.initialize(),this._writeInMap(n,t),this.gid++,n},t.prototype.recoverGameObject=function(t){return null==t?void console.assert(!1,"gameObj为空！"):(egret.is(t,"gameObject.Bullet")?EventManager.fireEvent(3,t.servelID):egret.is(t,"gameObject.Fish")&&EventManager.fireEvent(5,t.servelID),t.uninitialize(),void e.GameObjectPool.instance.recoverGameObject(t))},t.prototype._loadConfig=function(t,i){var n=e.GameObjectConfigParse.configDic.get(t);n?(i.loadAsset(n.asset),i.initOnce(n.initOnceData)):console.assert(!1,"找不到sign为"+t+"资源配置！")},t.prototype._writeInMap=function(e,t){if(egret.is(e,"gameObject.Fish")){var i=t;EventManager.fireEvent(6,[i.serveID,e])}else if(egret.is(e,"gameObject.Bullet")){var n=t;EventManager.fireEvent(4,[n.servelID,e])}},t.prototype.dispose=function(){this._objClassDic.clear()},t._instance=null,t}();e.GameObjectFactory=t,__reflect(t.prototype,"gameObject.GameObjectFactory")}(gameObject||(gameObject={}));var gameObject;!function(e){var t=function(){function e(){this.MAX_CAHCHE_NUM=300,this._curCacheObjNum=0,this._objectFirstPool=new SimpleMap,this._objectSecondPool=new SimpleMap}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.tryGetGameObjInPool=function(e){var t,i=null;return t=this._objectSecondPool.get(e),null!=t&&t.length>0?(i=t.shift(),this._curCacheObjNum--):(t=this._objectFirstPool.get(e),null!=t&&t.length>0&&(this._objectSecondPool.set(e,t),this._objectFirstPool.remove(e),i=t.shift(),this._curCacheObjNum--)),null!=i&&i.refCount++,i},e.prototype.recoverGameObject=function(e){var t=null,i=null,n=e.sign;if(e.refCount>=1){if(this._objectFirstPool.isExist(n))if(this._objectSecondPool.isExist(n)){t=this._objectFirstPool.get(n),i=this._objectSecondPool.get(n);for(var a=0;a<t.length;a++)null!=i?i.push(t[a]):console.assert(!1,"逻辑有误！");this._objectSecondPool.set(n,i),this._objectFirstPool.remove(n)}else t=this._objectFirstPool.get(n),this._objectSecondPool.set(n,t),this._objectFirstPool.remove(n);if(t=this._objectSecondPool.get(n),null==t)return;-1==t.indexOf(e)&&(t.push(e),this._curCacheObjNum++)}else this._objectFirstPool.isExist(e.sign)?(t=this._objectFirstPool.get(n),-1==t.indexOf(e)&&(t.push(e),this._curCacheObjNum++)):(t=new Array,t.push(e),this._curCacheObjNum++),this._objectFirstPool.set(n,t);this._curCacheObjNum>this.MAX_CAHCHE_NUM&&this._cleanFirstPool()},e.prototype._cleanFirstPool=function(){this._clearPool(this._objectFirstPool),this._curCacheObjNum>=this.MAX_CAHCHE_NUM&&this._deepCleanCachePool()},e.prototype._deepCleanCachePool=function(){this._clearPool(this._objectSecondPool)},e.prototype._clearPool=function(e){for(var t=e.length,i=null,n=0,a=0;t>a;a++){i=e.getByKeyIndex(a);for(var o=[],r=0;r<i.length;r++)i[r].canDispose?(n+=1,i[r].dispose(),i[r]=null):o.push(i[r]);i=o,e.set(e.keys[a],i)}this._curCacheObjNum-=n},e.prototype.dispose=function(){this._clearPool(this._objectFirstPool),this._clearPool(this._objectSecondPool),this._objectFirstPool.clear(),this._objectSecondPool.clear()},e._instance=null,e}();e.GameObjectPool=t,__reflect(t.prototype,"gameObject.GameObjectPool")}(gameObject||(gameObject={}));var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?n(a):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var PublicLoadingView=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.backgroud_bmp||(this.backgroud_bmp=MJLobby.LobbyResUtil.createBitmapByName("HZ_login_bg_png"),this.backgroud_bmp.width=uniLib.Global.screenWidth,this.backgroud_bmp.height=uniLib.Global.screenHeight,this.addChild(this.backgroud_bmp)),this.bigLogo||(this.bigLogo=MJLobby.LobbyResUtil.createBitmapByName("big_logo_png",268,106),this.addChild(this.bigLogo)),this.darkLine_bmp||(this.darkLine_bmp=MJLobby.LobbyResUtil.createBitmapByName("lb_loading_darkLine",432,uniLib.Global.screenHeight-196*uniLib.ScreenUtils.scaleFactor),this.addChild(this.darkLine_bmp)),this.lightLine_bmp||(this.lightLine_bmp=MJLobby.LobbyResUtil.createBitmapByName("lb_loading_lightLine",this.darkLine_bmp.x+2,this.darkLine_bmp.y-10),this.lightLine_bmp.scale9Grid=new egret.Rectangle(12,18,10,2),this.addChild(this.lightLine_bmp)),this.explain_txf||(this.explain_txf=MJLobby.LobbyResUtil.createTextFeild(0,egret.HorizontalAlign.CENTER,"",22,500,uniLib.Global.screenHeight-171*uniLib.ScreenUtils.scaleFactor,276),this.addChild(this.explain_txf)),this._progTxt||(this._progTxt=MJLobby.LobbyResUtil.createTextFeild(0,egret.HorizontalAlign.CENTER,"",22,520,uniLib.Global.screenHeight-220*uniLib.ScreenUtils.scaleFactor,276),this.addChild(this._progTxt)),this._infoTxt||(this._infoTxt=MJLobby.LobbyResUtil.createTextFeild(0,egret.HorizontalAlign.CENTER,"抵制不良游戏 拒绝盗版游戏 注意自我保护 谨防受骗上当 适度游戏益脑 沉迷游戏伤身 合理安排时间 享受健康生活",20,0,uniLib.Global.screenHeight-44*uniLib.ScreenUtils.scaleFactor,MJLobby.LobbyDataCache.defaultWidth),this.addChild(this._infoTxt))},t.prototype.setProgress=function(e,i,n,a,o){if(void 0===o&&(o=!1),this._versionTxt||(this._versionTxt=MJLobby.LobbyResUtil.createTextFeild(10066329,egret.HorizontalAlign.RIGHT,MJLobby.LobbyDataCache.version,22,864),this._versionTxt.x=uniLib.Global.screenWidth-this._versionTxt.width,this._versionTxt.y=uniLib.Global.screenHeight-this._versionTxt.height,this.addChild(this._versionTxt),this._versionTxt.text=MJLobby.LobbyDataCache.version),i&&0!=i){var r=Math.ceil(e/i*100);n&&""!=n?this.explain_txf.text=n:this.explain_txf.text=t.explain,0==o&&r>93&&(r=93);var s=this.darkLine_bmp.width*(r/100)+27;this.lightLine_bmp.width=s,this.lightLine_bmp.width>this.darkLine_bmp.width&&(this.lightLine_bmp.width=this.darkLine_bmp.width),this._progTxt&&(this._progTxt.text=r+"%")}else this.explain_txf.text=n;this.explain_txf.x=(MJLobby.LobbyDataCache.defaultWidth-this.explain_txf.width)/2},t.explain="正在加载游戏资源...",t}(egret.Sprite);__reflect(PublicLoadingView.prototype,"PublicLoadingView");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function a(e){t.call(n,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var gameObject;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.batteryScaleX=.85,t.batteryScaleY=.85,t.uID=0/0,t.varsData=null,t.canDispose=!1,t.refCount=0/0,t._registerAry=[],t.firePoint=new egret.Shape,t.isTween=!1,t.isTop=!1,t._batteryID=1,t._waitForServe=!1,t.isAimShoot=!1,t.fishNetRadius=50,t.fireBulletNum=1,t.resNo=1,t.curRotation=0,t.goldCoinInitialization=!0,t.skinName="SeatItemSkin_fish",t.touchEnabled=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"seatId",{get:function(){return this.seatdata.seatId},enumerable:!0,configurable:!0}),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2},t.prototype.loadAsset=function(e){this.firePoint.x=0,this.firePoint.y=100,this.firePoint.anchorOffsetY=90,this._batteryFireBox.addChild(this.firePoint),this.firePoint.visible=!0,this._batteryChangeEff=UIUtil.creatMovieClip("batteryChangeEff"),this._batteryChangeEff.x=0,this._batteryChangeEff.y=80,this._batteryChangeEff.visible=!1,this._batteryFireBox.addChild(this._batteryChangeEff),game.SetPublicFont(this._moneyTF),game.SetPublicFont(this._costMoneyTF),this._creatFireEff(!1)},Object.defineProperty(t.prototype,"coinImg",{get:function(){return this._coinImg},enumerable:!0,configurable:!0}),t.prototype.changeSeat=function(e){var t={x:this.x,y:this.y,id:this.seatId};this.x=e.x,this.y=e.y,this.setSeatIndex(e.seatId),e.x=t.x,e.y=t.y,e.setSeatIndex(t.id)},t.prototype.sendBulletEffect=function(){egret.Tween.get(this._firingImg).to({scaleY:.9},80).to({scaleY:1},100),this.playOnceAndHide(this._batteryFireEff)},t.prototype.setFirePortRotation=function(e){var t=this.seatId;1==t?e=-e:4==t?e=-e+180:3==t&&(e-=180),this._firingImg.rotation=e,this.firePoint.rotation=e,this._batteryFireEff.rotation=e},t.prototype.setTweenRotation=function(e,t){var i=this,n=this.seatId;1==n?e=-e:4==n?e=-e+180:3==n&&(e-=180),this._firingImg.rotation-e>180?e+=360:this._firingImg.rotation-e<-180&&(e-=360),egret.Tween.get(this._firingImg).to({rotation:e},150).call(function(){i.firePoint.rotation=e,i._batteryFireEff.rotation=e,t.run()},this)},t.prototype.initOnce=function(e){},t.prototype._onClickDec=function(){if(!this._waitForServe){var e=FishingJoy.DataCenter.instance.beforBatterId(this._batteryID),t=FishingJoy.DataCenter.instance.minBatterId();e==t&&(this.decBtn.enabled=!1),this.incBtn.enabled=!0,e<FishingJoy.DataCenter.instance.accessToProps(1)[0].needBatteryId&&(Master.instance.isAutoShoot=!1,EventManager.fireEvent(10,[SHOOT_TYPE.AUTO,!1])),e<FishingJoy.DataCenter.instance.accessToProps(2)[0].needBatteryId&&(Master.instance.isFastShoot=!1,EventManager.fireEvent(10,[SHOOT_TYPE.FAST,!1])),e<FishingJoy.DataCenter.instance.accessToProps(3)[0].needBatteryId&&(Master.instance.isAimShoot=!1,EventManager.fireEvent(10,[SHOOT_TYPE.AIM,!1])),game.SoundHand.Instance.playTurretDemotion(),this._sendChangeBatteryMsg(e)}},t.prototype._sendChangeBatteryMsg=function(e){var t=new Cmd.ActionCmd_CS;t.act=new Cmd.Action,t.act.uid=Master.instance.uid,t.act.value=FishingJoy.DataCenter.instance.getBatterIndex(e)+1,t.act.op=Cmd.Operation.ChangeBattery,game.PokerFunction.tcpSend(t),this._waitForServe=!0},t.prototype.playOnceAndHide=function(e){e.visible=!0,e.gotoAndPlay(1,1),e.once(egret.MovieClipEvent.COMPLETE,function(){e.visible=!1},this)},t.prototype._onClickinc=function(){if(!this._waitForServe){var e=FishingJoy.DataCenter.instance.nextBatterId(this._batteryID),t=FishingJoy.DataCenter.instance.maxBatterId();e==t&&(this.incBtn.enabled=!1),this.decBtn.enabled=!0,game.SoundHand.Instance.playTurretUpgrade(),this._sendChangeBatteryMsg(e)}},t.prototype.setSeatData=function(e){this.seatdata=e,this.seatdata.userChanged.add(this._userChanged,this),this.seatdata.batteryIndexChanged.add(this._onbatteryChange,this)},Object.defineProperty(t.prototype,"state",{set:function(e){this.seatState!=e&&(this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._sendSitDownCmd,this),e==SEAT_STATE.EMPTY?(this.batteryDisplay.visible=!1,this.waitingToJoin.visible=!0,UIUtil.setBreatheTween(this.waitingToJoin,1e3)):e==SEAT_STATE.SOMEBODY&&(this.batteryDisplay.visible=!0,this.waitingToJoin.visible=!1,egret.Tween.removeTweens(this.waitingToJoin)),this.seatState=e)},enumerable:!0,configurable:!0}),t.prototype._sendSitDownCmd=function(){var e=new Cmd.SitDownCmd_CS;e.uid=Master.instance.uid,e.seatId=this.seatdata.seatId,e.roomId=FishingJoy.DataCenter.instance.roomID,game.PokerFunction.tcpSend(e)},t.prototype._userChanged=function(e){if(e)this.state=SEAT_STATE.SOMEBODY,this._user=e,EventManager.fireEvent(7,[this._user.uid,this]),this.goldCoinInitialization=!0,this._user.nameChanged.add(this._nameChanged,this),this._user.pointChanged.add(this._onMoneyChanged,this),this._user.uid==uniLib.NetMgr.UID?(this._nameTF.textColor=ColorUtil.COLOR_ORANGE,this._decreaseImg.source="batteryBase1",this._increaseImg.source="batteryBase2",EventManager.registerEvent(0,Handler.create(this,this.judgeBtnEnabled,[this._batteryID],!0),1),this.registerOperation(0),this.registerOperation(5),this.decBtn=new tool.Button(this._decreaseImg),this.decBtn.mouseClickHandler=Handler.create(this,this._onClickDec),this.decBtn.enabled=!1,this.incBtn=new tool.Button(this._increaseImg),this.incBtn.mouseClickHandler=Handler.create(this,this._onClickinc),this.incBtn.enabled=!0,Master.instance.masterBattery=this,this._creatFireEff(!0),this._playerEnterEff()):(this._decreaseImg.source="batteryBase10",this._increaseImg.source="batteryBase9",this._nameTF.textColor=ColorUtil.COLOR_WHITE,this.registerOperation(5),this._creatFireEff(!1),Master.instance.masterBattery=null);else{this.seatdata.setLock(!1,null),EventManager.fireEvent(8,this._user.uid),this.state=SEAT_STATE.EMPTY,egret.Tween.removeTweens(this._firingImg),UIUtil.removeSelf(this._batteryFireEff),this._batteryFireEff.stop(),this._batteryFireEff=null,this._user.nameChanged.remove(this._nameChanged,this),this._user.pointChanged.remove(this._onMoneyChanged,this),this._user=null;for(var t=0;t<this._registerAry.length;t++)manager.OperationManager.instance.unregisterOperation(this._registerAry[t]);this._clear(),FishingJoy.FishingJoyLogic.instance.removeTheGoldCoinHeap(this.seatdata)}},t.prototype._onbatteryChange=function(){this._waitForServe=!1,this.changeBatery(this.seatdata.batteryIndex)},t.prototype.changeBatery=function(e){var t=FishingJoy.DataCenter.instance.getBatterIdByIndex(e-1),i=table.TableBatteryConfig.instance(),n=i.first(function(e){return e.id==t});return null==n?void(this.seatdata.batteryIndex=1):(this._batteryID=t,this.fishNetRadius=n.fishNetRadius,this._user.uid==Master.instance.uid?(this.judgeBtnEnabled(),this._firingImg.source="batterySelf"+n.resNo):this._firingImg.source="battery"+n.resNo,this._costMoneyTF.text=n.id.toString(),this.fireBulletNum=n.fireBulletNum,this.playOnceAndHide(this._batteryChangeEff),void(this._firingImg.anchorOffsetX=this._firingImg.width/2))},t.prototype.judgeBtnEnabled=function(){var e=FishingJoy.DataCenter.instance.minBatterId(),t=FishingJoy.DataCenter.instance.maxBatterId();this.incBtn.enabled=!0,this.decBtn.enabled=!0,this._batteryID<=e&&(this.decBtn.enabled=!1),this._batteryID>=t&&(this.incBtn.enabled=!1)},Object.defineProperty(t.prototype,"user",{get:function(){return this._user},enumerable:!0,configurable:!0}),t.prototype._nameChanged=function(){this._nameTF.text=this._user.nickName},t.prototype._playerEnterEff=function(){var e=this,t=new CustomImage;t.y=50,t.source="batterySelfInfo1";var i=new CustomImage;i.source="batterySelfInfo2",i.y=-120,i.x=2,this._batteryFireBox.addChild(t),this._batteryFireBox.addChild(i),1==this.seatId?(t.scaleX=-1,t.scaleY=1,i.scaleX=-1,i.scaleY=1,UIUtil.setScaleTween(t,-1,1)):2==this.seatId?(t.scaleX=1,t.scaleY=1,i.scaleX=1,i.scaleY=1,UIUtil.setScaleTween(t,1,1)):3==this.seatId?(t.scaleX=1,t.scaleY=1,i.scaleX=1,i.scaleY=1,UIUtil.setScaleTween(t,1,1)):4==this.seatId&&(t.scaleX=-1,t.scaleY=1,i.scaleX=-1,i.scaleY=1,UIUtil.setScaleTween(t,-1,1)),Laya.timer.once(6e3,this,function(){egret.Tween.get(t).to({alpha:0},2e3),egret.Tween.get(i).to({alpha:0},2e3).call(function(){egret.Tween.removeTweens(t),egret.Tween.removeTweens(i),e._batteryFireBox.removeChild(t),e._batteryFireBox.removeChild(i)
})})},t.prototype._creatFireEff=function(e){e?this._batteryFireEff=UIUtil.creatMovieClip("paojizi_1_fish"):this._batteryFireEff=UIUtil.creatMovieClip("paojilv_fish"),this._batteryFireEff.x=0,this._batteryFireEff.y=100,this._batteryFireEff.anchorOffsetY=90,this._batteryFireEff.visible=!1,this._batteryFireBox.addChild(this._batteryFireEff)},t.prototype._onMoneyChanged=function(){if(this._user&&this.goldCoinInitialization){var e=this._user.point;this._moneyTF.text=GX.toEnInLocaleString(e+""),0==e||null==e?this.goldCoinInitialization=!0:this.goldCoinInitialization=!1}},t.prototype.goldCoinRefresh=function(){this._user&&(this._moneyTF.text=GX.toEnInLocaleString(this._user.point+""))},t.prototype._clear=function(){this._moneyTF.text="",this._nameTF.text=""},t.prototype.initialize=function(){this.x=this.varsData.bornX,this.y=this.varsData.bornY,manager.LayerManager.instance.addToLayer(this,this.layerType)},t.prototype.uninitialize=function(){manager.LayerManager.instance.removeFromLayer(this);for(var e=0;e<this._registerAry.length;e++)manager.OperationManager.instance.unregisterOperation(this._registerAry[e]);this._registerAry.length=0,this._user&&(this._user.nameChanged.remove(this._nameChanged,this),this._user.pointChanged.remove(this._onMoneyChanged,this)),this._clear(),this.seatdata=null,this._user=null,this._moneyTF=null,this._nameTF=null},t.prototype.setData=function(e,t,i,n){void 0===n&&(n=5),this.sign=e,this.uID=t,this.varsData=i,this.layerType=n},t.prototype.dispose=function(){this.decBtn&&(this.decBtn.dispose(),this.decBtn=null),this.incBtn&&(this.incBtn.dispose(),this.incBtn=null),this._batteryChangeEff.stop(),this._batteryChangeEff=null,this.varsData=null,this.uID=0/0,this.varsData=null},t.prototype.setSeatIndex=function(e){4==e?(this.scaleX=this.batteryScaleX,this.scaleY=-this.batteryScaleY,this._moneyTF.scaleX=.36,this._moneyTF.scaleY=-.36,this._costMoneyTF.scaleX=.5,this._costMoneyTF.scaleY=-.5,this._nameTF.scaleX=1,this._nameTF.scaleY=-1,this._coinImg.scaleX=1,this._coinImg.scaleY=-1,this._increaseImg.scaleX=1,this._increaseImg.scaleY=-1,this._decreaseImg.scaleX=1,this._decreaseImg.scaleY=-1,this.waitingToJoin.scaleY=-1,this.waitingToJoin.scaleX=1):3==e?(this.scaleX=-this.batteryScaleX,this.scaleY=-this.batteryScaleY,this._moneyTF.scaleX=-.36,this._moneyTF.scaleY=-.36,this._costMoneyTF.scaleX=-.5,this._costMoneyTF.scaleY=-.5,this._nameTF.scaleX=-1,this._nameTF.scaleY=-1,this._coinImg.scaleX=-1,this._coinImg.scaleY=-1,this._increaseImg.scaleX=-1,this._increaseImg.scaleY=-1,this._decreaseImg.scaleX=-1,this._decreaseImg.scaleY=-1,this.waitingToJoin.scaleY=-1,this.waitingToJoin.scaleX=-1):2==e?(this.scaleX=this.batteryScaleX,this.scaleY=this.batteryScaleY,this._moneyTF.scaleX=.36,this._moneyTF.scaleY=.36,this._costMoneyTF.scaleX=.5,this._costMoneyTF.scaleY=.5,this._nameTF.scaleX=1,this._nameTF.scaleY=1,this._coinImg.scaleX=1,this._coinImg.scaleY=1,this._increaseImg.scaleX=1,this._increaseImg.scaleY=1,this._decreaseImg.scaleX=1,this._decreaseImg.scaleY=1,this.waitingToJoin.scaleY=1,this.waitingToJoin.scaleX=1):1==e&&(this.scaleX=-this.batteryScaleX,this.scaleY=this.batteryScaleY,this._moneyTF.scaleX=-.36,this._moneyTF.scaleY=.36,this._costMoneyTF.scaleX=-.5,this._costMoneyTF.scaleY=.5,this._nameTF.scaleX=-1,this._nameTF.scaleY=1,this._coinImg.scaleX=-1,this._coinImg.scaleY=1,this._increaseImg.scaleX=-1,this._increaseImg.scaleY=1,this._decreaseImg.scaleX=-1,this._decreaseImg.scaleY=1,this.waitingToJoin.scaleY=1,this.waitingToJoin.scaleX=-1),this.seatIndex=e},t.prototype.reverse=function(){},t.prototype.registerOperation=function(e){this._registerAry.push(manager.OperationManager.instance.registerOperation(this,e))},t}(eui.Component);e.Battery=t,__reflect(t.prototype,"gameObject.Battery",["gameObject.IGameObject"])}(gameObject||(gameObject={}));var SEAT_STATE;!function(e){e[e.EMPTY=0]="EMPTY",e[e.SOMEBODY=1]="SOMEBODY"}(SEAT_STATE||(SEAT_STATE={}));var gameObject;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._registerAry=[],e.damage=1,e.touchEnabled=!1,e.touchChildren=!1,e}return __extends(i,t),Object.defineProperty(i.prototype,"servelID",{get:function(){return this.varsData.servelID},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playerID",{get:function(){return this.varsData.playerUID},enumerable:!0,configurable:!0}),i.prototype.initOnce=function(e){t.prototype.initOnce.call(this,e),this.damage=e.damage,this.level=e.level,this.interval=e.interval,this.fastInterval=e.fastInterval},i.prototype.initialize=function(){t.prototype.initialize.call(this);var e=this.varsData;if(null==e.operation&&console.assert(!1,"子弹未注册operationID"),void 0==e.servelID&&console.assert(!1,"子弹没有servelID"),this.targetFish=e.targetFish,this.isCollided=!1,this.varsData.operation)for(var i=0;i<this.varsData.operation.length;i++)this._registerAry.push(manager.OperationManager.instance.registerOperation(this,this.varsData.operation[i].type))},i.prototype.uninitialize=function(){for(var e=0;e<this._registerAry.length;e++)manager.OperationManager.instance.unregisterOperation(this._registerAry[e]);this._registerAry.length=0,this.targetFish=null,t.prototype.uninitialize.call(this)},i.prototype._hitFish=function(t,i,n){this.uID==n.uID&&e.GameObjectFactory.instance.recoverGameObject(this)},i.prototype.dispose=function(){t.prototype.dispose.call(this),this._registerAry.length=0},i.prototype.getGrid=function(){return console.info("子弹所在格子："+this.grid[0]),this.grid[0]},i}(e.GameObjectCollider);e.Bullet=t,__reflect(t.prototype,"gameObject.Bullet")}(gameObject||(gameObject={}));var gameObject;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.initOnce=function(e){t.prototype.initOnce.call(this,e)},i.prototype.initialize=function(){t.prototype.initialize.call(this),this._moviePlayer.switchAniPlayOnce("idle",Handler.create(this,this._onComplete))},i.prototype._onComplete=function(){e.GameObjectFactory.instance.recoverGameObject(this)},i.prototype.uninitialize=function(){t.prototype.uninitialize.call(this)},i.prototype.dispose=function(){t.prototype.dispose.call(this)},i.prototype.getGrid=function(){return this.grid[0]},i}(e.GameObjectCollider);e.Burst=t,__reflect(t.prototype,"gameObject.Burst")}(gameObject||(gameObject={}));var gameObject;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._txt=new egret.TextField,e._blackBg=new eui.Rect,e.tweenCompleteIndex=0,e.MAX_NUM=110,e}return __extends(i,t),Object.defineProperty(i.prototype,"playerNickName",{get:function(){return this.varsData.playerNickName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"targetBattery",{get:function(){return this.varsData.targetBattery},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"score",{get:function(){return this.varsData.score},enumerable:!0,configurable:!0}),i.prototype.initOnce=function(e){if(this._blackBg.fillColor=ColorUtil.COLOR_BLACK,this._blackBg.width=uniLib.Global.screenWidth,this._blackBg.height=uniLib.Global.screenHeight,this._blackBg.x=-uniLib.Global.screenWidth/2,this._blackBg.y=-uniLib.Global.screenHeight/2-50,this._blackBg.alpha=.4,this.addChildAt(this._blackBg,0),this._txt.bold=!0,this._txt.fontFamily="SimHei",this._txt.size=35,this._txt.y=-250,uniLib.Global.isH5){var t=new egret.GlowFilter(16744272,.5,1,1,10,1,!0);this._txt.filters=[t]}else this._txt.textColor=16744272;this.addChild(this._txt),this.touchEnabled=!1,this.touchChildren=!1},i.prototype.initialize=function(){var e=this;t.prototype.initialize.call(this),this._imagePlayer.alpha=1,this._txt.alpha=0,this._imagePlayer.visible=!1,this._moviePlayer.play("TreasureBox_vanish",1),this._moviePlayer.play("TreasureBox_box",1,1e3,Handler.create(this,function(){e._imagePlayer.visible=!0})),this._moviePlayer.play("TreasureBox-coin",1,1800),Laya.timer.once(2800,this,this._effComplete),Laya.timer.once(4e3,this,this._showCoin)},i.prototype._effComplete=function(){egret.Tween.get(this._txt).to({alpha:1},1e3),this._txt.text="恭喜 ["+this.playerNickName+"] 打开金龙的宝藏!",this._txt.x=-this._txt.textWidth/2},i.prototype._showCoin=function(){egret.Tween.get(this._imagePlayer).to({alpha:0},1500);var e=UIUtil.localToGlobal(this.targetBattery.coinImg),t=e[0],i=e[1];game.SoundHand.Instance.playGoldCoinRain();for(var n=0;n<=this.MAX_NUM;n++)Laya.timer.once(MathUtil.random(0,500),this,this._creatCoin,[n,t,i],!1)},i.prototype._tweenComplete=function(t){t.stop(),manager.LayerManager.instance.removeFromLayer(t,9),Pool.recover(Pool.flyCoin,t),this.tweenCompleteIndex++,this.tweenCompleteIndex>=this.MAX_NUM&&(this.tweenCompleteIndex=0,e.GameObjectFactory.instance.recoverGameObject(this),EventManager.fireEvent(16,[t.x,t.y,this.score]))},i.prototype._creatCoin=function(e,t,i){var n=Pool.getItemByCreateFun(Pool.flyCoin,Handler.create(this,this._creatCoinMov,null,!0));n.alpha=1,n.gotoAndPlay(1,-1);var a,o;1>=e?(a=610+30*e,o=540):e>=1&&10>=e?(a=MathUtil.random(500,720),o=500+MathUtil.random(-10,10)):e>=10&&25>=e?(a=MathUtil.random(460,750),o=460+MathUtil.random(-10,10)):e>=26&&46>=e?(a=MathUtil.random(450,750),o=420+MathUtil.random(-10,10)):e>=47&&72>=e?(a=MathUtil.random(450,760),o=380+MathUtil.random(-10,10)):e>=73&&86>=e?(a=MathUtil.random(480,750),o=340+MathUtil.random(-10,10)):e>=87&&95>=e?(a=MathUtil.random(590,780),o=290+MathUtil.random(-10,10)):e>=96&&110>=e&&(a=MathUtil.random(600,725),o=250+MathUtil.random(-10,10)),n.x=a,n.y=o,manager.LayerManager.instance.addToLayer(n,9),egret.Tween.get(n).to({alpha:1},500).wait(1500).to({x:t,y:i},500+10*e,egret.Ease.quadIn).call(this._tweenComplete,this,[n])},i.prototype._creatCoinMov=function(){var e=UIUtil.creatMovieClip("coin_fish");return e.scaleX=e.scaleY=.4,e},i.prototype._onComplete=function(){e.GameObjectFactory.instance.recoverGameObject(this)},i.prototype.uninitialize=function(){this._txt.text="",this._moviePlayer.stopAll(),t.prototype.uninitialize.call(this)},i.prototype.dispose=function(){t.prototype.dispose.call(this)},i}(e.GameObjectRender);e.DragonEff=t,__reflect(t.prototype,"gameObject.DragonEff")}(gameObject||(gameObject={}));var table;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"table.TableBaseRuleConfigList"},e}();e.TableBaseRuleConfigList=t,__reflect(t.prototype,"table.TableBaseRuleConfigList"),function(e){var t=function(){function e(){}return e}();e.NoticeTriggersItem=t,__reflect(t.prototype,"table.TableBaseRuleConfigList.NoticeTriggersItem")}(t=e.TableBaseRuleConfigList||(e.TableBaseRuleConfigList={}))}(table||(table={}));var gameObject;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),Object.defineProperty(i.prototype,"radius",{get:function(){return this.varsData.radius},enumerable:!0,configurable:!0}),i.prototype.initOnce=function(e){this.netNum=e.netNum,this.colliderData=e.colliderAry},i.prototype.initialize=function(){t.prototype.initialize.call(this),this._moviePlayer.alpha=.8;for(var e=this.radius/115,i=0;i<this.netNum;i++){var n=FishingJoy.Collider.creat(this.colliderData[i].posX*e,this.colliderData[i].posY*e,this.radius);n.setParent(this),this.colliderAry.push(n)}this._moviePlayer.scaleX=this._moviePlayer.scaleY=e,this.canDispose=!1,this._moviePlayer.playOnceAll(Handler.create(this,this._onComplete))},i.prototype._onComplete=function(){this.canDispose=!0,e.GameObjectFactory.instance.recoverGameObject(this)},i.prototype.uninitialize=function(){for(var e=0;e<this.colliderAry.length;e++)this.colliderAry[e].recover();this.colliderAry.length=0,t.prototype.uninitialize.call(this)},i.prototype.dispose=function(){t.prototype.dispose.call(this)},i}(e.GameObjectCollider);e.FishingNet=t,__reflect(t.prototype,"gameObject.FishingNet")}(gameObject||(gameObject={}));var gameObject;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._txt=new egret.TextField,e._blackBg=new eui.Rect,e.tweenCompleteIndex=0,e.MAX_NUM=60,e}return __extends(i,t),Object.defineProperty(i.prototype,"playerNickName",{get:function(){return this.varsData.playerNickName},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"targetBattery",{get:function(){return this.varsData.targetBattery},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"score",{get:function(){return this.varsData.score},enumerable:!0,configurable:!0}),i.prototype.initOnce=function(e){if(this._blackBg.fillColor=ColorUtil.COLOR_BLACK,this._blackBg.width=uniLib.Global.screenWidth,this._blackBg.height=uniLib.Global.screenHeight,this._blackBg.x=-uniLib.Global.screenWidth/2,this._blackBg.y=-uniLib.Global.screenHeight/2-50,this._blackBg.alpha=.4,this.addChildAt(this._blackBg,0),this._txt.bold=!0,this._txt.size=35,this._txt.y=-250,uniLib.Global.isH5){var t=new egret.GlowFilter(16744272,.5,1,1,10,1,!0);this._txt.filters=[t]}else this._txt.textColor=16744272;this.addChild(this._txt),this.touchEnabled=!1,this.touchChildren=!1},i.prototype.initialize=function(){var e=this;t.prototype.initialize.call(this),this._txt.alpha=0,this._moviePlayer.alpha=1;var i=this._moviePlayer.getMovieClipByKey("cloud_left");i.x=-650,i.alpha=0;var n=this._moviePlayer.getMovieClipByKey("cloud_right");n.x=650,n.alpha=0;var a=this._moviePlayer.getMovieClipByKey("MR_Xiaoshi");a.alpha=0,egret.Tween.get(i).to({x:-250,alpha:1},800),egret.Tween.get(n).to({x:250,alpha:1},800),this._moviePlayer.play("cloud_left",-1),this._moviePlayer.play("cloud_right",-1),this._moviePlayer.play("Rainbow_start",1,1800),this._moviePlayer.play("Rainbow_loop",-1,2300),this._moviePlayer.play("Rainbow_coin",-1,2300),Laya.timer.once(500,this,function(){egret.Tween.get(a).to({alpha:1},500),e._moviePlayer.play("MR_Xiaoshi",1)}),Laya.timer.once(3800,this,this._effComplete),Laya.timer.once(4600,this,function(){egret.Tween.get(e._moviePlayer).to({alpha:0},500)}),Laya.timer.once(4e3,this,this._showCoin)},i.prototype._effComplete=function(){egret.Tween.get(this._txt).to({alpha:1},1e3),this._txt.text="恭喜 ["+this.playerNickName+"] 获得美人鱼的祝福!",this._txt.x=-this._txt.textWidth/2},i.prototype._showCoin=function(){var e=UIUtil.localToGlobal(this.targetBattery.coinImg),t=e[0],i=e[1];game.SoundHand.Instance.playGoldCoinRain();for(var n=0;n<this.MAX_NUM;n++)Laya.timer.once(MathUtil.random(0,500),this,this._creatCoin,[n,t,i],!1)},i.prototype._tweenComplete=function(t){t.stop(),manager.LayerManager.instance.removeFromLayer(t,9),Pool.recover(Pool.flyCoin,t),this.tweenCompleteIndex++,this.tweenCompleteIndex>=this.MAX_NUM&&(this.tweenCompleteIndex=0,e.GameObjectFactory.instance.recoverGameObject(this),EventManager.fireEvent(15,[t.x,t.y,this.score]))},i.prototype._creatCoin=function(e,t,i){var n=Pool.getItemByCreateFun(Pool.flyCoin,Handler.create(this,this._creatCoinMov,null,!0));n.alpha=0,n.gotoAndPlay(1,-1);var a,o;4>=e?(a=MathUtil.random(-250,-200),o=50+MathUtil.random(-10,10)):e>=5&&12>=e?(a=MathUtil.random(-250,-150),o=0+MathUtil.random(-10,10)):e>=13&&18>=e?(a=MathUtil.random(-210,-110),o=-50+MathUtil.random(-10,10)):e>=19&&40>=e?(a=MathUtil.random(-160,140),o=-100+MathUtil.random(-10,10)):e>=41&&48>=e?(a=MathUtil.random(-80,70),o=-150+MathUtil.random(-10,10)):e>=49&&58>=e?(a=MathUtil.random(160,210),o=-50+MathUtil.random(-10,10)):e>=59&&(a=220,o=0+MathUtil.random(-10,10)),n.x=a+this.x,n.y=o+this.y,manager.LayerManager.instance.addToLayer(n,9),egret.Tween.get(n).to({alpha:1},1500).wait(500).to({x:t,y:i},500+10*e,egret.Ease.quadIn).call(this._tweenComplete,this,[n])},i.prototype._creatCoinMov=function(){var e=UIUtil.creatMovieClip("coin_fish");return e.scaleX=e.scaleY=.4,e},i.prototype._onComplete=function(){e.GameObjectFactory.instance.recoverGameObject(this)},i.prototype.uninitialize=function(){this._txt.text="",this._moviePlayer.stopAll(),t.prototype.uninitialize.call(this)},i.prototype.dispose=function(){t.prototype.dispose.call(this)},i}(e.GameObjectRender);e.MermaidEff=t,__reflect(t.prototype,"gameObject.MermaidEff")}(gameObject||(gameObject={}));var gameObject;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initialize=function(){e.prototype.initialize.call(this)},t.prototype.uninitialize=function(){e.prototype.uninitialize.call(this)},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t}(e.Fish);e.SpecialFish=t,__reflect(t.prototype,"gameObject.SpecialFish")}(gameObject||(gameObject={}));var gameObject;!function(e){var t=function(){function e(){}return e.addSkillEff=function(e,t){if(t==Cmd.FishSkillType.YiWangDaJin){var i=Pool.getItemByCreateFun(Pool.yiWangDaJin,Handler.create(this,this.creatYiwangdajinMov));return i.gotoAndPlay(1,-1),e.addChildAt(i,0),i}if(t==Cmd.FishSkillType.SameGroup){var n=Pool.getItemByCreateFun(Pool.boomIMG,Handler.create(this,this.creatBombEff,null)),a=n[0],o=n[1];return egret.Tween.get(a,{loop:!0}).to({rotation:360},2e3),egret.Tween.get(o,{loop:!0}).to({rotation:-360},2e3),e.addChildAt(o,0),e.addChildAt(a,0),[a,o]}},e.creatYiwangdajinMov=function(){var e=UIUtil.creatMovieClip("ywangdajin");return e.scaleX=e.scaleY=.7,e},e.creatBombEff=function(){var e=new eui.Image,t=new eui.Image;return e.source="fishBoom1",t.source="fishBoom2",e.scaleX=e.scaleY=.7,t.scaleX=t.scaleY=.7,e.anchorOffsetX=115,e.anchorOffsetY=115,t.anchorOffsetX=115,t.anchorOffsetY=115,e.touchEnabled=!1,t.touchEnabled=!1,[e,t]},e.removeSkill=function(e,t){if(t instanceof Array){for(var i=0;i<t.length;i++)e.removeChild(t[i]);Pool.recover(Pool.boomIMG,t)}else egret.is(t,"egret.MovieClip")?(t.stop(),e.removeChild(t),Pool.recover(Pool.yiWangDaJin,t)):console.assert(!1,"尚不支持该类型！")},e}();e.FishSkillTool=t,__reflect(t.prototype,"gameObject.FishSkillTool")}(gameObject||(gameObject={}));var FishingJoy;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.onInit=function(){this._mainView=this._viewCenter.getView(e.FishMainSceneView),this._seatView=this._viewCenter.getView(e.SeatView),this._mainView.addChild(this._seatView)},i.prototype.onShow=function(){e.FishingJoyLogic.instance.initFishingJoyLogic()},i.prototype.dispose=function(){this._seatView=null,this._mainView=null,t.prototype.dispose.call(this)},i}(BaseUIControl);e.FishMainSceneControl=t,__reflect(t.prototype,"FishingJoy.FishMainSceneControl")}(FishingJoy||(FishingJoy={}));var FishingJoy;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.addView(e.FishMainSceneView),i.addControl(e.FishMainSceneControl),i.addView(e.SeatView),i.addView(e.FishBtnView),i.addControl(e.FishBtnControl),i}return __extends(i,t),i}(BaseUIManager);e.FishMainSceneManager=t,__reflect(t.prototype,"FishingJoy.FishMainSceneManager")}(FishingJoy||(FishingJoy={}));var FishingJoy;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainSceneSkin_fish",t.init(),t}return __extends(t,e),t.prototype.dispose=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),GX.GameLayerManager.removeUI(this)},t.prototype.init=function(){this.ebbResources(),game.SoundHand.Instance.playBgMp3(),game.SoundHand.Instance.playBgMusic(),this.jianbianImages.width=this.backGrounds1.width=this.backGround0.width=this.width=uniLib.Global.screenWidth,this.backGrounds1.height=this.backGround0.height=this.height=uniLib.Global.screenHeight,this.sprayGroups.x=this.width+140,this.backGrounds1.x=this.width},t.prototype.ebbResources=function(){this.sprayGroups=new eui.Group,this.sprayGroups.height=uniLib.Global.screenHeight,this.jianbianImages=new eui.Image,this.jianbianImages.source="jianbian_png",this.backGrounds1=new eui.Image},t.prototype.clear=function(){},t.prototype.initCustomFilter=function(){var e="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( (aVertexPosition / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}",t=["precision lowp float;\nvarying vec2 vTextureCoord;","varying vec4 vColor;\n","uniform sampler2D uSampler;","uniform vec2 center;","uniform vec3 params;","uniform float time;","void main()","{","vec2 uv = vTextureCoord.xy;","vec2 texCoord = uv;","float dist = distance(uv, center);","if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )","{","float diff = (dist - time);","float powDiff = 1.0 - pow(abs(diff*params.x), params.y);","float diffTime = diff  * powDiff;","vec2 diffUV = normalize(uv - center);","texCoord = uv + (diffUV * diffTime);","}","gl_FragColor = texture2D(uSampler, texCoord);","}"].join("\n"),i=new egret.CustomFilter(e,t,{center:{x:.5,y:.5},params:{x:10,y:.8,z:.1},time:0});manager.LayerManager.instance.getLayer(2);this.filters=[i],this.customFilter=i,this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},t.prototype.onEnterFrame=function(){var e=this,t=this.customFilter;t.uniforms.time+=.01,t.uniforms.time>1&&(t.uniforms.time=0,this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),game.Timer.setTimeout(function(){e.addEventListener(egret.Event.ENTER_FRAME,e.onEnterFrame,e)},this,5e3))},t.prototype.onInit=function(){GX.GameLayerManager.addUIToScene(this);for(var e=0;4>e;e++){var t=uniLib.DisplayUtils.createMovieClicp("wave");t.touchEnabled=!1;var i=UIUtil.getGridItemPos(e,t,2,-20,-20),n=i[0],a=i[1];t.play(-1),t.scaleX=t.scaleY=3,t.x=t.width/2*t.scaleX+n*t.scaleX,t.y=t.height/2*t.scaleY+a*t.scaleY,uniLib.Global.isH5?t.alpha=.3:t.alpha=.5,t.blendMode=egret.BlendMode.ADD,manager.LayerManager.instance.addToLayer(t,6)}},t.prototype.onShow=function(){},t.prototype.onHide=function(){},t}(eui.Component);e.FishMainSceneView=t,__reflect(t.prototype,"FishingJoy.FishMainSceneView",["BaseUIView"])}(FishingJoy||(FishingJoy={}));var FishingJoy;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.b=!0,console.error("FishBtnControl constructor"),e}return __extends(i,t),i.prototype.onInit=function(){this._fishBtnView=this._viewCenter.getView(e.FishBtnView),this._fishBtnView.autoShoot.mouseClickHandler=Handler.create(this,this._clickAutoShoot),this._fishBtnView.aimShoot.mouseClickHandler=Handler.create(this,this._clickAimShoot),this._fishBtnView.fastShoot.mouseClickHandler=Handler.create(this,this._clickFastShoot),this._fishBtnView.gmCheckBox.addEventListener(egret.TouchEvent.TOUCH_TAP,this._clickGmCheckBox,this),this._fishBtnView.gmGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this._clickGmGroup,this),this._fishBtnView.exitGameBtn.mouseClickHandler=Handler.create(this,this._onExitBtnClick),this._fishBtnView.sceneSwitching.mouseClickHandler=Handler.create(this,this._changeScene),this._fishBtnView.helpBtn.mouseClickHandler=Handler.create(this,this._clickHelp),EventManager.registerEvent(14,Handler.create(this,this.setShootEff))},i.prototype._clickHelp=function(){UICenter.instance.openUI(1001)},i.prototype._changeScene=function(){(0!=GX.GameLayerManager.sceneLayer.parent.x||0!=GX.GameLayerManager.sceneLayer.parent.y)&&(GX.GameLayerManager.sceneLayer.parent.x=0,GX.GameLayerManager.sceneLayer.parent.y=0)},i.prototype._onExitBtnClick=function(){game.SoundHand.Instance.playButtonClick(),egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.MenuRecovery,this),this._fishBtnView.exitGameBtn.visible=!1,uniLib.Global.dispatchEvent(uniLib.CustomEvent.Show_MenuPanel)},i.prototype._clickAutoShoot=function(){game.SoundHand.Instance.playButtonClick();var t=e.FishingJoyLogic.instance.allBattery.get(Master.instance.uid);if(null!=t){var i=e.DataCenter.instance.accessToProps(1)[0],n=1e3*i.useTime,a=1e3*i.coolTime;if(t._batteryID<i.needBatteryId)return void GX.Tips.showTips("炮台升至"+i.needBatteryId+"才能使用!");if(Master.instance.isAutoShootCooling)return void GX.Tips.showTips("道具正在冷却,无法开启!");if(0!=n&&0!=a){if(Master.instance.isAutoShoot)return void GX.Tips.showTips("道具已使用,无法重复开启!")}else Master.instance.isAutoShoot=!Master.instance.isAutoShoot;if(!Master.instance.isAutoShoot&&0!=n&&0!=a){var o=UICenter.instance.getManager(1e3).getView(e.FishBtnView).BtnGroup;new SkillCDEffect(o,39.5,204.68,60,60,n,a,SHOOT_TYPE.AUTO);Master.instance.isAutoShoot=!0}EventManager.fireEvent(10,[SHOOT_TYPE.AUTO,Master.instance.isAutoShoot])}},i.prototype.MenuRecovery=function(e){e.stageY>105&&(uniLib.Global.dispatchEvent(uniLib.CustomEvent.Remove_MenuPanel),egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.MenuRecovery,this),this._fishBtnView.exitGameBtn.visible=!0)},i.prototype._clickAimShoot=function(){game.SoundHand.Instance.playButtonClick();var t=e.FishingJoyLogic.instance.allBattery.get(Master.instance.uid);if(t){var i=e.DataCenter.instance.accessToProps(3)[0],n=1e3*i.useTime,a=1e3*i.coolTime;if(t._batteryID<i.needBatteryId)return void GX.Tips.showTips("炮台升至"+i.needBatteryId+"才能使用!");if(Master.instance.isAimShootCooling)return void GX.Tips.showTips("道具正在冷却,无法开启!");if(0!=n&&0!=a){if(Master.instance.isAimShoot)return void GX.Tips.showTips("道具已使用,无法重复开启!")}else Master.instance.isAimShoot=!Master.instance.isAimShoot;if(!Master.instance.isAimShoot&&0!=n&&0!=a){var o=UICenter.instance.getManager(1e3).getView(e.FishBtnView).BtnGroup;new SkillCDEffect(o,39.5,120.75,60,60,n,a,SHOOT_TYPE.AIM);Master.instance.isAimShoot=!0}1==Master.instance.isAimShoot&&game.SoundHand.Instance.playAimStart(),EventManager.fireEvent(10,[SHOOT_TYPE.AIM,Master.instance.isAimShoot])}},i.prototype.setShootEff=function(e,t){var i=null;t==SHOOT_TYPE.AIM?i=this._fishBtnView.aimShootEff:t==SHOOT_TYPE.FAST?i=this._fishBtnView.fastShootEff:t==SHOOT_TYPE.AUTO&&(i=this._fishBtnView.autoShootEff),e?i.isPlaying||i.gotoAndPlay(1,-1):i.stop(),i.visible=e},i.prototype._clickFastShoot=function(){game.SoundHand.Instance.playButtonClick();var t=e.FishingJoyLogic.instance.allBattery.get(Master.instance.uid),i=e.DataCenter.instance.accessToProps(2)[0],n=1e3*i.useTime,a=1e3*i.coolTime;if(t._batteryID<i.needBatteryId)return void GX.Tips.showTips("炮台升至"+i.needBatteryId+"才能使用!");if(Master.instance.isFastShootCooling)return void GX.Tips.showTips("道具正在冷却,无法开启!");if(0!=n&&0!=a){if(Master.instance.isFastShoot)return void GX.Tips.showTips("道具已使用,无法重复开启!")}else Master.instance.isFastShoot=!Master.instance.isFastShoot;if(!Master.instance.isFastShoot&&0!=n&&0!=a){var o=UICenter.instance.getManager(1e3).getView(e.FishBtnView).BtnGroup;new SkillCDEffect(o,39.5,38.75,60,60,n,a,SHOOT_TYPE.FAST);Master.instance.isFastShoot=!0}EventManager.fireEvent(10,[SHOOT_TYPE.FAST,Master.instance.isFastShoot])},i.prototype._clickGmCheckBox=function(){this._fishBtnView.gmGroup.visible=this._fishBtnView.gmCheckBox.selected},i.prototype._clickGmGroup=function(e){var t=e.target;t.selected?GM.instance.open(Number(t.name)):GM.instance.close(Number(t.name))},i.prototype.onShow=function(){},i.prototype.dispose=function(){EventManager.unregisterEvent(14,this,this.setShootEff),this._fishBtnView.gmCheckBox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._clickGmCheckBox,this),this._fishBtnView=null,t.prototype.dispose.call(this)},i}(BaseUIControl);e.FishBtnControl=t,__reflect(t.prototype,"FishingJoy.FishBtnControl")}(FishingJoy||(FishingJoy={}));var FishingJoy;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="FishBtnSkin_fish",t}return __extends(t,e),t.prototype.onInit=function(){this.width=uniLib.Global.screenWidth,this.height=uniLib.Global.screenHeight,manager.LayerManager.instance.addToLayer(this,10),this.exitGameBtn=new tool.Button(this.skin.exitGameBtn),this.sceneSwitching=new tool.Button(this.skin.sceneSwitching),this.fastShoot=new tool.Button(this.skin.fastShoot),this.autoShoot=new tool.Button(this.skin.autoShoot),this.aimShoot=new tool.Button(this.skin.aimShoot),this.fastShootEff=UIUtil.creatMovieClip("fastShootEff"),this.fastShootEff.x=this.fastShoot.x+88,this.fastShootEff.y=this.fastShoot.y+233,this.fastShootEff.visible=!1,this.fastShootEff.blendMode=egret.BlendMode.ADD,this.addChild(this.fastShootEff),uniLib.Global.lobbyMode&&(this.sceneSwitching.visible=!1),this.aimShootEff=UIUtil.creatMovieClip("aimShootEff"),this.aimShootEff.x=this.aimShoot.x+88,this.aimShootEff.y=this.aimShoot.y+233,this.aimShootEff.visible=!1,this.aimShootEff.blendMode=egret.BlendMode.ADD,this.addChild(this.aimShootEff),this.autoShootEff=UIUtil.creatMovieClip("autoShootEff"),this.autoShootEff.x=this.autoShoot.x+88,this.autoShootEff.y=this.autoShoot.y+233,this.autoShootEff.visible=!1,this.autoShootEff.blendMode=egret.BlendMode.ADD,this.addChild(this.autoShootEff);for(var e=GM.Type.Min;e<=GM.Type.Max;e++){var t=new eui.CheckBox;t.skinName=GMButtonSkin_fish,t.name=e+"",t.label=GM.instance.typeToString(e),t.width=120,t.height=50,this.gmGroup.addChild(t)}this.gmCheckBox.visible=!1,this.gmGroup.visible=!1,uniLib.BrowersUtils.GetRequest("debug")&&(this.gmCheckBox.visible=!0),this.helpBtn=new tool.Button(this.skin.helpBtn)},t.prototype.updataGoldPoolLabel=function(e,t){this.goldPoolLabel.text="免费奖池："+e+"   普通奖池："+t,this.goldPoolLabel.visible=!0},t.prototype.onShow=function(){},t.prototype.clear=function(){},t.prototype.onHide=function(){},t.prototype.dispose=function(){manager.LayerManager.instance.removeFromLayer(this),GX.GameLayerManager.removeUI(this),this.exitGameBtn.dispose(),this.exitGameBtn=null,this.fastShoot.dispose(),this.fastShoot=null,this.autoShoot.dispose(),this.autoShoot=null,this.aimShoot.dispose(),this.aimShoot=null},t}(eui.Component);e.FishBtnView=t,__reflect(t.prototype,"FishingJoy.FishBtnView",["BaseUIView"])}(FishingJoy||(FishingJoy={}));var ShakeTool=function(){function e(){this.count=0,this.timer=new egret.Timer(1e3)}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.shakeObj=function(e,t,i,n){this.target=e,this.initX=e.x,this.initY=e.y,this.maxDis=n,this.count=t*i,this.rate=i,this.timer.delay=1e3/i,this.timer.repeatCount=this.count,this.timer.addEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this),this.timer.reset(),this.timer.start()},e.prototype.shaking=function(){egret.Tween.removeTweens(this.target),this.target.x=this.initX-this.maxDis+Math.random()*this.maxDis*2,this.target.y=this.initY-this.maxDis+Math.random()*this.maxDis*2,egret.Tween.get(this.target).to({x:this.initX,y:this.initY},999/this.rate)},e.prototype.shakeComplete=function(){this.target&&(egret.Tween.removeTweens(this.target),this.target.x=this.initX,this.target.y=this.initY),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this)},e.prototype.stop=function(){this.shakeComplete()},e}();__reflect(ShakeTool.prototype,"ShakeTool");var SkillCDEffect=function(e){function t(t,i,n,a,o,r,s,l){var h=e.call(this)||this;return h.layeMy=t,h.clickAnimation(t,i,n,a,o,r,s,l),h}return __extends(t,e),t.prototype.clickAnimation=function(e,t,i,n,a,o,r,s){this.initGraphics(e,t,i),this.changeGraphics(o,r,s,t),this.RectMy=new eui.Rect;var l=this.RectMy;e.addChild(l),l.width=n,l.touchEnabled=!1,l.height=a,l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,l.fillAlpha=.7,l.x=t,l.y=i,l.ellipseWidth=7,l.ellipseHeight=7,l.mask=this.shape,this.labelMy=new eui.Label;var h=this.labelMy;e.addChild(h),h.visible=!1,h.touchEnabled=!1,h.text=Math.ceil(o/1e3).toString(),h.anchorOffsetX=h.width/2,h.anchorOffsetY=h.height/2,h.x=t,h.y=i},t.prototype.initGraphics=function(e,t,i){this.shape=new egret.Shape,e.addChild(this.shape),this.shape.anchorOffsetX=this.shape.width/2,this.shape.anchorOffsetY=this.shape.height/2,this.shape.rotation=-90,this.shape.touchEnabled=!1,this.shape.x=t,this.shape.y=i},t.prototype.destroy=function(){this.shape&&this.layeMy.removeChild(this.shape),this.RectMy&&this.layeMy.removeChild(this.RectMy),this.labelMy&&this.layeMy.removeChild(this.labelMy),this.removeChildren()
},t.prototype.coolingTime=function(e,t){0==e?Master.instance.isFastShootCooling=t:1==e?Master.instance.isAimShootCooling=t:2==e&&(Master.instance.isAutoShootCooling=t)},t.prototype.changeGraphics=function(e,t,i,n){function a(e){s.graphics.clear(),s.graphics.beginFill(11592447,1),s.graphics.moveTo(0,0),s.graphics.lineTo(60,0),s.graphics.drawArc(0,0,60,0,e*Math.PI/180,-1==h),s.graphics.lineTo(0,0),s.graphics.endFill()}var o,r,s=this.shape,l=0,h=1,c=FishingJoy.FishingJoyLogic.instance.allBattery.get(Master.instance.uid);if(null!=c){r=e,c.decBtn.enabled=!1;var u=function(e){return a(l),l+=1,l>=360&&(h*=-1,l=0,game.Timer.clearInterval(o),r=t,EventManager.fireEvent(10,[i,!1]),this.coolingTime(i,!0),o=game.Timer.setInterval(p,this,t/360)),!1},p=function(e){return a(l),l+=1,r-=t/360,this.labelMy.visible=!0,this.labelMy.text=Math.ceil(r/1e3).toString(),this.labelMy.anchorOffsetX=this.labelMy.width/2,this.labelMy.anchorOffsetY=this.labelMy.height/2,this.labelMy.x=n,l>=360&&(h=1,l=0,this.destroy(),game.Timer.clearInterval(o),c.decBtn.enabled=!0,this.coolingTime(i,!1)),!1};o=game.Timer.setInterval(u,this,e/360)}},t}(egret.Sprite);__reflect(SkillCDEffect.prototype,"SkillCDEffect");var FishMain=function(e){function t(t){var i=e.call(this,t)||this;return i.isThemeLoadEnd=!1,egret.ImageLoader.crossOrigin="anonymous",game.GameViewConfig.mainMediatorName=uniLib.getQualifiedClassName(game.FishMediator),i._gameInfo&&(game.DataCache.gameInfo=i._gameInfo),t&&t.destroyResOnExit&&(game.DataCache.destroyResOnExit=t.destroyResOnExit),i._gameInfo&&i._gameInfo.extData&&(game.DataCache.platParam=i._gameInfo.extData),game.GameData.iskPoker=!0,game.Config.SeatGame=!1,game.Config.GameSeatNumber=4,game.Config.IsFormatName=!1,game.Config.BetTimeout=30,i}return __extends(t,e),t.prototype.start=function(e){void 0===e&&(e=null);var t={};t.designWidth=1280,t.designHeight=720,t.scaleMode=egret.StageScaleMode.SHOW_ALL,t.debug=!0,uniLib.init(t),RES.setMaxLoadingThread(6);var i=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",i),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},t.prototype.onThemeLoadComplete=function(){this.preLoadEnd()},t.prototype.preLoadEnd=function(){uniLib.UIMgr.instance.showProcessBar(null,2,100,"正在加载游戏资源..."),uniLib.Global.lobbyMode?uniLib.ResLoadMgr.instance.load(game.GameConstant.ResGroup_BY,this.startCreateScene,this.onItemLoadError,this,null):uniLib.ResLoadMgr.instance.load(game.GameConstant.ResGroup_BY,this.startCreateScene,this.onItemLoadError,this,PublicLoadingView)},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.groupName+"..."+e.itemsLoaded+"..."+e.itemsTotal+" has failed to load")},t.prototype.startCreateScene=function(){game.DataCache.stageWidth=uniLib.Global.screenWidth,game.DataCache.stageHight=uniLib.Global.screenHeight,uniLib.UIMgr.instance.hideLoading(),uniLib.SceneMgr.instance.changeScene(game.PokerGameScene),uniLib.Console.addLogforbid((new Cmd.HitFishCmd_CS).GetType()),uniLib.Console.addLogforbid((new Cmd.BetRoomCmd_CS).GetType()),uniLib.Console.addLogforbid((new Cmd.MoneyUpdateCmd_S).GetType()),uniLib.Console.addLogforbid((new Cmd.SpawnFishCmd_S).GetType()),uniLib.Console.addLogforbid((new Cmd.GameTimeSyncCmd_CS).GetType()),uniLib.Global.lobbyMode||(uniLib.Console.log=function(e){for(var t=0,i=uniLib.Console.logforbid;t<i.length;t++){var n=i[t];if(-1!=e.indexOf(n))return}for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];var r=this.getLocalLevel(this.LogLevel);r<=uniLib.LOGLEVEL.DEBUG&&((null==e||void 0==e||"string"==typeof e&&""==e)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),uniLib.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"LOG",e,a):console.log(e,a),r!=this.LogLevel&&this.logToServer(r,e,a))})},t.prototype.resize=function(){this.scaleY=uniLib.Global.screenHeight/game.DataCache.defaultHeight,this.y=(uniLib.Global.screenHeight-game.DataCache.defaultHeight)/2},t}(uniLib.GameDoc);__reflect(FishMain.prototype,"FishMain");var uniLib;!function(e){var t;!function(t){function i(t){e.Console.logforbid.push(t)}t.addLogforbid=i,t.logforbid=[]}(t=e.Console||(e.Console={}))}(uniLib||(uniLib={}));var FishingJoy;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.addControl(e.FishHelpControl),i.addView(e.FishHelpView),i}return __extends(i,t),i}(BaseUIManager);e.FishHelpManager=t,__reflect(t.prototype,"FishingJoy.FishHelpManager")}(FishingJoy||(FishingJoy={}));var FishingJoy;!function(e){var t=function(e){function t(){var t=e.call(this,!0)||this;return t.skinName="FishHelpSkin",t}return __extends(t,e),t.prototype.onInit=function(){this.closeBtn=new tool.Button(this.skin.closeBtn),GX.GameLayerManager.addUIToMain(this)},t.prototype.onShow=function(){},t.prototype.clear=function(){},t.prototype.onHide=function(){this.closeBtn.dispose(),this.closeBtn=null},t.prototype.dispose=function(){GX.GameLayerManager.removeUI(this),e.prototype.dispose.call(this)},t}(e.BasePopPanel);e.FishHelpView=t,__reflect(t.prototype,"FishingJoy.FishHelpView",["BaseUIView"])}(FishingJoy||(FishingJoy={}));var FishingJoy;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.batteryGroup=new SimpleMap,t._index=0,t._isInit=!1,t}return __extends(t,e),t.prototype.onInit=function(){game.RoomData.Instance.addSeatChanged.add(this._addSeatView,this)},t.prototype._addSeatView=function(e){if(!this._isInit&&(1==e.seatId||2==e.seatId||3==e.seatId||4==e.seatId)){var t=game.GameConstant.GetSeatPositionBySeatId(e.seatId),i={};i.bornX=t.x,i.bornY=t.y;var n=gameObject.GameObjectFactory.instance.creatGameObject(2e4,i,5);n.setSeatIndex(e.seatId),n.state=SEAT_STATE.EMPTY,n.name=e.seatId.toString(),n.setSeatData(e),n.setFirePortRotation(e.seatId>2?180:0),this.batteryGroup.set(e.seatId,n),4==this.batteryGroup.length&&(EventManager.fireEvent(12),this._isInit=!0)}},t.prototype.onShow=function(){},t.prototype.clear=function(){},t.prototype.onHide=function(){},t.prototype.dispose=function(){game.RoomData.Instance.addSeatChanged.remove(this._addSeatView,this),this.batteryGroup.clear()},t}(egret.DisplayObjectContainer);e.SeatView=t,__reflect(t.prototype,"FishingJoy.SeatView",["BaseUIView"])}(FishingJoy||(FishingJoy={}));var manager;!function(e){var t=function(){function e(){this.gameObjectFactory=gameObject.GameObjectFactory.instance,this.gameObjectPool=gameObject.GameObjectPool.instance,this.gameObjectConfig=new gameObject.GameObjectConfigParse}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.gameObjectPool.dispose(),this.gameObjectPool=null,this.gameObjectFactory.dispose(),this.gameObjectFactory=null,this.gameObjectConfig.dispose(),this.gameObjectConfig=null},e._instance=null,e}();e.GameObjectManager=t,__reflect(t.prototype,"manager.GameObjectManager")}(manager||(manager={}));var manager;!function(e){var t=function(){function e(){this._layerMap=new SimpleMap;for(var e=1;13>e;e++){var t=new egret.DisplayObjectContainer;t.touchChildren=!1,2==e?t.name="fish":10==e?(t.name="UI",t.touchChildren=!0):4==e?t.name="Bullet":5==e?(t.name="battery",t.touchChildren=!0):8==e?t.name="effect":11==e&&(t.name="pop",t.touchChildren=!0),GX.GameLayerManager.addUIToMain(t),this._layerMap.set(e,t)}EventManager.registerEvent(14,Handler.create(this,this._canTouch))}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.addToLayer=function(e,t){var i=this._layerMap.get(t);null!=i?i.addChild(e):console.assert(!1,"不存在该layerType！")},e.prototype._canTouch=function(e,t){var i=this.getLayer(2);t==SHOOT_TYPE.AIM&&(i.touchChildren=e,i.touchEnabled=e)},e.prototype.removeFromLayer=function(e,t){if(e)if(t){var i=this._layerMap.get(t);null!=i&&i.removeChild(e)}else UIUtil.removeSelf(e);else console.assert(!1,"source为空！")},e.prototype.setLayerRotation=function(e,t){var i=this._layerMap.get(t),n=uniLib.Global.screenWidth,a=uniLib.Global.screenHeight;i.anchorOffsetX=n/2,i.anchorOffsetY=a/2,i.x=n/2,i.y=a/2,i.rotation=e},e.prototype.getLayer=function(e){return this._layerMap.get(e)},e.prototype.dispose=function(){EventManager.unregisterEvent(14,this,this._canTouch),this._layerMap.clear()},e}();e.LayerManager=t,__reflect(t.prototype,"manager.LayerManager")}(manager||(manager={}));var manager;!function(e){var t=function(){function e(){this._resgisterOprDic=new Dictionary,this._operationClsDic=new Dictionary,this._registerID=-1,this._operationClsDic.set(0,operation.MasterBatteryOperation),this._operationClsDic.set(1,operation.BulletOperation),this._operationClsDic.set(2,operation.BulletTrackOperation),this._operationClsDic.set(3,operation.SimpleOperation),this._operationClsDic.set(4,operation.FishOperation),this._operationClsDic.set(5,operation.BatteryOperation),Laya.timer.frameLoop(1,this,this._update)}return e.prototype.leaveQuickly=function(){for(var e=this._resgisterOprDic,t=e.keys,i=0,n=t;i<n.length;i++){var a=n[i],o=e.get(a);if(egret.is(o,"operation.FishOperation")){var r=o,s=r.speed,l=r.spawnTime,h=game.GameTime.serverNow()-l,c=s*h;r.speed=1;var u=c/r.speed;r.spawnTime+=h-u}}},Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype._update=function(){for(var e=this._resgisterOprDic,t=e.keys,i=0,n=t;i<n.length;i++){var a=n[i];e.get(a).enterFrame()}},e.prototype.registerOperation=function(e,t){null==e&&console.assert(!1,"注册对象为空！");var i=this._operationClsDic.get(t);null==i&&console.assert(!1,"operation 未被注册！");var n=new i;return n.operationType=t,n.register(e),this._registerID++,this._resgisterOprDic.set(this._registerID,n),this._registerID},e.prototype.unregisterOperation=function(e){if(-1!=e){var t=this._resgisterOprDic.get(e);null!=t&&(t.unregister(),t=null,this._resgisterOprDic.remove(e))}},e.prototype.dispose=function(){Laya.timer.clear(this,this._update),this._resgisterOprDic.clear(),this._resgisterOprDic=null,this._operationClsDic.clear(),this._operationClsDic=null},e}();e.OperationManager=t,__reflect(t.prototype,"manager.OperationManager")}(manager||(manager={}));var table;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"table.TableBatteryConfig"},e}();e.TableBatteryConfig=t,__reflect(t.prototype,"table.TableBatteryConfig")}(table||(table={}));var operation;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.POINT_DIS=20,t}return __extends(t,e),t.prototype.register=function(e){this._gameObj=e,this._gameObj.seatdata.lockChanged.add(this._aimFish,this),this._gameObj.seatdata.onlineChanged.add(this._clear,this),this._initPoint(),EventManager.registerEvent(12,Handler.create(this,this._rotationSeat),1)},t.prototype._rotationSeat=function(){var e=UIUtil.localToGlobal(this._gameObj.focus),t=e[0],i=e[1],n=manager.LayerManager.instance.getLayer(2),a=UIUtil.localToGlobal(n,t,i);a[0],a[1];this._smallPoint.x=t,this._smallPoint.y=i},t.prototype._initPoint=function(){this._aimBig=new CustomImage,this._aimBig.source="aimBig",this._aimBig.visible=!1,manager.LayerManager.instance.addToLayer(this._aimBig,7);var e=UIUtil.localToGlobal(this._gameObj.focus),t=e[0],i=e[1],n=new CustomImage;n.source="aimPoint",n.visible=!1,n.fillMode=egret.BitmapFillMode.REPEAT,n.x=t,n.y=i,manager.LayerManager.instance.addToLayer(n,7),n.anchorOffsetY=n.height/2,n.anchorOffsetX=-60,this._smallPoint=n},t.prototype._clear=function(){var e=this._gameObj.seatdata;e.onlineState==Cmd.OnlineState.OnlineState_Offline&&(console.error(" this._gameObj.seatdata"+e.user.uid+"断线了"),this._gameObj.isAimShoot=!1,this._clearAimEff(),Laya.timer.clear(this,this._drawAimEff),this._targetFish=null,this._gameObj.targetFishId=-1)},t.prototype._aimFish=function(e){var t=e.user?e.user.uid:null;if(e.lock){Master.instance.uid==t&&(Laya.timer.clear(this,this._drawAimEff),Master.instance.aimFishServelID=e.lockFishId,Master.instance.isAimShoot=!0,Master.instance.prohibitShoot=!1,EventManager.fireEvent(14,[!0,SHOOT_TYPE.AIM])),this._gameObj.isAimShoot=!0;var i=FishingJoy.FishingJoyLogic.instance.inViewFishes.get(e.lockFishId);i&&i.isAlive&&i.isInView?(this._targetFish=i,this._gameObj.targetFishId=e.lockFishId,Laya.timer.frameLoop(1,this,this._drawAimEff)):this._waitAimFish()}else Master.instance.uid==t&&(Master.instance.aimFishServelID=0/0,Master.instance.isAimShoot=!1,EventManager.fireEvent(14,[!1,SHOOT_TYPE.AIM])),this._gameObj.isAimShoot=!1,this._clearAimEff(),Laya.timer.clear(this,this._drawAimEff),this._targetFish=null,this._gameObj.targetFishId=-1},t.prototype._isMine=function(e){return this._gameObj.user&&e==this._gameObj.user.uid?!0:!1},t.prototype._drawAimEff=function(){var e=this._targetFish;if(this._gameObj.isAimShoot=!0,e&&e.isAlive&&e.isInView)if(this._targetFish.isAccurateCollider)for(var t=0;t<e.colliderAry.length;t++){var i=e.colliderAry[t],n=UIUtil.localToGlobal(i),a=n[0],o=n[1];if(UIUtil.inAimView(a,o))return this._gameObj.curRotation=UIUtil.calculateBatteryRotation(this._gameObj,a,o),this._gameObj.setFirePortRotation(this._gameObj.curRotation),void this._draw(a,o)}else{var r=UIUtil.localToGlobal(this._targetFish),a=r[0],o=r[1];if(UIUtil.inAimView(a,o))return this._gameObj.curRotation=UIUtil.calculateBatteryRotation(this._gameObj,a,o),this._gameObj.setFirePortRotation(this._gameObj.curRotation),void this._draw(a,o)}Laya.timer.clear(this,this._drawAimEff),this._waitAimFish()},t.prototype._waitAimFish=function(){this._gameObj.targetFishId=-1,this._gameObj.isAimShoot=!1,this._gameObj.user&&this._gameObj.user.uid==Master.instance.uid?EventManager.fireEvent(17):this._clearAimEff()},t.prototype._sendAimMsg=function(e,t){var i=new Cmd.ActionCmd_CS;i.act=new Cmd.Action,i.act.uid=Master.instance.uid,e?(i.act.op=Cmd.Operation.Lock,i.act.value=t):i.act.op=Cmd.Operation.Unlock,game.PokerFunction.tcpSend(i)},t.prototype._clearAimEff=function(){this._smallPoint&&(this._smallPoint.visible=!1),this._aimBig&&(this._aimBig.visible=!1)},t.prototype._calculateRotation=function(e,t){var i=UIUtil.localToGlobal(this._gameObj.focus),n=i[0],a=i[1];this._gameObj.curRotation=GX.getRadianByPoint({x:e,y:t},{x:n,y:a})},t.prototype._draw=function(e,t){var i=this._smallPoint,n=this._aimBig;i.visible=!0,n.visible=!0,n.x=e,n.y=t,n.rotation=this._targetFish.rotation;var a=[i.x,i.y],o=a[0],r=a[1],s=Math.sqrt((e-o)*(e-o)+(t-r)*(t-r));s=20*(Math.ceil(s/20)-5),0>s&&(s=0);var l;l=1==Master.instance.seatID||2==Master.instance.seatID?this._gameObj.curRotation-90:this._gameObj.curRotation+90,i.width=s,i.rotation=l},t.prototype.unregister=function(){this._gameObj.seatdata.lockChanged.remove(this._aimFish,this),this._gameObj.seatdata.onlineChanged.remove(this._clear,this),this._gameObj.isAimShoot=!1,this._clearAimEff(),manager.LayerManager.instance.removeFromLayer(this._smallPoint,7),manager.LayerManager.instance.removeFromLayer(this._aimBig,7),Laya.timer.clear(this,this._drawAimEff),this._targetFish=null,this._gameObj.targetFishId=-1,this._gameObj=null},t}(e.BaseOperation);e.BatteryOperation=t,__reflect(t.prototype,"operation.BatteryOperation")}(operation||(operation={}));var table;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"table.TableBulletConfig"},e}();e.TableBulletConfig=t,__reflect(t.prototype,"table.TableBulletConfig"),function(e){var t=function(){function e(){}return e}();e.ColliderAryItem=t,__reflect(t.prototype,"table.TableBulletConfig.ColliderAryItem")}(t=e.TableBulletConfig||(e.TableBulletConfig={})),function(e){var t=function(){function e(){}return e}();e.ImageAryItem=t,__reflect(t.prototype,"table.TableBulletConfig.ImageAryItem")}(t=e.TableBulletConfig||(e.TableBulletConfig={}))}(table||(table={}));var operation;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.register=function(t){e.prototype.register.call(this,t);var i=t.varsData;this.targetFish=i.targetFish},t.prototype.enterFrame=function(){var t=this._gameObj,i=this.targetFish;if(i&&i.isAlive&&i.isInView){var n=(manager.LayerManager.instance.getLayer(2),[-1,-1]),a=n[0],o=n[1],r=!1;if(i.isAccurateCollider)for(var s=0;s<i.colliderAry.length;s++){var l=i.colliderAry[s];if(_=UIUtil.getGlobePos(l),a=_[0],o=_[1],UIUtil.inAimView(a,o)){r=!0;break}}else y=UIUtil.getGlobePos(i),a=y[0],o=y[1],UIUtil.inAimView(a,o)&&(r=!0);if(r){var h=GX.getRadianByPoint({x:this.bornX,y:this.bornY},{x:a,y:o}),c=GX.getDistanceByPoint({x:this.bornX,y:this.bornY},{x:a,y:o}),u=game.GameTime.serverNow(),p=u-this.bornTime,g=p*(this._speed/1e3),d=g/c*(a-this.bornX),f=g/c*(o-this.bornY);t.x=this.bornX+d,t.y=this.bornY+f,t.rotation=h}else t.targetFish=null,e.prototype.enterFrame.call(this)}else t.targetFish=null,e.prototype.enterFrame.call(this);var _,y},t.prototype.unregister=function(){e.prototype.unregister.call(this),this.targetFish=null},t}(e.BulletOperation);e.BulletTrackOperation=t,__reflect(t.prototype,"operation.BulletTrackOperation")}(operation||(operation={}));var operation;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.gmShape=[],t.pathIndex=0,t.endRotation=null,t}return __extends(t,e),t.prototype.register=function(e){this.pathIndex=0,this._gameObj=e;var i=e.varsData,n=i.pathId,a=table.TableFishPath.getFishPath(n);this.pathConfig=a.pathConfig,t.isPathLeavePoint[n]||(t.isPathLeavePoint[n]=!0,this.leaveScenePoint()),this.spawnTime=i.spawnTime,this.speed=e.speed,this.fishSubscript=i.serveID,this.offsetX=null==i.offsetX?0:i.offsetX,this.offsetY=null==i.offsetY?0:i.offsetY;var o=this.pathConfig.first(),r=this.pathConfig[1];o.angle-90;this.curPath=o,this.nextPath=r,e.rotation=-1;var s=gameObject.GameObjectConfigParse.configDic.get(e.sign),l=s.table;if(l.specialFish){var h=game.GameTime.serverNow()+15e3,c=this.pathConfig.last(),u=i.spawnTime+c.distTotal/this.speed-5e3,p=u-h;p>0&&(this.specialTimer=game.Timer.setTimeout(function(){2001==l.sign?FishingJoy.FishingJoyLogic.instance.onFreeGame(2,!0):2002==l.sign&&FishingJoy.FishingJoyLogic.instance.onFreeGame(4,!0)},this,p))}},t.prototype.leaveScenePoint=function(){var e=this.pathConfig.last(),t=this.pathConfig[this.pathConfig.length-2],i=t.distNext,n=new table.TableFishPath.PathConfigItem,a=(this._gameObj.MoivePlayer,this._gameObj.sign),o=2002==a||2001==a?700:300;n.x=t.x+(e.x-t.x)/i*(i+o),n.y=t.y+(e.y-t.y)/i*(i+o);var r=GX.getDistanceByPoint({x:e.x,y:e.y},{x:n.x,y:n.y}),s=e.distTotal+r;e.distNext=r,n.angle=e.angle,n.distNext=0,n.distTotal=s,this.pathConfig.push(n)},t.prototype.enterFrame=function(){var e=this._gameObj,t=game.GameTime.serverNow()-this.spawnTime;if(0>t)return e.x=-1e3,void(e.y=-1e3);var i=t*this.speed,n=this.pathConfig,a=n.last();if(i>a.distTotal){if(2001==e.sign||2002==e.sign){e.varsData;FishingJoy.FishingJoyLogic.instance.changeScene(null,null,!0,!0),FishingJoy.FishingJoyLogic.instance.freePromptCloses()}return void gameObject.GameObjectFactory.instance.recoverGameObject(e)}if(i>this.nextPath.distTotal)for(var o=n.length,r=this.pathIndex;o>r;r++)if(n[r].distTotal>i){this.pathIndex=r,this.nextPath=n[r],this.curPath=n[r-1];break}var s=this.curPath,l=this.nextPath;s=null==s?a:s,l=null==l?a:l;var h=s.distNext,c=i-s.distTotal,u=c/h*(l.x-s.x),p=c/h*(l.y-s.y);e.x=s.x+u-this.offsetX,e.y=s.y+p-this.offsetY;var g=s.angle;2001==e.sign?g>200?(e.scaleY=Master.instance.isRotation?1:-1,g=270):(e.scaleY=Master.instance.isRotation?-1:1,g=90):2002==e.sign&&(g=g>200?360:180);var d=g-90;this.smoothRotation(d)},t.prototype.smoothRotation=function(e){var t=this._gameObj;if(-1==t.rotation)return void(t.rotation=e);if(this.endRotation!=e){var i=t.rotation,n=e-i;-180>n?e+=360:n>180&&(e-=360),egret.Tween.removeTweens(t),egret.Tween.get(t).to({rotation:e},500).call(function(){egret.Tween.removeTweens(t)}),this.endRotation=e}},t.prototype.unregister=function(){egret.Tween.removeTweens(this._gameObj),game.Timer.clearTimeout(this.specialTimer),this.curPath=null,this.nextPath=null,this._gameObj=null},t.isPathLeavePoint={},t}(e.BaseOperation);e.FishOperation=t,__reflect(t.prototype,"operation.FishOperation")}(operation||(operation={}));var operation;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._isCooling=!1,t._isClickEffCooling=!1,t._isEbbTide=!1,t}return __extends(t,e),t.prototype.register=function(e){this._gameObj=e,uniLib.Global.isH5?PCMouseHelper.changeCursor():this._initCursor(),EventManager.registerEvent(10,Handler.create(this,this._changeShootType)),EventManager.registerEvent(11,Handler.create(this,this._aimFish)),EventManager.registerEvent(17,Handler.create(this,this._waitAim)),EventManager.registerEvent(19,Handler.create(this,this._commonShoot)),EventManager.registerEvent(20,Handler.create(this,this._onEbbTide)),e.curRotation=this._gameObj.rotation,this._bg=UICenter.instance.getManager(1e3).getView(FishingJoy.FishMainSceneView).backGround0,this._bg.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._starDrag,this),this._bg.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this._outsideDrag,this),this._bg.addEventListener(egret.TouchEvent.TOUCH_END,this._endDrag,this),this._curSign=10005;var t=gameObject.GameObjectConfigParse.getConfigBySign(this._curSign);this._curInterval=t.initOnceData.interval,EventManager.registerEvent(18,Handler.create(this,this._checkSpecialFish))},t.prototype._checkSpecialFish=function(e,t){t?Laya.timer.loop(200,this,this._checkAim,[e]):Laya.timer.clear(this,this._checkAim)},t.prototype._onEbbTide=function(){var e=this;Master.instance.isAimShoot&&Master.instance.isAutoShoot?Master.instance.prohibitShoot=!0:(this._isEbbTide=!0,Laya.timer.once(2e3,this,function(){e._isEbbTide=!1})),Master.instance.isAimShoot&&this._waitAim(2e3)},t.prototype._checkAim=function(e){e&&e.isAlive&&e.isInView?Master.instance.isAimShoot&&(UIUtil.isCanAim(e)?Master.instance.aimFishServelID==e.servelID||GlobeVars.AimSpcialFish||(this._aimFish(e),GlobeVars.AimSpcialFish=!0):GlobeVars.AimSpcialFish=!1):Laya.timer.clear(this,this._checkAim)},t.prototype._waitAim=function(e){void 0===e&&(e=500),this._changeShootType(SHOOT_TYPE.AIM,!1),Laya.timer.loop(e,this,this._findTargetFish)},t.prototype._initCursor=function(){this._cursorImg=new CustomImage,this._cursorImg.source="cursor1",this._cursorImg.x=uniLib.Global.screenWidth/2,this._cursorImg.y=uniLib.Global.screenHeight/2,manager.LayerManager.instance.addToLayer(this._cursorImg,12)},t.prototype._aimFish=function(e){Master.instance.isAimShoot&&this._sendAimMsg(!0,e.servelID)},t.prototype._changeShootType=function(e,t){if(e==SHOOT_TYPE.FAST){var i=gameObject.GameObjectConfigParse.getConfigBySign(this._curSign);t?this._curInterval=i.initOnceData.fastInterval:this._curInterval=i.initOnceData.interval,Master.instance.isFastShoot=t,EventManager.fireEvent(14,[t,e])}else if(e==SHOOT_TYPE.AIM){if(t){var n=FishingJoy.FishingJoyLogic.instance.findMostValuableFish();null!=n?this._sendAimMsg(!0,n.servelID):Laya.timer.loop(400,this,this._findTargetFish)}else this._sendAimMsg(!1,-1);Master.instance.isAimShoot=t}else e==SHOOT_TYPE.AUTO&&(t?Laya.timer.frameLoop(1,this,this._autoOperation):Laya.timer.clear(this,this._autoOperation),Master.instance.isAutoShoot=t,EventManager.fireEvent(14,[t,e]));Master.instance.isAutoShoot||Master.instance.isAutoShoot||Master.instance.isAimShoot?Master.instance.isNormalShoot=!1:Master.instance.isNormalShoot=!0},t.prototype._findTargetFish=function(){var e=FishingJoy.FishingJoyLogic.instance.findMostValuableFish();null!=e&&(Laya.timer.clear(this,this._findTargetFish),this._sendAimMsg(!0,e.servelID))},t.prototype._sendAimMsg=function(e,t){var i=new Cmd.ActionCmd_CS;i.act=new Cmd.Action,i.act.uid=Master.instance.uid,e?(i.act.op=Cmd.Operation.Lock,i.act.value=t):i.act.op=Cmd.Operation.Unlock,game.PokerFunction.tcpSend(i)},t.prototype._starDrag=function(e){var t=this._gameObj;if(t&&t.user){if(t.user.point<this._gameObj._batteryID)return void GX.Tips.showTips("金币不足!");this._cursorImg&&(this._cursorImg.x=e.stageX,this._cursorImg.y=e.stageY),this.clickAnimation(e),Master.instance.isAutoShoot?t.curRotation=UIUtil.calculateBatteryRotation(t,e.stageX,e.stageY):(Master.instance.isAimShoot||Master.instance.isFastShoot||Master.instance.isNormalShoot)&&(t.curRotation=UIUtil.calculateBatteryRotation(t,e.stageX,e.stageY),this._commonShoot(),Laya.timer.frameLoop(2,this,this._commonShoot)),Master.instance.isAimShoot||this._bg.addEventListener(egret.TouchEvent.TOUCH_MOVE,this._onDrag,this)}},t.prototype.clickAnimation=function(e){var t=UICenter.instance.getManager(1e3).getView(FishingJoy.FishMainSceneView),i=Pool.getItemByCreateFun(Pool.clickingWaterWave,Handler.create(this,this._creatClickingWaterWave,null,!0));UIUtil.movPlayOnce(t,i,e.stageX,e.stageY,2,2,Handler.create(this,function(){Pool.recover(Pool.clickingWaterWave,i)},null,!0))},t.prototype._creatClickingWaterWave=function(){var e=UIUtil.creatMovieClip("clickingWaterWave");return e.blendMode=egret.BlendMode.ADD,e},t.prototype._outsideDrag=function(e){Laya.timer.clear(this,this._commonShoot),this._bg.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this._onDrag,this)},t.prototype._onDrag=function(e){var t=this;this._gameObj.curRotation=UIUtil.calculateBatteryRotation(this._gameObj,e.stageX,e.stageY),this._cursorImg&&(this._cursorImg.x=e.stageX,this._cursorImg.y=e.stageY),this._isClickEffCooling||(this._isClickEffCooling=!0,Laya.timer.once(100,this,function(){t._isClickEffCooling=!1}),this.clickAnimation(e))},t.prototype._endDrag=function(e){this._cursorImg&&(this._cursorImg.x=e.stageX,this._cursorImg.y=e.stageY),Laya.timer.clear(this,this._commonShoot),this._bg.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this._onDrag,this)},t.prototype._fireOneBullet=function(e){this._sendMsg()},t.prototype._autoOperation=function(){this._commonShoot()},t.prototype._commonShoot=function(){var e=this;this._isEbbTide||Master.instance.prohibitShoot||this._isCooling||(this._isCooling=!0,Laya.timer.once(this._curInterval,this,function(){e._isCooling=!1}),this._fireOneBullet(10005))},t.prototype._sendMsg=function(){if(!FishingJoy.DataCenter.instance.isSwitchFish&&this._gameObj&&this._gameObj.user){this._gameObj.user.point<this._gameObj._batteryID&&(Laya.timer.clear(this,this._autoOperation),Laya.timer.clear(this,this._commonShoot),EventManager.fireEvent(10,[SHOOT_TYPE.AUTO,!1]),EventManager.fireEvent(10,[SHOOT_TYPE.AIM,!1]),EventManager.fireEvent(10,[SHOOT_TYPE.FAST,!1]),this._bg.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this._onDrag,this));var e=new Cmd.BetRoomCmd_CS;e.bulletinfo=new Cmd.BulletInfo,e.bet=new Cmd.DoorChips,e.bulletinfo.angle=this._gameObj.curRotation,e.bet.chips=FishingJoy.DataCenter.instance.getBatterIndex(this._gameObj._batteryID)+1,game.PokerFunction.tcpSend(e)}},t.prototype.unregister=function(){this._bg.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this._starDrag,this),this._bg.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this._outsideDrag,this),this._bg.removeEventListener(egret.TouchEvent.TOUCH_END,this._endDrag,this),this._bg.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this._onDrag,this),uniLib.Global.isH5?PCMouseHelper.recover():(manager.LayerManager.instance.removeFromLayer(this._cursorImg,12),this._cursorImg=null),EventManager.unregisterEvent(19,this,this._commonShoot),EventManager.unregisterEvent(11,this,this._aimFish),EventManager.unregisterEvent(10,this,this._changeShootType),EventManager.unregisterEvent(17,this,this._waitAim),EventManager.unregisterEvent(18,this,this._checkSpecialFish),EventManager.unregisterEvent(20,this,this._onEbbTide),this._gameObj=null},t}(e.BaseOperation);e.MasterBatteryOperation=t,__reflect(t.prototype,"operation.MasterBatteryOperation")}(operation||(operation={}));var operation;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.register=function(e){this._gameObj=e;MathUtil.random(5e3,15e3)},t.prototype._onTweenComplete=function(){this._gameObj&&this._gameObj instanceof gameObject.Fish&&this._gameObj.isAlive&&gameObject.GameObjectFactory.instance.recoverGameObject(this._gameObj)},t.prototype.unregister=function(){egret.Tween.removeTweens(this._gameObj),this._gameObj=null},t}(e.BaseOperation);e.SimpleOperation=t,__reflect(t.prototype,"operation.SimpleOperation")}(operation||(operation={}));var FishingJoy;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onInit=function(){this._view=this._viewCenter.getView("")},t.prototype.onShow=function(){},t.prototype.dispose=function(){this._view=null,e.prototype.dispose.call(this)},t}(BaseUIControl);e.TempletControl=t,__reflect(t.prototype,"FishingJoy.TempletControl")}(FishingJoy||(FishingJoy={}));var FishingJoy;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(BaseUIManager);e.TempletManager=t,__reflect(t.prototype,"FishingJoy.TempletManager")}(FishingJoy||(FishingJoy={}));var FishingJoy;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="",t}return __extends(t,e),t.prototype.onInit=function(){GX.GameLayerManager.addUIToMain(this)},t.prototype.onShow=function(){},t.prototype.clear=function(){},t.prototype.onHide=function(){},t.prototype.dispose=function(){GX.GameLayerManager.removeUI(this),e.prototype.dispose.call(this)},t}(e.BasePopPanel);e.TempletView=t,__reflect(t.prototype,"FishingJoy.TempletView",["BaseUIView"])}(FishingJoy||(FishingJoy={}));var Laya=function(){function e(){}return e.init=function(){e.timer=new Timer},e.timer=null,e}();__reflect(Laya.prototype,"Laya");var game;!function(e){var t=function(t){function i(e){var n=t.call(this,i.NAME,e)||this;return FishingJoy.GameCenter.instance,UICenter.instance.openUI(1e3),n.initGame(),n}return __extends(i,t),i.prototype.uiHandle=function(e){},i.prototype.listNotificationInterests=function(){return[e.MahjongFourFacadeConst.NOTIFY_COMMON_CHAT]},i.prototype.handleNotification=function(e){},i.prototype.initGame=function(){this.facade.sendNotification(e.MahjongFourFacadeConst.SEND_DATA,null,e.DataRequestCommand.CONNECT_GAME_SERVER)},i.prototype.onRemove=function(){t.prototype.onRemove.call(this)},i.NAME="FishMediator",i}(puremvc.Mediator);e.FishMediator=t,__reflect(t.prototype,"game.FishMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.start=function(){t.prototype.start.call(this),egret.MainContext.instance.stage.setContentSize(1280,720),e.GameInfo.topLayer=this.mainUILayer,GX.GameLayerManager.sceneLayer=this.uiLayer,GX.GameLayerManager.mainLayer=this.effectLayer,GX.GameLayerManager.effectLayer=this.topLayer,GX.GameLayerManager.popLayer=this.mainUILayer,GX.GameLayerManager.maskLayer=this.maskLayer,GX.GameLayerManager.loadLayer=this.tipsLayer,e.MahJongFourFacede.getInstance().startUp(this)},i.prototype.destroy=function(){t.prototype.destroy.call(this),e.MahJongFourFacede.getInstance().sendNotification(e.MahjongFourFacadeConst.DESTORY)},i.prototype.initPositionData=function(){e.DataCache.defaultWidth!=uniLib.Global.screenWidth&&(e.DataCache.defaultWidth=uniLib.Global.screenWidth,e.DataCache.defaultHeight=uniLib.Global.screenHeight)},i}(uniLib.GameScene);e.PokerGameScene=t,__reflect(t.prototype,"game.PokerGameScene")}(game||(game={}));var table;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"table.TableFishBoom"},e}();e.TableFishBoom=t,__reflect(t.prototype,"table.TableFishBoom")}(table||(table={}));var table;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"table.TableFishConfig"
},e}();e.TableFishConfig=t,__reflect(t.prototype,"table.TableFishConfig"),function(e){var t=function(){function e(){}return e}();e.ColliderAryItem=t,__reflect(t.prototype,"table.TableFishConfig.ColliderAryItem")}(t=e.TableFishConfig||(e.TableFishConfig={})),function(e){var t=function(){function e(){}return e}();e.MovieClipAryItem=t,__reflect(t.prototype,"table.TableFishConfig.MovieClipAryItem")}(t=e.TableFishConfig||(e.TableFishConfig={})),function(e){var t=function(){function e(){}return e}();e.AnchorOffsetItem=t,__reflect(t.prototype,"table.TableFishConfig.AnchorOffsetItem")}(t=e.TableFishConfig||(e.TableFishConfig={}))}(table||(table={}));var table;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"table.TableFishPath"},e}();e.TableFishPath=t,__reflect(t.prototype,"table.TableFishPath"),function(e){var t=function(){function e(){}return e}();e.PathConfigItem=t,__reflect(t.prototype,"table.TableFishPath.PathConfigItem")}(t=e.TableFishPath||(e.TableFishPath={}))}(table||(table={}));var Map=function(){function e(){this._hashKeys=new Dictionary,this._keys=new Array,this._datas=new Dictionary}return e.prototype.dispose=function(){this.clear(),this._hashKeys=null,this._datas=null,this._keys=null},e.prototype.addValue=function(e,t){return this.isExist(e)?void(this._datas[e]=t):(this._hashKeys[e]=e,this._datas[e]=t,void this._keys.push(e))},e.prototype.removeValue=function(e){for(var t=this._keys.length,i=0;t>i;i++){var n=this._keys[i];if(n==e)return this._keys.splice(i,1),delete this._datas[e],void delete this._hashKeys[e]}},e.prototype.isExist=function(e){return null==e?!1:null!=this._hashKeys[e]},e.prototype.clear=function(){for(var e=this._keys.length,t=0;e>t;++t){var i=this._keys[t];null!=i&&(delete this._datas[i],delete this._hashKeys[i])}this._keys.splice(0,this._keys.length)},Object.defineProperty(e.prototype,"length",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.getKey=function(e){if(e>=this._keys.length)return null;var t=this._keys[e];return t},e.prototype.getKeys=function(){for(var e=new Array,t=this._keys.length,i=0;t>i;++i){var n=this._keys[i];null!=n&&e.push(n)}return e},e.prototype.getValueByKey=function(e){return this.isExist(e)?this._datas[e]:null},e.prototype.getValueByIndex=function(e){if(e>=this._keys.length)return null;var t=this._keys[e];return this._datas[t]},e}();__reflect(Map.prototype,"Map");var ResData=function(){function e(e,t){this.url=e,this.resType=t}return e}();__reflect(ResData.prototype,"ResData");var UICenter=function(e){function t(){var t=e.call(this)||this;return t.addManager(1e3,FishingJoy.FishMainSceneManager),t.addManager(1001,FishingJoy.FishHelpManager),t}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t._instance=null,t}(BaseUICenter);__reflect(UICenter.prototype,"UICenter");var UIControlCenter=function(){function e(e,t,i){this._ui=null,this._dataCenter=null,this._viewCenter=null,this._controls=new Map,this._ui=e,this._dataCenter=t,this._viewCenter=i}return e.prototype.dispose=function(){if(null!=this._controls){for(var e=0;e<this._controls.length;++e){var t=this._controls.getValueByIndex(e);null!=t&&(t.dispose(),t=null)}this._controls.clear(),this._controls=null}this._viewCenter=null,this._dataCenter=null,this._ui=null},e.prototype.onInit=function(){var e=null,t=0;for(t=0;t<this._controls.length;++t){var i=this._controls.getKey(t);e=new i,e.init(this._dataCenter,this._viewCenter),this._controls.addValue(i,e)}for(t=0;t<this._controls.length;++t)e=this._controls.getValueByIndex(t),null!=e&&e.onInit()},e.prototype.onShow=function(){for(var e=0;e<this._controls.length;++e){var t=this._controls.getValueByIndex(e);null!=t&&t.onShow()}},e.prototype.onOpenAgain=function(){for(var e=0;e<this._controls.length;++e){var t=this._controls.getValueByIndex(e);null!=t&&t.onOpenAgain()}},e.prototype.onHide=function(){for(var e=0;e<this._controls.length;++e){var t=this._controls.getValueByIndex(e);null!=t&&(t.onHide(),t.dispose(),this._controls.addValue(this._controls.getKey(e),null))}},e.prototype.addControl=function(e){null!=e&&this._controls.addValue(e,null)},e.prototype.getControl=function(e){return null==this._controls?null:this._controls.getValueByKey(e)},e.prototype.isExist=function(e){return null==this._controls?!1:this._controls.isExist(e)},e}();__reflect(UIControlCenter.prototype,"UIControlCenter");var UIDataCenter=function(){function e(){this._datas=new Map,this._isLoading=!1,this._isLoaded=!1,this._isOpened=!1,this._openParam=null}return Object.defineProperty(e.prototype,"openParam",{get:function(){return this._openParam},set:function(e){this._openParam=e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(null!=this._datas){for(var e=0;e<this._datas.length;e++){var t=this._datas.getValueByIndex(e);null!=t&&(t.dispose(),t=null)}this._datas.dispose(),this._datas=null}this._openParam=null},e.prototype.onInit=function(){for(var e=0;e<this._datas.length;e++){var t=this._datas.getKey(e);this._datas.addValue(t,new t)}},e.prototype.onShow=function(){},e.prototype.onHide=function(){if(null!=this._datas)for(var e=0;e<this._datas.length;e++){var t=this._datas.getValueByIndex(e);null!=t&&(t.dispose(),t=null,this._datas.addValue(this._datas.getKey(e),null))}},e.prototype.addData=function(e){null!=e&&this._datas.addValue(e,null)},e.prototype.getData=function(e){return null==this._datas?null:this._datas.getValueByKey(e)},e.prototype.isExist=function(e){return null==this._datas?!1:this._datas.isExist(e)},Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},set:function(e){this._isLoading=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return this._isLoaded},set:function(e){this._isLoaded=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpened",{get:function(){return this._isOpened},set:function(e){this._isOpened=e},enumerable:!0,configurable:!0}),e}();__reflect(UIDataCenter.prototype,"UIDataCenter");var UIOpenParam=function(){function e(){}return e.prototype.reset=function(){},e.prototype.dispose=function(){},e}();__reflect(UIOpenParam.prototype,"UIOpenParam");var UIViewCenter=function(){function e(){this._views=new Map}return e.prototype.dispose=function(){if(null!=this._views){for(var e=0;e<this._views.length;e++){var t=this._views.getValueByIndex(e);null!=t&&(t.dispose(),t=null)}this._views.clear(),this._views=null}},e.prototype.onInit=function(){var e=0;for(e=0;e<this._views.length;e++){var t=this._views.getKey(e);this._views.addValue(t,new t)}for(e=0;e<this._views.length;e++){var i=this._views.getValueByIndex(e);null!=i&&i.onInit()}},e.prototype.onShow=function(){for(var e=0;e<this._views.length;e++){var t=this._views.getValueByIndex(e);null!=t&&t.onShow()}},e.prototype.onHide=function(){for(var e=0;e<this._views.length;e++){var t=this._views.getValueByIndex(e);null!=t&&(t.onHide(),t.dispose(),this._views.addValue(this._views.getKey(e),null))}},e.prototype.addView=function(e){null!=e&&this._views.addValue(e,null)},e.prototype.getView=function(e){return null==this._views?null:this._views.getValueByKey(e)},e.prototype.isExist=function(e){return null==this._views?!1:this._views.isExist(e)},Object.defineProperty(e.prototype,"viewLength",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),e.prototype.getViewByIndex=function(e){return this._views.getValueByIndex(e)},e}();__reflect(UIViewCenter.prototype,"UIViewCenter"),table.TableFishPath.instance=function(){if(null==table.TableFishPath.$instance){for(var e=loadTable("TableFishPath_json"),t={},i=0,n=e;i<n.length;i++){var a=n[i];t[a.id]=a}table.TableFishPath.$instance=t}return table.TableFishPath.$instance},table.TableFishPath.getFishPath=function(e){return table.TableFishPath.instance()[e]},table.TableBulletConfig.instance=function(){return null==table.TableBulletConfig.$instance&&(table.TableBulletConfig.$instance=loadTable("TableBulletConfig_json")),table.TableBulletConfig.$instance},table.TableFishConfig.instance=function(){return null==table.TableFishConfig.$instance&&(table.TableFishConfig.$instance=loadTable("TableFishConfig_json")),table.TableFishConfig.$instance},table.TableBatteryConfig.instance=function(){return null==table.TableBatteryConfig.$instance&&(table.TableBatteryConfig.$instance=loadTable("TableBatteryConfig_json")),table.TableBatteryConfig.$instance},table.TableBaseRuleConfigList.instance=function(){return null==table.TableBaseRuleConfigList.$instance&&(table.TableBaseRuleConfigList.$instance=loadTable("TableBaseRuleConfigList_json")),table.TableBaseRuleConfigList.$instance};var table;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"table.TableFishTeamConfig"},e}();e.TableFishTeamConfig=t,__reflect(t.prototype,"table.TableFishTeamConfig"),function(e){var t=function(){function e(){}return e}();e.FishTeamItem=t,__reflect(t.prototype,"table.TableFishTeamConfig.FishTeamItem")}(t=e.TableFishTeamConfig||(e.TableFishTeamConfig={}))}(table||(table={}));var tool;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;if(i._dataDic=new SimpleMap,t)for(var n=0;n<t.length;n++){var a=new CustomImage;a.source=t[n].sourceName,t[n].offsetX&&(a.x=t[n].offsetX),t[n].offsetY&&(a.y=t[n].offsetY),t[n].scaleX&&(a.scaleX=t[n].scaleX),t[n].scaleY&&(a.scaleY=t[n].scaleY),i.addChild(a),i._dataDic.set(t[n].keyName,a)}return i}return __extends(t,e),t.prototype.push=function(e){var t=new CustomImage;t.source=e.sourceName,e.offsetX&&(t.x=e.offsetX),e.offsetY&&(t.y=e.offsetY),e.scaleX&&(t.scaleX=e.scaleX),e.scaleY&&(t.scaleY=e.scaleY),this.addChild(t),this._dataDic.set(e.keyName,t)},t.prototype.dispose=function(){this._dataDic.clear(),this._dataDic=null},t}(egret.DisplayObjectContainer);e.ImagePlayer=t,__reflect(t.prototype,"tool.ImagePlayer")}(tool||(tool={}));var table;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"table.TableGameRuleConfigList"},e}();e.TableGameRuleConfigList=t,__reflect(t.prototype,"table.TableGameRuleConfigList")}(table||(table={}));var tool;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;if(i._dataDic=new SimpleMap,i._index=0,t)for(var n=0;n<t.length;n++){var a=UIUtil.creatMovieClip(t[n].groupName,t[n].actionName);1!=t.length&&(a.visible=!1),t[n].offsetX&&(a.x=t[n].offsetX),t[n].offsetY&&(a.y=t[n].offsetY),t[n].frameRate&&(a.frameRate=t[n].frameRate),t[n].scaleX&&(a.scaleX=t[n].scaleX),t[n].scaleY&&(a.scaleY=t[n].scaleY),i.addChild(a),i._dataDic.set(t[n].keyName,a)}return i}return __extends(t,e),t.prototype.push=function(e){var t=UIUtil.creatMovieClip(e.groupName,e.actionName);t.visible=!1,e.offsetX&&(t.x=e.offsetX),e.offsetY&&(t.y=e.offsetY),e.frameRate&&(t.frameRate=e.frameRate),e.scaleX&&(t.scaleX=e.scaleX),e.scaleY&&(t.scaleY=e.scaleY),this.addChild(t),this._dataDic.set(e.keyName,t)},t.prototype.SwitchAni=function(e,t){void 0===t&&(t=-1),this._lastMov&&(this._lastMov.stop(),this._lastMov.visible=!1);var i=this._dataDic.get(e);null!=i?(i.visible=!0,i.gotoAndPlay(1,t),this._lastMov=i):console.assert(!1,"不存在keyName："+e)},t.prototype.switchAniByIndex=function(e,t){void 0===t&&(t=-1),this._lastMov&&(this._lastMov.stop(),this._lastMov.visible=!1);var i=this._dataDic.getByKeyIndex(e);null!=i?(i.visible=!0,i.gotoAndPlay(1,t),this._lastMov=i):console.assert(!1,"不存在index："+e)},t.prototype.playOnceAll=function(e){for(var t=this,i=0,n=function(n){var o=a._dataDic.getByKeyIndex(n);o.visible=!0,o.gotoAndPlay(1,1),o.once(egret.MovieClipEvent.COMPLETE,function(){o.visible=!1,i++,i==t._dataDic.length&&e&&e.run()},a)},a=this,o=0;o<this._dataDic.length;o++)n(o)},t.prototype.switchAniPlayOnce=function(e,t){this._lastMov&&(this._lastMov.stop(),this._lastMov.visible=!1);var i=this._dataDic.get(e);i?(i.visible=!0,i.gotoAndPlay(1,1),this._lastMov=i,i.once(egret.MovieClipEvent.COMPLETE,function(){i.stop(),i.visible=!1,t&&t.run()},this)):console.assert(!1,"不存在keyName："+e)},t.prototype.getMovieClipByKey=function(e){var t=this._dataDic.get(e);return t||console.assert(!1,"不存在keyName："+e),t},t.prototype.stop=function(){this._lastMov&&this._lastMov.stop()},t.prototype.stopAll=function(){for(var e=this._dataDic,t=0;t<e.length;t++){var i=e.getByKeyIndex(t);i.stop(),i.visible=!1}},t.prototype.play=function(e,t,i,n){var a=this;i?Laya.timer.once(i,this,function(){a._playMoiveClip(e,t,n)}):this._playMoiveClip(e,t,n)},t.prototype._playMoiveClip=function(e,t,i){var n=this._dataDic.get(e);n&&(n.visible=!0,n.gotoAndPlay(1,t),1==t&&n.once(egret.MovieClipEvent.COMPLETE,function(){n.stop(),n.visible=!1,i&&i.run()},this))},t.prototype.dispose=function(){this._dataDic.clear(),this._dataDic=null,this.stop()},t}(egret.DisplayObjectContainer);e.MoviePlayer=t,__reflect(t.prototype,"tool.MoviePlayer")}(tool||(tool={}));var tool;!function(e){var t=function(){function e(e,t,i,n){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null);var a=this;this._tfPage=null,this._btnPre=null,this._btnNext=null,this._btnFinally=null,this._changePage=null,this._curPage=1,this._maxPage=1,this._showNum=-1,this._startIndex=-1,this._endIndex=-1,this._btnPre=e,this._btnNext=t,this._btnFinally=n,this._tfPage=i,null!=this._btnPre&&(this._btnPre.mouseClickHandler=Handler.create(this,function(){a.curPage--})),null!=this._btnNext&&(this._btnNext.mouseClickHandler=Handler.create(this,function(){a.curPage++})),null!=this._btnFinally&&(this._btnFinally.mouseClickHandler=Handler.create(this,function(){a.curPage=a.maxPage}))}return e.prototype.setSound=function(e,t){this._btnPre.setSound(e),this._btnNext.setSound(t)},e.prototype.dispose=function(){null!=this._btnPre&&(this._btnPre.dispose(),this._btnPre=null),null!=this._btnNext&&(this._btnNext.dispose(),this._btnNext=null),null!=this._changePage&&(this._changePage.recover(),this._changePage=null),null!=this._btnFinally&&(this._btnFinally.dispose(),this._btnFinally=null),this._tfPage=null},Object.defineProperty(e.prototype,"onChangePage",{set:function(e){this._changePage=e},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,t){this._showNum=t,this._maxPage=Math.ceil(e/this._showNum)},Object.defineProperty(e.prototype,"maxPage",{get:function(){return this._maxPage},set:function(e){this._maxPage=e>0?e:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curPage",{get:function(){return this._curPage},set:function(e){e>=1&&e<=this._maxPage&&(this._curPage=e,this._startIndex=(this._curPage-1)*this._showNum,this._endIndex=this._curPage*this._showNum,null!=this._changePage&&this._changePage.run(),null!=this._btnPre&&(this._btnPre.enabled=this._curPage>1),null!=this._btnNext&&(this._btnNext.enabled=this._curPage<this._maxPage),null!=this._btnFinally&&(this._btnFinally.enabled=!(this._curPage==this._maxPage))),null!=this._tfPage&&(this._tfPage.text=this._curPage+"/"+this._maxPage)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endIndex",{get:function(){return this._endIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!0,configurable:!0}),e}();e.PageComponent=t,__reflect(t.prototype,"tool.PageComponent")}(tool||(tool={}));var tool;!function(e){var t=function(e){function t(t,i,n,a){void 0===i&&(i=null),void 0===n&&(n=!1),void 0===a&&(a=!1);var o=e.call(this,t,i,n,a)||this;return o._selected=!1,o}return __extends(t,e),t.prototype.onMouseClick=function(e){null!=this._mouseClickHandler&&this._mouseClickHandler.runWith(this)},Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,this._selected?null!=this._selectHandler&&this._selectHandler.runWith(this):this._cancelHanlder&&this._cancelHanlder.runWith(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cancelHanlder",{set:function(e){this._cancelHanlder=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectHandler",{set:function(e){this._selectHandler=e},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._cancelHanlder&&(this._cancelHanlder.recover(),this._cancelHanlder=null),this._selectHandler&&(this._selectHandler.recover(),this._selectHandler=null),e.prototype.dispose.call(this)},t}(e.Button);e.ToggleButton=t,__reflect(t.prototype,"tool.ToggleButton")}(tool||(tool={}));var tool;!function(e){var t=function(){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this._btnGroup=[],this._clickSameObject=!1,this.index=-1;for(var n=t.length,a=0;n>a;a++)if(t[a]instanceof e.ToggleButton){var o=t[a];o.mouseClickHandler=Handler.create(this,this._onClick),this._btnGroup.push(o)}}return Object.defineProperty(t.prototype,"clickSameObject",{set:function(e){this._clickSameObject=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._btnGroup.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changeHandler",{set:function(e){this._changeHandler=e},enumerable:!0,configurable:!0}),t.prototype.getIndexByBtn=function(e){return this._btnGroup.indexOf(e)},Object.defineProperty(t.prototype,"clickByIndex",{set:function(e){var t=this._btnGroup[e];t&&this._onClick(t)},enumerable:!0,configurable:!0}),t.prototype.getBtnByIndex=function(e){return this._btnGroup[e]},t.prototype._onClick=function(e){if(this._lastClickBtn){if(this._lastClickBtn==e&&!this._clickSameObject)return;this._lastClickBtn.selected=!1}e.selected=!0,this._lastClickBtn=e,this.index=this.getIndexByBtn(e),this._changeHandler&&this._changeHandler.runWith(e)},Object.defineProperty(t.prototype,"lastClickBtn",{get:function(){return this._lastClickBtn},enumerable:!0,configurable:!0}),t.prototype.push=function(e){e.mouseClickHandler=Handler.create(this,this._onClick),this._btnGroup.push(e)},t.prototype.dispose=function(){this._changeHandler&&(this._changeHandler.recover(),this._changeHandler=null);for(var e=0;e<this._btnGroup.length;e++)this._btnGroup[e].dispose(),this._btnGroup[e]=null;this._btnGroup.length=0,this._btnGroup=null},t.prototype.clear=function(){this._changeHandler&&(this._changeHandler.recover(),this._changeHandler=null);for(var e=0;e<this._btnGroup.length;e++)this._btnGroup[e].dispose(),this._btnGroup[e]=null;this._btnGroup.length=0},t}();e.ToggleButtonGroup=t,__reflect(t.prototype,"tool.ToggleButtonGroup")}(tool||(tool={}));var table;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"table.TablePropConfig"},e}();e.TablePropConfig=t,__reflect(t.prototype,"table.TablePropConfig")}(table||(table={}));var CacheManager=function(){function e(){}return e.regCacheByFunction=function(e,t){this.unRegCacheByFunction(e,t);var i;i={tryDispose:e,getCacheList:t},this._cacheList.push(i)},e.unRegCacheByFunction=function(e,t){var i,n;for(n=this._cacheList.length,i=0;n>i;i++)if(this._cacheList[i].tryDispose==e&&this._cacheList[i].getCacheList==t)return void this._cacheList.splice(i,1)},e.forceDispose=function(){var e,t=this._cacheList.length;for(e=0;t>e;e++)this._cacheList[e].tryDispose(!0)},e.beginCheck=function(e){void 0===e&&(e=15e3)},e.stopCheck=function(){},e._checkLoop=function(){var e=this._cacheList;if(!(e.length<1)){var t,i,n=Date.now();for(i=t=e.length;t>0&&(this._index++,this._index=this._index%i,e[this._index].tryDispose(!1),!(Date.now()-n>this.loopTimeLimit));)t--}},e.loopTimeLimit=2,e._cacheList=[],e._index=0,e}();__reflect(CacheManager.prototype,"CacheManager");var ColorUtil=function(){function e(){}return e.COLOR_WHITE=16777215,e.COLOR_BLACK=0,e.COLOR_RED=16711680,e.COLOR_BUFF=16771002,e.COLOR_YELLOW=15334430,e.COLOR_GREEN=3992168,e.COLOR_ORANGE=16744228,e.COLOR_MAPLE=14466972,e.COLOR_GOLD=16766720,e.COLOR_SHADOW=788737,e.STR_COLOR_WHITE="0xffffff",e.STR_COLOR_BLACK="0x000000",e.STR_COLOR_RED="0xFF0000",e}();__reflect(ColorUtil.prototype,"ColorUtil");var CustomImage=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.touchEnabled=!1},t}(eui.Image);__reflect(CustomImage.prototype,"CustomImage");var Dictionary=function(){function e(){this._values=[],this._keys=[]}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(e){this._values=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this._keys},set:function(e){this._keys=e},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){var i=this.indexOf(e);return i>=0?void(this._values[i]=t):(this._keys.push(e),void this._values.push(t))},e.prototype.indexOf=function(e){return this._keys.indexOf(e)},e.prototype.get=function(e){var t=this.indexOf(e);return 0>t?null:this._values[t]},e.prototype.remove=function(e){var t=this.indexOf(e);return t>=0?(this._keys.splice(t,1),this._values.splice(t,1),!0):!1},e.prototype.clear=function(){this._values.length=0,this._keys.length=0},Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.copy=function(t,i){void 0===t&&(t=0),void 0===i&&(i=Number.MAX_VALUE);var n=new e;return n.values=this._values.slice(t,i),n.keys=this._keys.slice(t,i),n},e.prototype.getKeyByValue=function(e){var t=this._values.indexOf(e);return 0>t?null:this._keys[t]},e.prototype.isExist=function(e){return-1!=this.indexOf(e)},e}();__reflect(Dictionary.prototype,"Dictionary");var EventManager=function(){function e(){this._eventDic=new SimpleMap,this._cacheEventDic=new SimpleMap}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.registerEvent=function(t,i,n,a){if(void 0===n&&(n=0),void 0===a&&(a=!1),0==n){if(e.instance._cacheEventDic.isExist(t)){var o=e.instance._cacheEventDic.get(t);i.runWith(o),a&&e.removeCacheEvent(t)}var r=e.instance._eventDic.get(t);null!=r||(r=new Array),r.push(i),e.instance._eventDic.set(t,r)}else if(1==n)if(e.instance._cacheEventDic.isExist(t)){var o=e.instance._cacheEventDic.get(t);i.once=!0,i.runWith(o),a&&e.removeCacheEvent(t)}else{var r=e.instance._eventDic.get(t);null!=r||(r=new Array),i.once=!0,r.push(i),e.instance._eventDic.set(t,r)}},e.unregisterEvent=function(t,i,n){var a=e.instance._eventDic.get(t);if(null!=a&&0!=a.length)for(var o=0;o<a.length;o++)if(a[o].caller==i&&a[o].method==n){a[o].recover(),a.remove(a[o]);break}},e.removeCacheEvent=function(t){e.instance._cacheEventDic.remove(t)},e.fireEvent=function(t,i,n){void 0===i&&(i=null),void 0===n&&(n=0);var a=e.instance._eventDic.get(t);if(null!=a&&0!=a.length)for(var o=a.slice(),r=o.length,s=0;r>s;s++){var l=o[s];l.once&&e.instance._cacheEventDic.remove(t),l.runWith(i)}else 1==n&&e.instance._cacheEventDic.set(t,i);2==n&&e.instance._cacheEventDic.set(t,i)},e.prototype.dispose=function(){e.instance._eventDic.clear(),e.instance._cacheEventDic.clear()},e._instance=null,e}();__reflect(EventManager.prototype,"EventManager");var Handler=function(){function e(e,t,i,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=!1),this.once=!1,this._id=0,this.setTo(e,t,i,n)}return e.prototype.setTo=function(t,i,n,a){return this._id=e._gid++,this.caller=t,this.method=i,this.args=n,this.once=a,this},e.prototype.run=function(){if(null==this.method)return null;var e=this._id,t=this.method.apply(this.caller,this.args);return this._id===e&&this.once&&this.recover(),t},e.prototype.runWith=function(e){if(null==this.method)return null;var t=this._id;if(null==e)var i=this.method.apply(this.caller,this.args);else i=this.args||e instanceof Array?this.args?this.method.apply(this.caller,this.args.concat(e)):this.method.apply(this.caller,e):this.method.call(this.caller,e);return this._id===t&&this.once&&this.recover(),i},e.prototype.clear=function(){return this.caller=null,this.method=null,this.args=null,this.once=!1,this},e.prototype.recover=function(){this._id>0&&(this._id=0,e._pool.push(this.clear()))},e.create=function(t,i,n,a){return void 0===n&&(n=null),void 0===a&&(a=!1),this._pool.length?this._pool.pop().setTo(t,i,n,a):new e(t,i,n,a)},e._pool=[],e._gid=1,e}();__reflect(Handler.prototype,"Handler");var PCMouseHelper=function(){function e(){}return e.changeCursor=function(){this._cursorImg=new eui.Image;var e=document.getElementsByTagName("canvas")[0],t=e.style;t.cursor="url(cursor/cursor.png) 37.5 38,auto"},e._onMouseMove=function(e){},e.recover=function(){var e=document.getElementsByTagName("canvas")[0],t=e.style;t.cursor="auto"},e}();__reflect(PCMouseHelper.prototype,"PCMouseHelper");var Pool=function(){function e(){}return e.getPoolBySign=function(e){return this._poolDic[e]||(this._poolDic[e]=[])},e.clearBySign=function(e){-1!=this._signAry.indexOf(e)&&this._signAry.remove(e),this._poolDic[e]&&(this._poolDic[e].length=0)},e.recover=function(e,t){this.getPoolBySign(e).push(t)},e.getItemByClass=function(e,t){-1==this._signAry.indexOf(e)&&this._signAry.push(e);var i=this.getPoolBySign(e),n=i.length?i.pop():new t;return n},e.getItemByCreateFun=function(e,t){-1==this._signAry.indexOf(e)&&this._signAry.push(e);var i=this.getPoolBySign(e),n=i.length?i.pop():t.run();return n},e.getItem=function(e){var t=this.getPoolBySign(e),i=t.length?t.pop():null;return i},e.clearAll=function(){for(var e=0;e<this._signAry.length;e++){for(var t=this._signAry[e],i=this._poolDic[t],n=0;n<i.length;n++)i[n]&&(i[n]=null);i.length=0}this._signAry.length=0},e.SIMPLE_MAP="simple_map",e.jumpCoinText="jumpCoinText",e.jumpCoinTexts="jumpCoinTexts",e.flyCoin="flyCoin",e.yiWangDaJin="yiWangDaJin",e.boomIMG="boomIMG",e.langbo="langbo",e.collider="collider",e.clickingWaterWave="clickingWaterWave",e.jinbi="jinbi",e.yingbi="yingbi",e._poolDic={},e._signAry=[],e}();__reflect(Pool.prototype,"Pool");var PoolCache=function(){function e(){this.maxCount=1e3}return e.prototype.getCacheList=function(){return Pool.getPoolBySign(this.sign)},e.prototype.tryDispose=function(e){var t;t=Pool.getPoolBySign(this.sign),t.length>this.maxCount&&t.splice(this.maxCount,t.length-this.maxCount)},e.addPoolCacheManager=function(t,i){void 0===i&&(i=100);var n;n=new e,n.sign=t,n.maxCount=i,CacheManager.regCacheByFunction(n.tryDispose,n.getCacheList)},e}();__reflect(PoolCache.prototype,"PoolCache");var table;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"table.TableRoomConfig"},e}();e.TableRoomConfig=t,__reflect(t.prototype,"table.TableRoomConfig"),function(e){var t=function(){function e(){}return e}();e.ChipListItem=t,__reflect(t.prototype,"table.TableRoomConfig.ChipListItem")}(t=e.TableRoomConfig||(e.TableRoomConfig={}))}(table||(table={}));var FishingJoy;!function(e){var t=function(){function e(){}return e.BGM_SOUND="bgm_FishingJoy_mp3",e.BET_LEVEL_CLICK="chips_FishingJoy_mp3",e.COMMON_BTN_CLICK="btn_FishingJoy_mp3",e.COUNTDOWN="countdown_FishingJoy_mp3",e.BET_SOUND_ARY=["sgj_bt1_FishingJoy_mp3","sgj_bt2_FishingJoy_mp3","sgj_bt3_FishingJoy_mp3","sgj_bt4_FishingJoy_mp3","sgj_bt5_FishingJoy_mp3","sgj_bt6_FishingJoy_mp3","sgj_bt7_FishingJoy_mp3","sgj_bt8_FishingJoy_mp3"],e.ROTATION_START="sgj_start_FishingJoy_mp3",e.ROTATION_LOOP="sgj_loop_FishingJoy_mp3",e.ROTATION_LOOP_lOOG="sgj_loop_long_FishingJoy_mp3",e.ROTATION_END="sgj_end_FishingJoy_mp3",e.TWINKLE_SOUND="twinkle_FishingJoy_mp3",e.REVERSE_ROTATION="sjg_xh_FishingJoy_mp3",e.SMALL_WIN="win_FishingJoy_mp3",e.CLOSE="close_FishingJoy_mp3",e.CLICK="click_qingcui_FishingJoy_mp3",e.BIG_FOUR="sgj_dsx_FishingJoy_mp3",e.BIG_THREE="sgj_dsy_FishingJoy_mp3",e.SMALL_THREE="sgj_xsy_FishingJoy_mp3",e}();e.SOUND_CONST=t,__reflect(t.prototype,"FishingJoy.SOUND_CONST")}(FishingJoy||(FishingJoy={}));var Timer=function(){function e(){this._delta=0,this.scale=1,this.currTimer=this._now(),this.currFrame=0,this._lastTimer=this._now(),this._mid=1,this._methodMap=new Dictionary,this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._init()}return Object.defineProperty(e.prototype,"delta",{get:function(){return this._delta},enumerable:!0,configurable:!0}),e.prototype._init=function(){Laya.timer&&Laya.timer.frameLoop(1,this,this.update)},e.prototype._now=function(){return Date.now()},e.prototype.update=function(){if(this.scale<=0)return void(this._lastTimer=this._now());var e=this.currFrame=this.currFrame+this.scale,t=this._now();this._delta=(t-this._lastTimer)*this.scale;var i=this.currTimer=this.currTimer+this._delta;this._lastTimer=t;var n=this._handlers;for(this._count=0,r=0,s=n.length;s>r;r++)if(l=n[r],null!==l.method){var a=l.userFrame?e:i;if(a>=l.exeTime)if(l.repeat)if(l.jumpFrame)for(;a>=l.exeTime;)l.exeTime+=l.delay,l.run(!1);else l.exeTime+=l.delay,l.run(!1),a>l.exeTime&&(l.exeTime+=Math.ceil((a-l.exeTime)/l.delay)*l.delay);else l.run(!0)}else this._count++;(this._count>30||e%200===0)&&this._clearHandlers();for(var o=this._laters,r=0,s=o.length-1;s>=r;r++){var l=o[r];null!==l.method&&(this._methodMap.remove(l.method),l.run(!1)),this._recoverHandler(l),r===s&&(s=o.length-1)}o.length=0},e.prototype._clearHandlers=function(){for(var e=this._handlers,t=0,i=e.length;i>t;t++){var n=e[t];null!==n.method?this._temp.push(n):this._recoverHandler(n)}this._handlers=this._temp,this._temp=e,this._temp.length=0},e.prototype._recoverHandler=function(t){this._methodMap.get(t.method)==t&&this._methodMap.remove(t.method),t.clear(),e._pool.push(t)},e.prototype._create=function(t,i,n,a,o,r,s){if(!n)return o.apply(a,[r]),null;if(s){var l=this._getHandler(a,o);if(l)return l.repeat=i,l.userFrame=t,l.delay=n,l.caller=a,l.method=o,l.args=r,l.exeTime=n+(t?this.currFrame:this.currTimer+this._now()-this._lastTimer),l}return l=e._pool.length>0?e._pool.pop():new TimerHandler,l.repeat=i,l.userFrame=t,l.delay=n,l.caller=a,l.method=o,l.args=r,l.exeTime=n+(t?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(l),this._handlers.push(l),l},e.prototype._indexHandler=function(e){this._methodMap.set(e.method,e)},e.prototype.once=function(e,t,i,n,a){void 0===n&&(n=null),void 0===a&&(a=!0),this._create(!1,!1,e,t,i,n,a)},e.prototype.loop=function(e,t,i,n,a,o){void 0===n&&(n=null),void 0===a&&(a=!0),void 0===o&&(o=!1);var r=this._create(!1,!0,e,t,i,n,a);r&&(r.jumpFrame=o)},e.prototype.frameOnce=function(e,t,i,n,a){void 0===n&&(n=null),void 0===a&&(a=!0),this._create(!0,!1,e,t,i,n,a)},e.prototype.frameLoop=function(e,t,i,n,a){void 0===n&&(n=null),void 0===a&&(a=!0),this._create(!0,!0,e,t,i,n,a)},e.prototype.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+e._pool.length},e.prototype.clear=function(e,t){var i=this._getHandler(e,t);i&&(this._methodMap.remove(i.method),i.clear())},e.prototype.clearAll=function(e){if(e)for(var t=0,i=this._handlers.length;i>t;t++){var n=this._handlers[t];n.caller===e&&(this._methodMap.remove(n.method),n.clear())}},e.prototype._getHandler=function(e,t){for(var i=0,n=this._handlers.length;n>i;i++){var a=this._handlers[i];if(a.caller===e&&a.method==t)return a}return null},e.prototype.callLater=function(t,i,n){if(void 0===n&&(n=null),null==this._getHandler(t,i)){if(e._pool.length)var a=e._pool.pop();else a=new TimerHandler;a.caller=t,a.method=i,a.args=n,this._indexHandler(a),this._laters.push(a)}},e.prototype.runCallLater=function(e,t){var i=this._getHandler(e,t);i&&null!=i.method&&(this._methodMap.remove(i.method),i.run(!0))},e.prototype.runTimer=function(e,t){this.runCallLater(e,t)},e._pool=[],e}();__reflect(Timer.prototype,"Timer");var TimerHandler=function(){function e(){}return e.prototype.clear=function(){this.caller=null,this.method=null,this.args=null},e.prototype.run=function(e){var t=this.caller;if(t&&t.destroyed)return this.clear();var i=this.method,n=this.args;e&&this.clear(),null!=i&&(n?i.apply(t,n):i.call(t))},e}();__reflect(TimerHandler.prototype,"TimerHandler");
var UIUtil=function(){function e(){}return e.setItemGridLayout=function(e,t,i,n,a,o,r,s){void 0===a&&(a=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=0);for(var l=0;i>l;l++){var h=this.getGridItemPos(l,t,n,a,o,r,s);t.x=h[0],t.y=h[1],e.addChild(t)}},e.getGridItemPos=function(e,t,i,n,a,o,r){void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===r&&(r=0);var s=e%i*(t.width+n)+o,l=Math.floor(e/i)*(t.height+a)+r;return[s,l]},e.setGray=function(e){var t=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);e.filters=[i]},e.setNomarl=function(e){e&&(e.filters=[])},e.setLight=function(e){var t=[1,0,0,0,51,0,1,0,0,224*.2,0,0,1,0,141*.2,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);e.filters=[i]},e.setRed=function(e){var t=[1,.964,.999,.96,51,0,1,0,0,0,0,1,1,0,0,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);e.filters=[i]},e.removeSelf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=e.length,n=0;i>n;n++){var a=e[n];egret.is(a,"egret.DisplayObject")&&a.parent&&a&&a.parent.removeChild(a)}},e.formatMoneny=function(e){var t;return t=e>1e9?e/1e9+"M":e>1e4?e/1e4+"W":e>1e3?e/1e3+"K":e.toString()},e.creatMovieClip=function(e,t){void 0===t&&(t="action");var i=RES.getRes(e+"_json"),n=RES.getRes(e+"_png"),a=new egret.MovieClipDataFactory(i,n);return new egret.MovieClip(a.generateMovieClipData(t))},e.movPlayOnce=function(e,t,i,n,a,o,r,s){void 0===a&&(a=1),void 0===o&&(o=1),void 0===r&&(r=null),e.addChild(t),t.x=i,t.y=n,t.scaleX=a,t.scaleY=o,t.gotoAndPlay(1,1),s?Laya.timer.once(s,this,function(){t.stop(),e.removeChild(t),r&&r.run()}):t.once(egret.MovieClipEvent.COMPLETE,function(){t&&(t.stop(),e.removeChild(t)),r&&r.run()},this)},e.circleAdd=function(e,t,i){return e+=t,e>i&&(e-=i+1),e},e.creatDragonbones=function(e,t){void 0===t&&(t="armatureName");var i=dragonBones.EgretFactory.factory;if(null==i.getDragonBonesData(e)){var n=RES.getRes("test_ske_dbbin"),a=RES.getRes("test_tex_json"),o=RES.getRes("test_tex_png");i.parseDragonBonesData(n,e),i.parseTextureAtlasData(a,o,e)}var r=i.buildArmatureDisplay(t,e);return r},e.inBorder=function(e,t){return-100>e||e>uniLib.Global.screenWidth+100?!1:-100>t||t>uniLib.Global.screenHeight+100?!1:!0},e.inView=function(e,t){return 0>e||e>uniLib.Global.screenWidth?!1:0>t||t>uniLib.Global.screenHeight?!1:!0},e.inAimView=function(e,t){return 30>e||e>uniLib.Global.screenWidth-30?!1:30>t||t>uniLib.Global.screenHeight-30?!1:!0},e.getRadian=function(e){return e*Math.PI/180},e.getAngle=function(e){return 180*e/Math.PI},e.setJumpTween=function(e,t,i,n,a){var o=this;void 0===n&&(n=1e3),void 0===a&&(a=MathUtil.random(0,3e3)),egret.Tween.get(e).to({scaleX:1,scaleY:1,y:i},n,egret.Ease.bounceOut).wait(a).call(function(){egret.Tween.get(e).to({scaleX:.9,scaleY:1.1,y:t},n,egret.Ease.bounceIn).call(o.setJumpTween,o,[e,t,i,n])},this)},e.setBreatheTween=function(e,t){var i=this;egret.Tween.get(e).to({alpha:0},t).call(function(){egret.Tween.get(e).to({alpha:1},t).wait(500).call(i.setBreatheTween,i,[e,t])},this)},e.setScaleTween=function(e,t,i,n){var a=this;void 0===n&&(n=600),egret.Tween.get(e).to({scaleX:1.1*t,scaleY:1.1*i},n).call(function(){egret.Tween.get(e).to({scaleX:.9*t,scaleY:.9*i},n).call(a.setScaleTween,a,[e,t,i,n])},this)},e.setDownUpTween=function(e,t,i,n){var a=this;void 0===n&&(n=1e3),egret.Tween.get(e).to({y:t},n).call(function(){egret.Tween.get(e).to({y:i},n).call(a.setDownUpTween,a,[e,t,i,n])},this)},e.localToGlobal=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n=Point.create(0,0);n=e.localToGlobal(t,i,n);var a=n.x,o=n.y;return Point.release(n),[a,o]},e.calculateBatteryRotation=function(e,t,i){var n=Point.create(0,0);e.focus.localToGlobal(0,0,n);var a=manager.LayerManager.instance.getLayer(2);a.globalToLocal(n.x,n.y,n);var o=Point.create(0,0);return a.globalToLocal(t,i,o),Point.release(o),Point.release(n),GX.getRadianByPoint({x:n.x,y:n.y},{x:o.x,y:o.y})},e.isCanAim=function(t){var i=[-1,-1],n=i[0],a=i[1];if(t.isAccurateCollider)for(var o=0;o<t.colliderAry.length;o++){var r=t.colliderAry[o];if(s=e.localToGlobal(r),n=s[0],a=s[1],e.inAimView(n,a))return!0}else if(l=e.localToGlobal(t),n=l[0],a=l[1],e.inAimView(n,a))return!0;return!1;var s,l},e.getGlobePos=function(e){var t=Point.create(0,0);if(e.localToGlobal(0,0,t),Master.instance.isRotation){var i=manager.LayerManager.instance.getLayer(2);i.localToGlobal(t.x,t.y,t)}var n=t.x,a=t.y;return Point.release(t),[n,a]},e.traGoldLabel=function(e){game.Config.PublicGoldFont&&(e.font=game.Config.PublicGoldFont)},e}();__reflect(UIUtil.prototype,"UIUtil");